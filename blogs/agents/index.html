<!doctype html><html lang=en class=no-js><head><script src=/js/critical.bundle.min.85a7f5f23dc031d38877ecdb71b00d49e8a62c54f1ba98e75a734706ea09f30a.js integrity="sha256-haf18j3AMdOId+zbcbANSeimLFTxupjnWnNHBuoJ8wo=" crossorigin=anonymous></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.143.1"><meta name=theme content="Hinode 0.29.3"><link rel=stylesheet href="/css/main.min.2d9f08a384019794d7cb9e682556930966cd9db5fc51ca90d439a9f5b1032e59.css" integrity="sha256-LZ8Io4QBl5TXy55oJVaTCWbNnbX8UcqQ1Dmp9bEDLlk=" crossorigin=anonymous><link rel=preload href=/fonts/inter-v12-latin-regular.woff2 as=font type=font/woff2 crossorigin><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>EV's Blog - Agents 框架</title>
<meta name=description content="Agents 框架介绍 （MetaGPT/ChatDEV/AutoGen）"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Agents 框架"><meta property="og:description" content="Agents 框架介绍 （MetaGPT/ChatDEV/AutoGen）"><meta property="og:url" content="https://eveydyw.github.io/blogs/agents/"><meta property="og:site_name" content="EV's Blog"><meta property="article:published_time" content="2023-11-01T14:26:34+08:00"><meta property="article:modified_time" content="2023-11-01T14:26:34+08:00"><meta property="og:image" content="https://eveydyw.github.io/img/logo1280x640.png"><meta property="og:image:alt" content="Agents 框架"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Agents 框架"><meta name=twitter:description content="Agents 框架介绍 （MetaGPT/ChatDEV/AutoGen）"><meta name=twitter:image content="https://eveydyw.github.io/img/logo1280x640.png"><meta name=twitter:image:alt content="Agents 框架"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://eveydyw.github.io/#/schema/organization/1","name":"Hinode","url":"https://eveydyw.github.io/","sameAs":[null,"https://github.com/gethinode/hinode"],"logo":{"@type":"ImageObject","@id":"https://eveydyw.github.io/#/schema/image/1","url":"https://eveydyw.github.io/img/logo512x512.png","width":512,"height":512,"caption":"Hinode"},"image":{"@id":"https://eveydyw.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://eveydyw.github.io/#/schema/website/1","url":"https://eveydyw.github.io/","name":"EV\u0027s Blog","description":"Hinode is a clean documentation and blog theme for your Hugo site based on Bootstrap 5.","publisher":{"@id":"https://eveydyw.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://eveydyw.github.io/blogs/agents/","url":"https://eveydyw.github.io/blogs/agents/","name":"Agents 框架","description":"Agents 框架介绍 （MetaGPT\/ChatDEV\/AutoGen）","isPartOf":{"@id":"https://eveydyw.github.io/#/schema/website/1"},"about":{"@id":"https://eveydyw.github.io/#/schema/organization/1"},"datePublished":"2023-11-01T14:26:34CET","dateModified":"2023-11-01T14:26:34CET","breadcrumb":{"@id":"https://eveydyw.github.io/blogs/agents/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://eveydyw.github.io/blogs/agents/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://eveydyw.github.io/blogs/agents/"]}]},{"@type":"BreadcrumbList","@id":"https://eveydyw.github.io/blogs/agents/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://eveydyw.github.io/","url":"https://eveydyw.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://eveydyw.github.io/blogs/","url":"https://eveydyw.github.io/blogs/","name":"Blogs"}},{"@type":"ListItem","position":3,"item":{"@id":"https://eveydyw.github.io/blogs/agents/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://eveydyw.github.io/blogs/agents/#/schema/image/2","url":"https://eveydyw.github.io/img/logo1280x640.png","contentUrl":"https://eveydyw.github.io/img/logo1280x640.png","caption":"Agents 框架"}]}]}</script><link rel=icon type=image/png sizes=16x16 href=/img/my_logo_hu_10729e67805acfd8.png><link rel=icon type=image/png sizes=32x32 href=/img/my_logo_hu_f267cd4735c3fb50.png><link rel=icon type=image/png sizes=48x48 href=/img/my_logo_hu_bc348718a5ba4099.png><link rel=apple-touch-icon sizes=180x180 href=/img/my_logo_hu_a8f52fe79483cdab.png><script>MathJax={loader:{load:["[tex]/html","[tex]/ams","[tex]/amscd"]},tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]],processEscapes:!0,packages:["base","ams","amscd"],tags:"ams"},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"],renderActions:{addMenu:[0,"",""],checkLoading:[0,"",""]}},chtml:{scale:1,displayAlign:"center",displayIndent:"0em",lineWidth:"container"},svg:{fontCache:"global"}}</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js></script></head><body><div class="d-flex flex-column min-vh-100"><div class="d-flex flex-column"><div class="container-fluid fixed-top p-0"><nav class="navbar p-4 bg-body navbar-fixed-top navbar-expand-md"><div class="container-xxl p-0"><div class="d-flex navbar-container justify-content-center"><div class="d-flex align-items-center"><button class="navbar-toggler collapsed p-0 mx-auto invisible fw-30" type=button><svg class="svg-inline--fa fas fa-ellipsis fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 448 512"><use href="#fas-ellipsis"/></svg></button></div><div class=mx-auto><a class=navbar-brand href=/ aria-label=Home><img src=/img/my_logo.svg alt="EV's Blog logo" height=30 width=30></a></div><div class="d-flex align-items-center"><button class="navbar-toggler main-nav-toggler collapsed p-0" type=button data-bs-toggle=collapse data-bs-target=#navbar-0-collapse aria-controls=navbar-0 aria-expanded=false aria-label="Toggle main navigation">
<span class="toggler-icon top-bar emphasis"></span>
<span class="toggler-icon middle-bar emphasis"></span>
<span class="toggler-icon bottom-bar emphasis"></span></button></div></div><div class="navbar-collapse collapse" id=navbar-0-collapse><div class="d-flex flex-fill ms-md-3 mt-4 mt-md-0"><form class="search flex-fill position-relative me-auto"><input class="search-input form-control is-search" type=search placeholder="Search this site" aria-label="Search this site" autocomplete=off name=search-input><div class="search-suggestions shadow bg-body rounded d-none" data-no-results="No results for"></div></form></div><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link data-nav=main data-nav-main=home href=/><span>Home</span>&nbsp;</a></li><li class=nav-item><a class=nav-link data-nav=main data-nav-main=blogs href=/blogs/><span>Blogs</span>&nbsp;</a></li><li class=nav-item><a class=nav-link data-nav=main data-nav-main=tags href=/tags><span>Tags</span>&nbsp;</a></li><li class="d-flex mode-switch align-items-center" id=navbar-mode><input type=checkbox class="checkbox navbar-mode-selector" id=navbar-mode-checkbox aria-label="Toggle theme">
<label class=label for=navbar-mode-checkbox><svg class="svg-inline--fa fas fa-sun fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 512 512"><use href="#fas-sun"/></svg><svg class="svg-inline--fa fas fa-moon fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 384 512"><use href="#fas-moon"/></svg><div class=ball></div></label></li></ul></div></div></nav></div><div class=main-content></div></div><div class="container-xxl flex-fill p-4 px-xxl-0"><div class="row row-cols-1 row-cols-md-2 row-cols-lg-3"><div class="col col-lg-2 d-none d-lg-block sidebar-overflow sticky-top pt-5"></div><div class="col-12 col-md-9 col-lg-8 mb-5 p-4"><nav aria-label=breadcrumb class=d-sm-none><ol class=breadcrumb><li class=breadcrumb-item><a href=/blogs/><svg class="svg-inline--fa fas fa-angle-left" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 320 512"><use href="#fas-angle-left"/></svg>&nbsp;&nbsp;Blogs</a></li></ol></nav><nav aria-label=breadcrumb class="d-none d-sm-block"><ol class=breadcrumb><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/blogs/>Blogs</a></li><li class="breadcrumb-item active" aria-current=page>Agents 框架</li></ol></nav><p class="display-4 mt-5">Agents 框架</p><small class="text-body-secondary text-uppercase">Posted on November 1, 2023
&bull;
3&nbsp;min read &bull;
560&nbsp;words</small><p class="lead mb-5 mt-3">Agents 框架介绍 （MetaGPT/ChatDEV/AutoGen）</p><div class="d-md-none pb-5"><div class="d-grid gap-2 mx-auto"><a aria-label="On this page" href=#toc-collapse class="btn btn-outline-secondary position-relative toc-button" data-bs-toggle=collapse aria-expanded=false aria-controls=toc-collapse role=button><span class="d-flex justify-content-between"><span class=my-auto>On this page</span><span class="align-self-center ps-1"><svg class="svg-inline--fa fas fa-sort" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 320 512"><use href="#fas-sort"/></svg></span></span></a></div><div class="collapse border bg-body-tertiary rounded p-1 navbar-nav-scroll" id=toc-collapse><small><div class="toc toc-panel text-body p-2"><a class="toc-item toc-level-1" href=/blogs/agents/#metagpt>MetaGPT </a><a class="toc-item toc-level-2" href=/blogs/agents/#全流程>全流程 </a><a class="toc-item toc-level-2" href=/blogs/agents/#agent-定义>Agent 定义 </a><a class="toc-item toc-level-2" href=/blogs/agents/#agent执行流程>Agent执行流程 </a><a class="toc-item toc-level-1" href=/blogs/agents/#chatdev>ChatDev </a><a class="toc-item toc-level-2" href=/blogs/agents/#chat中的关键机制>Chat中的关键机制 </a><a class="toc-item toc-level-2" href=/blogs/agents/#agent-定义-1>Agent 定义 </a><a class="toc-item toc-level-1" href=/blogs/agents/#autogen>AutoGen</a></div></small></div></div><div class=content><p><strong>LLM Powered Autonomous Agents</strong></p><p>在基于 LLM 驱动的 agent 体系里, LLM 作为agent的大脑，加其他 3个能力作为补充：</p><ol><li><p><strong>规划能力</strong></p><ul><li><p>子目标与拆解: Agent能够把大的任务拆解为更小的，可管理的子任务，实现复杂任务的高效处理。</p></li><li><p>自省与改进: Agent能基于过去的行动做自我批评和自我改进，从过去的错误中学习从而改进未来的动作，从而能够改善最终的结果</p></li></ul></li><li><p><strong>记忆</strong></p><ul><li><p>感官记忆：原始输入</p></li><li><p>短期记忆：in-context learning</p><p>所有基于context的学习能力, 或者说prompt内的学习能力均可作为短期记忆</p></li><li><p>长期记忆：Agent能够保留和无限召回的历史信息能力。这通常通过外部的向量数据库实现</p></li></ul></li><li><p><strong>工具使用</strong></p><p>Agent在模型内部知识不够时，去调用外部 API，比如获取实时的信息，处理代码，访问专有的信息知识库等等.</p></li></ol><ul><li><p><strong>单agent</strong>：通过记忆、规划和工具使用等能力的支持，让大模型自主完成目标任务</p></li><li><p><strong>多agent</strong>：把多个agent组合在一起，每个agent有自主能力和不同的目标任务，充分挖掘大模型思维链和理解能力，协作完成复杂任务</p></li></ul><h2 id=metagpt class=heading>MetaGPT<a href=#metagpt aria-labelledby=metagpt><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p><code>MetaGPT </code>利用装配线范式为各种代理分配不同的角色，建立了一个有效、一致地解构复杂的多代理协作问题的框架。</p><p><code>MetaGPT </code>将高级任务分解为由不同角色处理的详细可操作组件：<code>ProductManager</code>, <code>Architect</code>, <code>ProjectManager</code>, <code>Engineer</code>, <code>QA Engineer</code>，分别输出产品设计、架构图、代码等内容。</p><p>整个过程完全自动化，从而促进特定角色的专业知识运用和协调。</p><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src=pics/image-20250318195224097.png width=75% alt></center><h3 id=全流程 class=heading>全流程<a href=#%e5%85%a8%e6%b5%81%e7%a8%8b aria-labelledby=全流程><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src=pics/image-20250318195423284.png width=75% alt></center><ul><li><p><strong>初始化 Software Company</strong></p><p>定义这个软件公司的环境，投资金额，和初始的需求。</p></li><li><p><strong>Company hire</strong>：</p><p>为了实现这个需求，软件公司需要定义一些角色（Agent）来完成， 初始化这些需要使用的Agent，将Agent按照执行顺序排列，默认的选择就是产品经理，架构师，项目经理，工程师，QA。</p><p>定义每个 Agent 时，需要完成两项初始化：</p><ul><li><p><strong>Init actions</strong>：定义 agent 可以执行的 actions</p></li><li><p><strong>Watch</strong>：添加 agent关注的 action （此action的结果会作为当前agent的参考）</p></li></ul><p><strong>Example</strong>：</p><p>对于产品经理，可执行的 actions 为 写prd 文档， 他关注的动作为boss 发送的初始需求。</p></li><li><p><strong>Invest</strong>：</p><p>定义投资金额，计算成本</p></li><li><p><strong>Start project</strong></p><p>将初始需求发布</p></li><li><p><strong>Run</strong>：</p><p>按照 Company hire 的顺序 Agent 依次行动</p><ul><li><code>Product Manager</code>（Requirement Analysis）</li><li><code>Architect</code>（Architectural Design）</li><li><code>Project Manager</code> （ System Design）</li><li><code>Engineer</code>（Coding ）</li><li><code>QA Engineer</code>（Testing）</li></ul></li></ul><h3 id=agent-定义 class=heading>Agent 定义<a href=#agent-%e5%ae%9a%e4%b9%89 aria-labelledby=agent-定义><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><div class=mermaid>%% width=60%
flowchart TD
Agent["Agent"] --> LLM["LLM"]
Agent["Agent"] --> Setting["Setting<br>(Agent的游戏角色)"]
Agent --> States["States<br>[[index, action]]"]
Agent --> Actions["Actions<br>[action]"]
Agent --> RoleContext["RoleContext:<br>(Agent的上下文本)"]</div><p>​</p><ul><li><p><strong>LLM</strong>： Agent的大语言模型</p></li><li><p><strong>Setting</strong>：Agent 的基本信息</p><ul><li>name</li><li>profile</li><li>goal</li><li>constraints</li><li>desc</li></ul></li><li><p><strong>States</strong>：由序号和单个action 组成 ，方便在实际执行过程中定位到agent的 动作状态</p></li><li><p><strong>Actions</strong>：agent可以执行的actions</p><ul><li>WriteCode</li><li>WriteCodeReview</li><li>WritePRD</li><li>WriteDesign</li><li>WriteTasks</li><li>……</li></ul><p>大多数 agent 基本只包含一个 action：（产品经理，写prd），（架构师，写架构设计），（项目经理， 写任务）</p></li><li><p><strong>RoleContext</strong></p><p>角色上下文，可以看做是agent与外界交互的缓冲环境</p><ul><li><p><strong>Environment</strong></p></li><li><p><strong>Memory</strong></p><ul><li>Index: {agent: message}</li><li>Storage: [message]</li></ul></li><li><p><strong>Long term Memory</strong></p><ul><li>MemoryStorage (FaissStore)</li></ul></li><li><p><strong>State</strong>： int，指定 agent 的 actions list 中的的某个action</p></li><li><p><strong>Todo</strong>：指示 Agent 接下来要做的 action</p></li><li><p><strong>Watch</strong>：Agent 关注的 actions</p></li><li><p><strong>News</strong>： Agent 自身记忆与环境进行交互之后更新的内容</p></li></ul></li></ul><h3 id=agent执行流程 class=heading>Agent执行流程<a href=#agent%e6%89%a7%e8%a1%8c%e6%b5%81%e7%a8%8b aria-labelledby=agent执行流程><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><div class=mermaid>%% width=60%
graph LR
Watch["watch<br>(观察)"] --> Observe["observe"]
Observe --> Think["think<br>(set state)"]
Think --> Act["act"]
Act --> Publish["publish message"]</div><ul><li><p><strong><code>Watch</code></strong>：初始化的时候定义。</p><p>更新 <strong>RoleContext</strong> 的 watch，设定agent关心的action。</p><p>当 agent 在其 <strong>RoleContext</strong> 中观测到该 agent 关心的 action的时候，该agent会对这个 action 做出反应，此 action 的结果是该 agent 的参考</p></li></ul><p>其它的步骤主要跟 <code>RoleContext </code>相关</p><p><strong>RoleContext</strong></p><ul><li><p><strong><code>observe</code></strong></p><ul><li>获取环境记忆与自身记忆对比，更新为 news</li><li>获取环境记忆，更新自身记忆</li></ul></li><li><p><strong><code>think</code></strong>：</p><p>根据 news 更新自身 state， 根据 state 更新 Todo list</p></li><li><p><strong><code>act</code></strong>：</p><p>执行 Todo list里的任务（与 LLM 交互），得到 response（message），更新自身 memory</p></li><li><p><strong><code>publish message</code></strong>：</p><p>用 message 更新环境memory</p></li></ul><hr><p><strong>Example</strong></p><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src=pics/image-20250318202204678.png width=75% alt></center><ol><li>收到人类的需求</li><li>产品经理通过进行需求和可行性分析</li><li>架构师为项目制定具体的技术设计</li><li>项目经理执行顺序流图示以满足每个需求</li><li>工程师负责实际的代码开发</li><li>质量保证（QA）工程师负责执行全面的测试</li></ol><h2 id=chatdev class=heading>ChatDev<a href=#chatdev aria-labelledby=chatdev><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p><code>ChatDev </code>虚拟了一个聊天驱动软件开发公司，模拟了瀑布模型，将开发过程细分为四个不同的时间阶段：每个阶段都涉及一组代理人，例如程序员、代码审查人员和测试工程师，促进协作对话和工作流程。</p><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src=pics/image-20250318204516191.png width=75% alt></center><p>在代码中，<code>ChatDev</code> 定义的phase会更多更复杂, 也能包含进前面的四个阶段中</p><p><code>ChatDEV </code>由 <code>phase-level</code> 和 <code>chat-level</code>构成。</p><ul><li><p><strong><code>phase-level</code></strong> ：将软件开发过程分解为
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span>
</span>个连续阶段： <code>Designing</code>， <code>Coding</code>， <code>Testing</code>， <code>Documenting</code>。</p></li><li><p><strong><code>chat-level</code></strong> ： 每个阶段都进一步分为 <strong>atomic chats</strong> 。这些原子聊天涉及两个agents之间以任务为导向的角色扮演，促进协作沟通。 聊天过程遵循 instruction-following风格，在每个chat中，agents交互聊天以完成特定子任务</p></li></ul><p><strong>全流程</strong></p><ol><li><p><strong>初始化</strong> <strong>ChatChain</strong></p><ul><li><p>定义全流程的整个阶段内容</p></li><li><p>定义各个阶段参与的agent</p></li></ul></li><li><p><strong>Start Chatting</strong></p></li></ol><hr><p><strong>Phase</strong>：全流程中的具体阶段</p><div class=mermaid>%% width=20%
graph LR
Phase["Phase"] --> Assistant["Assistant role"]
Phase --> User["User role"]
Phase --> Prompt["Phase prompt"]
Phase --> Name["Phase name"]</div><ul><li><code>DemandAnalysis</code></li><li><code>LanguageChoose</code></li><li><code>Coding</code></li><li><code>ArtDesign</code></li><li><code>ArtIntegration</code></li><li><code>CodeComplete</code></li><li><code>CodeReviewComment</code></li><li><code>CodeReviewModification</code></li><li><code>CodeReviewHuman</code></li><li><code>TestErrorSummary</code></li><li><code>TestModification</code></li><li><code>EnvironmentDoc</code></li><li><code>Manual</code></li></ul><h3 id=chat中的关键机制 class=heading>Chat中的关键机制<a href=#chat%e4%b8%ad%e7%9a%84%e5%85%b3%e9%94%ae%e6%9c%ba%e5%88%b6 aria-labelledby=chat中的关键机制><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src=pics/image-20250318204707089.png width=75% alt></center><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src width=65% alt></center><ul><li><p><strong>Role specialization</strong> 角色专业化</p><p>确保每个agent履行其指定的职能，并有效地促进面向任务的对话。</p></li><li><p><strong>Memory stream</strong> 记忆流</p><p>维护聊天中以前对话的全面记录，使agent能够做出明智的决策。</p></li><li><p><strong>Self-reflection</strong> 自我反省</p><p>当双方达成共识而不触发预定义的终止条件时，促使assistant反思拟议的决定。</p></li></ul><div class=mermaid>%% width=30%
graph LR
subgraph Interaction
User((User Role)) <--> Assistant((Assistant Role))
end
Interaction -->|seminar conclusion| C[RES]</div><ul><li><p><strong>Phase prompt</strong>：有关phase的描述prompt，配置在 config 中</p></li><li><p><strong>Assistant role / User role</strong> : 由 Chat Agent 扮演</p></li></ul><p>根据初始化的system message，<code>Assistant agent</code> 和 <code>User agent</code>轮流对话，直到出现 <code>terminal signal</code> 或者 轮次达到上限</p><ul><li><code>self reflection</code> ：seminar conclusion （可选）对对话讨论进行总结，得出结论。</li></ul><h3 id=agent-定义-1 class=heading>Agent 定义<a href=#agent-%e5%ae%9a%e4%b9%89-1 aria-labelledby=agent-定义-1><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><ul><li><p><strong>System message</strong>： System 基本信息（角色的基本定义）</p><ul><li>Content : prompt （Chatdev prompt+role prompt）</li><li>Meta dict<ul><li>Assistant_role</li><li>Chatdev prompt</li><li>Task</li><li>User role</li></ul></li><li>Role: system</li><li>Role name: Agent name</li></ul></li><li><p><strong>Agent使用的 LLM 及其配置</strong></p><p>Model config / backend：LLM 及其配置</p></li><li><p><strong>Stored messages</strong>: 历史消息（Agent记忆）</p></li></ul><hr><p><code>ChatDev </code>中定义的 agent （Role name /Role type）：</p><ul><li>Chief Executive Officer</li><li>Chief Product Officer</li><li>Counselor</li><li>Chief Technology Officer</li><li>Chief Human Resource Officer</li><li>Programmer</li><li>Code Reviewer</li><li>Software Test Engineer</li><li>Chief Creative Officer</li></ul><h2 id=autogen class=heading>AutoGen<a href=#autogen aria-labelledby=autogen><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p><code>AutoGen</code>是微软开源的一个框架，允许开发具有多个 Agent 的LLM应用程序，这些Agent可以相互交流以解决任务。</p><p><code>AutoGen</code> 的Agent是可定制的、可对话的，并可以无缝地允许人类参与。它们可以在使用LLM、人类输入和工具的各种模式下运行。</p><p><code>AutoGen</code>简化了复杂LLM工作流程的协调、自动化和优化，可以使用可定制和可对话的Agent来构建涵盖对话自治、Agent数量和Agent对话拓扑的各种对话模式。</p><p>具体来说，AutoGen定义了一个 <strong>Conversable Agent</strong>，并由 <strong>Conversable Agent</strong> 衍生出了
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span>
</span>种类型的 Agent</p><ol><li><p><strong>Assistant Agent</strong> 和 <strong>UserProxy Agent</strong></p><ul><li>Assistant Agent: 通过LLM解决具体问题</li><li>UserProxy Agent: 用户代理，可执行代码和提供反馈</li></ul></li><li><p><strong>Group Chat Manager</strong></p><p>在 group chat模式中担任管理对话的角色，负责在agent间传递消息以及在每一轮指定下一个发言的agent</p></li></ol><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src=pics/image-20250318210811250.png width=55% alt></center><hr><p><strong>Agent 配置</strong></p><ul><li>System message： 默认的agent prompt</li><li>Llm config： LLM 及其配置</li><li>Max consecutive auto reply： 最大对话次数</li><li>Human input mode：人参与的形式（ Assistant默认never，User Proxy 默认always）</li></ul><center><div class=mermaid style=width:50%;margin:auto;display:inline-block>flowchart LR
A[Agent] --> B[Conversable Agent]
B --> C[Assistant Agent]
B --> D[User Proxy Agent]
B --> E[Group Chat Manager]</div></center><p>使用<code>AutoGen</code>构建的六个不同应用程序示例。他们的谈话模式显示了<code>AutoGen</code>的灵活性和实力。</p><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src=pics/image-20250318213913713.png width=75% alt></center><hr><p><strong>Example</strong></p><center><img style="border-radius:.3125em;box-shadow:0 2px 4px rgba(34,36,38,.12),0 2px 10px rgba(34,36,38,8%);margin:1rem" src=pics/image-20250318205127881.png width=75% alt></center><ol><li>自定义AutoGen提供的内置代理</li><li>2 agents chatting 实现“画META 和TESLA 年初至今股票价格”示例</li><li>2 agents的具体聊天过程</li></ol><h1 id=reference class=heading>Reference<a href=#reference aria-labelledby=reference><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h1><ul><li><a href=https://lilianweng.github.io/posts/2023-06-23-agent/ class=markdown-link>LLM Powered Autonomous Agents</a></li><li><a href=https://arxiv.org/abs/2308.00352 class=markdown-link>MetaGPT: Meta Programming for A Multi-Agent Collaborative Framework</a></li><li><a href=https://arxiv.org/abs/2307.07924 class=markdown-link>ChatDev: Communicative Agents for Software Development</a></li><li><a href=https://arxiv.org/abs/2308.08155 class=markdown-link>AutoGen: Enabling Next-Gen LLM Applications via Multi-Agent Conversation</a></li></ul></div><div class="row row-cols-2 mt-5 mb-3"><div class=col><a class=next href=/blogs/distributedtraining/><svg class="svg-inline--fa fas fa-arrow-left" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 448 512"><use href="#fas-arrow-left"/></svg>&nbsp;分布式训练</a></div><div class="col text-end"><a class=previous href=/blogs/pythontools/>PythonTools&nbsp;<svg class="svg-inline--fa fas fa-arrow-right" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 448 512"><use href="#fas-arrow-right"/></svg></a></div></div><a href=# id=back-to-top class=back-to-top><span>▲</span>
</a><a href=# id=scroll-to-bottom class=back-to-top><span>▼</span>
</a><script>document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("back-to-top"),t=document.getElementById("scroll-to-bottom");e.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),t.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})})</script></div><div class="col col-md-3 col-lg-2 d-none d-md-block pt-5"><div class="toc toc-sidebar mb-5 my-md-0 mb-lg-5 p-3 text-body-secondary sticky-top"><strong class="d-block h6 my-2 pt-4">On this page:</strong><nav class=toc><a class="toc-item toc-level-1" href=/blogs/agents/#metagpt>MetaGPT </a><a class="toc-item toc-level-2" href=/blogs/agents/#全流程>全流程 </a><a class="toc-item toc-level-2" href=/blogs/agents/#agent-定义>Agent 定义 </a><a class="toc-item toc-level-2" href=/blogs/agents/#agent执行流程>Agent执行流程 </a><a class="toc-item toc-level-1" href=/blogs/agents/#chatdev>ChatDev </a><a class="toc-item toc-level-2" href=/blogs/agents/#chat中的关键机制>Chat中的关键机制 </a><a class="toc-item toc-level-2" href=/blogs/agents/#agent-定义-1>Agent 定义 </a><a class="toc-item toc-level-1" href=/blogs/agents/#autogen>AutoGen</a></nav></div></div></div></div><footer class="container-fluid footer text-center p-3"><div class="container-xxl text-center"><small>Copyright © 2025 EV's Blog All rights reserved.
|
Powered by
<a href=https://gethinode.com class="link-bg-footer markdown-link">Hinode</a>.</small></div><script src=https://eveydyw.github.io/js/image-zoom.min.3a7d43efcffd0a24c7162362607ea6a56ee3e3c19c0e260e0fbb41c0206fea83.js integrity="sha256-On1D78/9CiTHFiNiYH6mpW7j48GcDiYOD7tBwCBv6oM=" defer></script></footer></div><div id=toast-container class="toast-container position-fixed bottom-0 end-0 p-3"><div id=toast-copied-code-message class=toast role=alert aria-live=assertive aria-atomic=true><div class=toast-header><strong class=me-auto>EV's Blog</strong>
<button type=button class=btn-close data-bs-dismiss=toast aria-label=Close></button></div><div class=toast-body>Code copied to clipboard</div></div></div><svg xmlns:xlink="http://www.w3.org/1999/xlink" display="none"><symbol id="fas-ellipsis"><path d="M8 256a56 56 0 11112 0A56 56 0 118 256zm160 0a56 56 0 11112 0 56 56 0 11-112 0zm216-56a56 56 0 110 112 56 56 0 110-112z"/></symbol><symbol id="fas-sun"><path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 11192 0 96 96 0 11-192 0zm224 0a128 128 0 10-256 0 128 128 0 10256 0z"/></symbol><symbol id="fas-moon"><path d="M223.5 32C1e2 32 0 132.3.0 256S1e2 480 223.5 480c60.6.0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9.0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></symbol><symbol id="fas-angle-left"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8.0 45.3l160 160c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0l-160 160z"/></symbol><symbol id="fas-sort"><path d="M137.4 41.4c12.5-12.5 32.8-12.5 45.3.0l128 128c9.2 9.2 11.9 22.9 6.9 34.9S301 224.1 288 224.1L32 224c-12.9.0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128zm0 429.3-128-128c-9.2-9.2-11.9-22.9-6.9-34.9S19.1 288 32.1 288h256c12.9.0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128c-12.5 12.5-32.8 12.5-45.3.0z"/></symbol><symbol id="fas-arrow-left"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8.0 45.3l160 160c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L109.2 288H416c17.7.0 32-14.3 32-32s-14.3-32-32-32H109.3L214.6 118.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0l-160 160z"/></symbol><symbol id="fas-arrow-right"><path d="M438.6 278.6c12.5-12.5 12.5-32.8.0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3.0s-12.5 32.8.0 45.3L338.8 224H32c-17.7.0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8.0 45.3s32.8 12.5 45.3.0l160-160z"/></symbol></svg>
<script src=/js/core.bundle-analytics.en.min.ceb6a67c169a28031391976dac91e1e2f460951862201b6249516a55d0fd6109.js data-category=analytics integrity="sha256-zramfBaaKAMTkZdtrJHh4vRglRhiIBtiSVFqVdD9YQk=" crossorigin=anonymous async></script><script src=/js/core.bundle.en.min.b2ac337ff8787d96cf35ffe28a30a119778a2736cb94d2f16606f72cda819f11.js integrity="sha256-sqwzf/h4fZbPNf/iijChGXeKJzbLlNLxZgb3LNqBnxE=" crossorigin=anonymous async></script><script src=/js/mermaid.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){if(typeof mermaid!="undefined"){const e=document.querySelectorAll(".mermaid"),t=new Map;e.forEach(e=>{const n=e.textContent||e.innerText;t.set(e,n.trim())}),mermaid.initialize({startOnLoad:!0,theme:"forest",themeCSS:""}),setTimeout(()=>{e.forEach(e=>{const n=e.querySelector("svg");if(n){const o=n.viewBox.baseVal.width||n.clientWidth||n.getBoundingClientRect().width,i=n.viewBox.baseVal.height||n.clientHeight||n.getBoundingClientRect().height,r=t.get(e),a=r.match(/%% *width *= *(\d+%)/i);let s=a?a[1]:null;o&&i&&(s?n.style.width=s:o<i?(e.classList.remove("horizontal"),e.classList.add("vertical"),n.style.width="40%"):(e.classList.remove("vertical"),e.classList.add("horizontal"),n.style.width="80%"));const c=new ResizeObserver(()=>{const t=n.viewBox.baseVal.width||n.clientWidth||n.getBoundingClientRect().width,o=n.viewBox.baseVal.height||n.clientHeight||n.getBoundingClientRect().height;s||(t<o?(e.classList.remove("horizontal"),e.classList.add("vertical"),n.style.width="40%"):(e.classList.remove("vertical"),e.classList.add("horizontal"),n.style.width="80%"))});c.observe(n)}})},500)}})</script></body></html>