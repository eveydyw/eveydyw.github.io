<!doctype html><html lang=en class=no-js><head><script src=/js/critical.bundle.min.85a7f5f23dc031d38877ecdb71b00d49e8a62c54f1ba98e75a734706ea09f30a.js integrity="sha256-haf18j3AMdOId+zbcbANSeimLFTxupjnWnNHBuoJ8wo=" crossorigin=anonymous></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.143.1"><meta name=theme content="Hinode 0.29.3"><link rel=stylesheet href="/css/main.min.15bf9d86d62253a5a7c7f007a487e2cd9587a7b0bf8f7b8c2474ada2571224fc.css" integrity="sha256-Fb+dhtYiU6Wnx/AHpIfizZWHp7C/j3uMJHStolcSJPw=" crossorigin=anonymous><link rel=preload href=/fonts/inter-v12-latin-regular.woff2 as=font type=font/woff2 crossorigin><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>EV's Blog - Python基础</title>
<meta name=description content="Python基础"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Python基础"><meta property="og:description" content="Python基础"><meta property="og:url" content="https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/"><meta property="og:site_name" content="EV's Blog"><meta property="article:published_time" content="2022-03-10T21:57:39+08:00"><meta property="article:modified_time" content="2022-03-10T21:57:39+08:00"><meta property="og:image" content="https://eveydyw.github.io/img/logo1280x640.png"><meta property="og:image:alt" content="Python基础"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Python基础"><meta name=twitter:description content="Python基础"><meta name=twitter:image content="https://eveydyw.github.io/img/logo1280x640.png"><meta name=twitter:image:alt content="Python基础"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://eveydyw.github.io/#/schema/organization/1","name":"Hinode","url":"https://eveydyw.github.io/","sameAs":[null,"https://github.com/gethinode/hinode"],"logo":{"@type":"ImageObject","@id":"https://eveydyw.github.io/#/schema/image/1","url":"https://eveydyw.github.io/img/logo512x512.png","width":512,"height":512,"caption":"Hinode"},"image":{"@id":"https://eveydyw.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://eveydyw.github.io/#/schema/website/1","url":"https://eveydyw.github.io/","name":"EV\u0027s Blog","description":"Hinode is a clean documentation and blog theme for your Hugo site based on Bootstrap 5.","publisher":{"@id":"https://eveydyw.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/","url":"https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/","name":"Python基础","description":"Python基础","isPartOf":{"@id":"https://eveydyw.github.io/#/schema/website/1"},"about":{"@id":"https://eveydyw.github.io/#/schema/organization/1"},"datePublished":"2022-03-10T21:57:39CET","dateModified":"2022-03-10T21:57:39CET","breadcrumb":{"@id":"https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/"]}]},{"@type":"BreadcrumbList","@id":"https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://eveydyw.github.io/","url":"https://eveydyw.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://eveydyw.github.io/blogs/","url":"https://eveydyw.github.io/blogs/","name":"Blogs"}},{"@type":"ListItem","position":3,"item":{"@id":"https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://eveydyw.github.io/blogs/python%E5%9F%BA%E7%A1%80/#/schema/image/2","url":"https://eveydyw.github.io/img/logo1280x640.png","contentUrl":"https://eveydyw.github.io/img/logo1280x640.png","caption":"Python基础"}]}]}</script><link rel=icon type=image/png sizes=16x16 href=/img/my_logo_hu_10729e67805acfd8.png><link rel=icon type=image/png sizes=32x32 href=/img/my_logo_hu_f267cd4735c3fb50.png><link rel=icon type=image/png sizes=48x48 href=/img/my_logo_hu_bc348718a5ba4099.png><link rel=apple-touch-icon sizes=180x180 href=/img/my_logo_hu_a8f52fe79483cdab.png><script>MathJax={loader:{load:["[tex]/html","[tex]/ams","[tex]/amscd"]},tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]],processEscapes:!0,packages:["base","ams","amscd"],tags:"ams"},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"],renderActions:{addMenu:[0,"",""],checkLoading:[0,"",""]}},chtml:{scale:1,displayAlign:"center",displayIndent:"0em",lineWidth:"container"},svg:{fontCache:"global"}}</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js></script></head><body><div class="d-flex flex-column min-vh-100"><div class="d-flex flex-column"><div class="container-fluid fixed-top p-0"><nav class="navbar p-4 bg-body navbar-fixed-top navbar-expand-md"><div class="container-xxl p-0"><div class="d-flex navbar-container justify-content-center"><div class="d-flex align-items-center"><button class="navbar-toggler collapsed p-0 mx-auto invisible fw-30" type=button><svg class="svg-inline--fa fas fa-ellipsis fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 448 512"><use href="#fas-ellipsis"/></svg></button></div><div class=mx-auto><a class=navbar-brand href=/ aria-label=Home><img src=/img/my_logo.svg alt="EV's Blog logo" height=30 width=30></a></div><div class="d-flex align-items-center"><button class="navbar-toggler main-nav-toggler collapsed p-0" type=button data-bs-toggle=collapse data-bs-target=#navbar-0-collapse aria-controls=navbar-0 aria-expanded=false aria-label="Toggle main navigation">
<span class="toggler-icon top-bar emphasis"></span>
<span class="toggler-icon middle-bar emphasis"></span>
<span class="toggler-icon bottom-bar emphasis"></span></button></div></div><div class="navbar-collapse collapse" id=navbar-0-collapse><div class="d-flex flex-fill ms-md-3 mt-4 mt-md-0"><form class="search flex-fill position-relative me-auto"><input class="search-input form-control is-search" type=search placeholder="Search this site" aria-label="Search this site" autocomplete=off name=search-input><div class="search-suggestions shadow bg-body rounded d-none" data-no-results="No results for"></div></form></div><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link data-nav=main data-nav-main=home href=/><span>Home</span>&nbsp;</a></li><li class=nav-item><a class=nav-link data-nav=main data-nav-main=blogs href=/blogs/><span>Blogs</span>&nbsp;</a></li><li class=nav-item><a class=nav-link data-nav=main data-nav-main=tags href=/tags><span>Tags</span>&nbsp;</a></li><li class="d-flex mode-switch align-items-center" id=navbar-mode><input type=checkbox class="checkbox navbar-mode-selector" id=navbar-mode-checkbox aria-label="Toggle theme">
<label class=label for=navbar-mode-checkbox><svg class="svg-inline--fa fas fa-sun fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 512 512"><use href="#fas-sun"/></svg><svg class="svg-inline--fa fas fa-moon fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 384 512"><use href="#fas-moon"/></svg><div class=ball></div></label></li></ul></div></div></nav></div><div class=main-content></div></div><div class="container-xxl flex-fill p-4 px-xxl-0"><div class="row row-cols-1 row-cols-md-2 row-cols-lg-3"><div class="col col-lg-2 d-none d-lg-block sidebar-overflow sticky-top pt-5"></div><div class="col-12 col-md-9 col-lg-8 mb-5 p-4"><nav aria-label=breadcrumb class=d-sm-none><ol class=breadcrumb><li class=breadcrumb-item><a href=/blogs/><svg class="svg-inline--fa fas fa-angle-left" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 320 512"><use href="#fas-angle-left"/></svg>&nbsp;&nbsp;Blogs</a></li></ol></nav><nav aria-label=breadcrumb class="d-none d-sm-block"><ol class=breadcrumb><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/blogs/>Blogs</a></li><li class="breadcrumb-item active" aria-current=page>Python基础</li></ol></nav><p class="display-4 mt-5">Python基础</p><small class="text-body-secondary text-uppercase">Posted on March 10, 2022
&bull;
20&nbsp;min read &bull;
4,049&nbsp;words</small><p class="lead mb-5 mt-3">Python基础</p><div class="d-md-none pb-5"><div class="d-grid gap-2 mx-auto"><a aria-label="On this page" href=#toc-collapse class="btn btn-outline-secondary position-relative toc-button" data-bs-toggle=collapse aria-expanded=false aria-controls=toc-collapse role=button><span class="d-flex justify-content-between"><span class=my-auto>On this page</span><span class="align-self-center ps-1"><svg class="svg-inline--fa fas fa-sort" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 320 512"><use href="#fas-sort"/></svg></span></span></a></div><div class="collapse border bg-body-tertiary rounded p-1 navbar-nav-scroll" id=toc-collapse><small><div class="toc toc-panel text-body p-2"><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#赋值浅-copy深-copy>赋值、浅 copy、深 copy </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#赋值>赋值 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#浅拷贝>浅拷贝 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#深拷贝>深拷贝 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#推导式生成对象>推导式生成对象 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#变量及作用域>变量及作用域 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#全局变量>全局变量 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#闭包-nonclosure>闭包 nonclosure </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#装饰器>装饰器 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#迭代对象迭代器生成器>迭代对象，迭代器，生成器 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#异常捕获>异常捕获 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#类>类 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#类属性>类属性 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#类-class-的访问控制>类 class 的访问控制 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#类-class-的继承>类 class 的继承 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#元类>元类 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#并发与并行>并发与并行 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#线程-进程>线程 进程 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#协程>协程 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#死锁>死锁</a></div></small></div></div><div class=content><h2 id=赋值浅-copy深-copy class=heading>赋值、浅 copy、深 copy<a href=#%e8%b5%8b%e5%80%bc%e6%b5%85-copy%e6%b7%b1-copy aria-labelledby=赋值浅-copy深-copy><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><ul><li><p><strong>赋值</strong>：相当于多贴了一个标签（引用），指向同一个对象，引用计数 +1。</p></li><li><p><strong>浅拷贝</strong>：会开辟新的内存地址存储 <strong>被拷贝对象的外层对象</strong>，但是 <strong>不拷贝内层的对象</strong>，不能算一个完整的拷贝副本。</p></li><li><p><strong>深拷贝</strong>：会开辟新的内存地址存储被拷贝对象的外层对象，同时 <strong>对于内层对象也会递归拷贝</strong>，即是一个完整的拷贝副本。</p></li></ul><h3 id=赋值 class=heading>赋值<a href=#%e8%b5%8b%e5%80%bc aria-labelledby=赋值><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>不可变对象被重新赋值，重新分配了一块内存，ID 就变了</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2>2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3>3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4>4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5>5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6>6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>a</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>a</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>b</span><span class=p>))</span>  <span class=c1># 140729223153328 140729223153328</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>  <span class=c1># 2 1</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>a</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>b</span><span class=p>))</span>  <span class=c1># 140729223153360 140729223153328</span></span></span></code></pre></td></tr></table></div></div></div><p>列表直接赋值给列表不属于拷贝, 只是内存地址的引用</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>list1</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>list2</span> <span class=o>=</span> <span class=n>list1</span>
</span></span><span class=line><span class=cl><span class=n>list1</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;d&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>list1</span><span class=p>,</span> <span class=n>list2</span><span class=p>)</span>  <span class=c1># [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>list1</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list2</span><span class=p>))</span>  <span class=c1># 2212470388480 2212470388480</span></span></span></code></pre></td></tr></table></div></div></div><h3 id=浅拷贝 class=heading>浅拷贝<a href=#%e6%b5%85%e6%8b%b7%e8%b4%9d aria-labelledby=浅拷贝><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>浅拷贝, 只会拷贝第一层, 第二层的内容不会拷贝</p><p><strong><code>list()</code> 转换也是浅 copy</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span><span class=lnt id=hl-2-5><a class=lnlinks href=#hl-2-5>5</a>
</span><span class=lnt id=hl-2-6><a class=lnlinks href=#hl-2-6>6</a>
</span><span class=lnt id=hl-2-7><a class=lnlinks href=#hl-2-7>7</a>
</span><span class=lnt id=hl-2-8><a class=lnlinks href=#hl-2-8>8</a>
</span><span class=lnt id=hl-2-9><a class=lnlinks href=#hl-2-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>list1</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>list2</span> <span class=o>=</span> <span class=n>list1</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># 转换也是浅copy</span>
</span></span><span class=line><span class=cl><span class=n>list3</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>list1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>list1</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;d&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>list1</span><span class=p>,</span> <span class=n>list2</span><span class=p>,</span> <span class=n>list3</span><span class=p>)</span>  <span class=c1># [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>list1</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list2</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list3</span><span class=p>))</span> <span class=c1># 2128034527104 2128034526144 2128033091072</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>list1</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]]</span>
</span></span><span class=line><span class=cl><span class=n>list2</span> <span class=o>=</span> <span class=n>list1</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># 转换也是浅copy</span>
</span></span><span class=line><span class=cl><span class=n>list3</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>list1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>list1</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>list1</span><span class=p>,</span> <span class=n>list2</span><span class=p>,</span> <span class=n>list3</span><span class=p>)</span>  <span class=c1># [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, [1, 2, 3, 4]] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, [1, 2, 3, 4]] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, [1, 2, 3, 4]]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>list1</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list2</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list3</span><span class=p>))</span>  <span class=c1># 2111124370112 2111124370816 2111124369664</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>list1</span><span class=p>[</span><span class=mi>3</span><span class=p>]),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list2</span><span class=p>[</span><span class=mi>3</span><span class=p>]),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list3</span><span class=p>[</span><span class=mi>3</span><span class=p>]))</span>  <span class=c1># 2111124400320 2111124400320 2111124400320</span></span></span></code></pre></td></tr></table></div></div></div><h3 id=深拷贝 class=heading>深拷贝<a href=#%e6%b7%b1%e6%8b%b7%e8%b4%9d aria-labelledby=深拷贝><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span><span class=lnt id=hl-4-5><a class=lnlinks href=#hl-4-5>5</a>
</span><span class=lnt id=hl-4-6><a class=lnlinks href=#hl-4-6>6</a>
</span><span class=lnt id=hl-4-7><a class=lnlinks href=#hl-4-7>7</a>
</span><span class=lnt id=hl-4-8><a class=lnlinks href=#hl-4-8>8</a>
</span><span class=lnt id=hl-4-9><a class=lnlinks href=#hl-4-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>copy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>list1</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]]</span>
</span></span><span class=line><span class=cl><span class=n>list2</span> <span class=o>=</span> <span class=n>copy</span><span class=o>.</span><span class=n>deepcopy</span><span class=p>(</span><span class=n>list1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>list1</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>list1</span><span class=p>,</span> <span class=n>list2</span><span class=p>)</span>  <span class=c1># [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, [1, 2, 3, 4]] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, [1, 2, 3]]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>list1</span><span class=p>),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list2</span><span class=p>))</span>  <span class=c1># 1394256181440 1394256181696</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>list1</span><span class=p>[</span><span class=mi>3</span><span class=p>]),</span> <span class=nb>id</span><span class=p>(</span><span class=n>list2</span><span class=p>[</span><span class=mi>3</span><span class=p>]))</span>  <span class=c1># 1394256180608 1394256115584</span></span></span></code></pre></td></tr></table></div></div></div><h2 id=推导式生成对象 class=heading>推导式生成对象<a href=#%e6%8e%a8%e5%af%bc%e5%bc%8f%e7%94%9f%e6%88%90%e5%af%b9%e8%b1%a1 aria-labelledby=推导式生成对象><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p><code>[item] * 3</code> 的结果相当于 <code>[item, item, item]</code>，因为 <code>item</code> 指向的是一个可变对象(list)，所以我们用 <code>*</code> 做重复的时候，实际上得到的 <code>items</code> 的三个元素都是指向的同一个对象 <code>["hello"]</code></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span><span class=lnt id=hl-5-4><a class=lnlinks href=#hl-5-4>4</a>
</span><span class=lnt id=hl-5-5><a class=lnlinks href=#hl-5-5>5</a>
</span><span class=lnt id=hl-5-6><a class=lnlinks href=#hl-5-6>6</a>
</span><span class=lnt id=hl-5-7><a class=lnlinks href=#hl-5-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>item</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;hello&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>items</span> <span class=o>=</span> <span class=p>[</span><span class=n>item</span><span class=p>]</span> <span class=o>*</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>  <span class=c1># [[&#39;hello&#39;], [&#39;hello&#39;], [&#39;hello&#39;]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>items</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;world&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>  <span class=c1># [[&#39;world&#39;], [&#39;world&#39;], [&#39;world&#39;]]</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span><span class=lnt id=hl-6-3><a class=lnlinks href=#hl-6-3>3</a>
</span><span class=lnt id=hl-6-4><a class=lnlinks href=#hl-6-4>4</a>
</span><span class=lnt id=hl-6-5><a class=lnlinks href=#hl-6-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>items</span> <span class=o>=</span> <span class=p>[[</span><span class=s1>&#39;hello&#39;</span><span class=p>]</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>items</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span> <span class=nb>id</span><span class=p>(</span><span class=n>items</span><span class=p>[</span><span class=mi>1</span><span class=p>]),</span> <span class=nb>id</span><span class=p>(</span><span class=n>items</span><span class=p>[</span><span class=mi>2</span><span class=p>]))</span>  <span class=c1># 1618997298624 1618997299584 1618997299456</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>items</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&#34;world&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>items</span><span class=p>)</span>  <span class=c1># [[&#39;world&#39;], [&#39;hello&#39;], [&#39;hello&#39;]]</span></span></span></code></pre></td></tr></table></div></div></div><hr><p><strong>lambda 测试</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span><span class=lnt id=hl-7-3><a class=lnlinks href=#hl-7-3>3</a>
</span><span class=lnt id=hl-7-4><a class=lnlinks href=#hl-7-4>4</a>
</span><span class=lnt id=hl-7-5><a class=lnlinks href=#hl-7-5>5</a>
</span><span class=lnt id=hl-7-6><a class=lnlinks href=#hl-7-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>multipliers</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>i</span> <span class=o>*</span> <span class=n>x</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>([</span><span class=n>m</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>multipliers</span><span class=p>()])</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># [6, 6, 6, 6]</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span><span class=lnt id=hl-8-3><a class=lnlinks href=#hl-8-3>3</a>
</span><span class=lnt id=hl-8-4><a class=lnlinks href=#hl-8-4>4</a>
</span><span class=lnt id=hl-8-5><a class=lnlinks href=#hl-8-5>5</a>
</span><span class=lnt id=hl-8-6><a class=lnlinks href=#hl-8-6>6</a>
</span><span class=lnt id=hl-8-7><a class=lnlinks href=#hl-8-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>multipliers</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># 添加了一个默认参数i=i</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=k>lambda</span> <span class=n>x</span><span class=p>,</span> <span class=n>i</span><span class=o>=</span><span class=n>i</span><span class=p>:</span> <span class=n>i</span> <span class=o>*</span> <span class=n>x</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>([</span><span class=n>m</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>multipliers</span><span class=p>()])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># [0, 2, 4, 6]</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1>1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2>2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3>3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4>4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5>5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>multipliers</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>i</span> <span class=o>*</span> <span class=n>x</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>([</span><span class=n>m</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=k>for</span> <span class=n>m</span> <span class=ow>in</span> <span class=n>multipliers</span><span class=p>()])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># [0, 2, 4, 6]</span></span></span></code></pre></td></tr></table></div></div></div><h2 id=变量及作用域 class=heading>变量及作用域<a href=#%e5%8f%98%e9%87%8f%e5%8f%8a%e4%bd%9c%e7%94%a8%e5%9f%9f aria-labelledby=变量及作用域><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><h3 id=全局变量 class=heading>全局变量<a href=#%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f aria-labelledby=全局变量><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-10-1><a class=lnlinks href=#hl-10-1> 1</a>
</span><span class=lnt id=hl-10-2><a class=lnlinks href=#hl-10-2> 2</a>
</span><span class=lnt id=hl-10-3><a class=lnlinks href=#hl-10-3> 3</a>
</span><span class=lnt id=hl-10-4><a class=lnlinks href=#hl-10-4> 4</a>
</span><span class=lnt id=hl-10-5><a class=lnlinks href=#hl-10-5> 5</a>
</span><span class=lnt id=hl-10-6><a class=lnlinks href=#hl-10-6> 6</a>
</span><span class=lnt id=hl-10-7><a class=lnlinks href=#hl-10-7> 7</a>
</span><span class=lnt id=hl-10-8><a class=lnlinks href=#hl-10-8> 8</a>
</span><span class=lnt id=hl-10-9><a class=lnlinks href=#hl-10-9> 9</a>
</span><span class=lnt id=hl-10-10><a class=lnlinks href=#hl-10-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>g1</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>g2</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>g1</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=n>g2</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>g1</span><span class=p>)</span>  <span class=c1># 1</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>g2</span><span class=p>)</span>  <span class=c1># [1]</span></span></span></code></pre></td></tr></table></div></div></div><ul><li>g1: 因为是数值，f 中直接就重新定义了；</li><li>g2: 因为是列表，f 中是修改，而不是重新定义，所以是对全局变量的修改；如果这里重新定义，再修改，就是对局部变量的修改了，不会影响全局变量；</li></ul><p><strong>在 python 的函数内，可以直接引用外部变量，但不能改写外部变量</strong>。</p><p>可以使用 <code>nonlocal</code> 和 <code>global</code> 来实现，<code>nonlocal</code> 与 <code>global</code> 的区别在于 <code>nonlocal</code> 语句会去搜寻本地变量与全局变量之间的变量，其会优先寻找层级关系与闭包作用域最近的外部变量。</p><p><strong>Example</strong></p><ul><li><p>a = 1 不在 globals 作用域，因此在 <code>func2</code> 中只能用 nonlocal 定义后才能修改。</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-11-1><a class=lnlinks href=#hl-11-1> 1</a>
</span><span class=lnt id=hl-11-2><a class=lnlinks href=#hl-11-2> 2</a>
</span><span class=lnt id=hl-11-3><a class=lnlinks href=#hl-11-3> 3</a>
</span><span class=lnt id=hl-11-4><a class=lnlinks href=#hl-11-4> 4</a>
</span><span class=lnt id=hl-11-5><a class=lnlinks href=#hl-11-5> 5</a>
</span><span class=lnt id=hl-11-6><a class=lnlinks href=#hl-11-6> 6</a>
</span><span class=lnt id=hl-11-7><a class=lnlinks href=#hl-11-7> 7</a>
</span><span class=lnt id=hl-11-8><a class=lnlinks href=#hl-11-8> 8</a>
</span><span class=lnt id=hl-11-9><a class=lnlinks href=#hl-11-9> 9</a>
</span><span class=lnt id=hl-11-10><a class=lnlinks href=#hl-11-10>10</a>
</span><span class=lnt id=hl-11-11><a class=lnlinks href=#hl-11-11>11</a>
</span><span class=lnt id=hl-11-12><a class=lnlinks href=#hl-11-12>12</a>
</span><span class=lnt id=hl-11-13><a class=lnlinks href=#hl-11-13>13</a>
</span><span class=lnt id=hl-11-14><a class=lnlinks href=#hl-11-14>14</a>
</span><span class=lnt id=hl-11-15><a class=lnlinks href=#hl-11-15>15</a>
</span><span class=lnt id=hl-11-16><a class=lnlinks href=#hl-11-16>16</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>func2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;closure a: &#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;func1_a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>func2</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;after func2, func1_a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>func1</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;global a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-12-1><a class=lnlinks href=#hl-12-1>1</a>
</span><span class=lnt id=hl-12-2><a class=lnlinks href=#hl-12-2>2</a>
</span><span class=lnt id=hl-12-3><a class=lnlinks href=#hl-12-3>3</a>
</span><span class=lnt id=hl-12-4><a class=lnlinks href=#hl-12-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># func1_a:1</span>
</span></span><span class=line><span class=cl><span class=c1># closure a: 2</span>
</span></span><span class=line><span class=cl><span class=c1># after func2, func1_a:1</span>
</span></span><span class=line><span class=cl><span class=c1># global a:0</span></span></span></code></pre></td></tr></table></div></div></div></li><li><p>a = 1 不在 globals 作用域，因此在 <code>func2</code> 中只能用 <code>nonlocal</code> 定义后才能修改。</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-13-1><a class=lnlinks href=#hl-13-1> 1</a>
</span><span class=lnt id=hl-13-2><a class=lnlinks href=#hl-13-2> 2</a>
</span><span class=lnt id=hl-13-3><a class=lnlinks href=#hl-13-3> 3</a>
</span><span class=lnt id=hl-13-4><a class=lnlinks href=#hl-13-4> 4</a>
</span><span class=lnt id=hl-13-5><a class=lnlinks href=#hl-13-5> 5</a>
</span><span class=lnt id=hl-13-6><a class=lnlinks href=#hl-13-6> 6</a>
</span><span class=lnt id=hl-13-7><a class=lnlinks href=#hl-13-7> 7</a>
</span><span class=lnt id=hl-13-8><a class=lnlinks href=#hl-13-8> 8</a>
</span><span class=lnt id=hl-13-9><a class=lnlinks href=#hl-13-9> 9</a>
</span><span class=lnt id=hl-13-10><a class=lnlinks href=#hl-13-10>10</a>
</span><span class=lnt id=hl-13-11><a class=lnlinks href=#hl-13-11>11</a>
</span><span class=lnt id=hl-13-12><a class=lnlinks href=#hl-13-12>12</a>
</span><span class=lnt id=hl-13-13><a class=lnlinks href=#hl-13-13>13</a>
</span><span class=lnt id=hl-13-14><a class=lnlinks href=#hl-13-14>14</a>
</span><span class=lnt id=hl-13-15><a class=lnlinks href=#hl-13-15>15</a>
</span><span class=lnt id=hl-13-16><a class=lnlinks href=#hl-13-16>16</a>
</span><span class=lnt id=hl-13-17><a class=lnlinks href=#hl-13-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>func2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>nonlocal</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;closure a: &#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;func1_a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>func2</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;after func2, func1_a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>func1</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;global a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-14-1><a class=lnlinks href=#hl-14-1>1</a>
</span><span class=lnt id=hl-14-2><a class=lnlinks href=#hl-14-2>2</a>
</span><span class=lnt id=hl-14-3><a class=lnlinks href=#hl-14-3>3</a>
</span><span class=lnt id=hl-14-4><a class=lnlinks href=#hl-14-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># func1_a: 1</span>
</span></span><span class=line><span class=cl><span class=c1># closure a:  2</span>
</span></span><span class=line><span class=cl><span class=c1># after func2, func1_a: 2</span>
</span></span><span class=line><span class=cl><span class=c1># global a: 0</span></span></span></code></pre></td></tr></table></div></div></div></li><li><p>a = 1 不在 globals 作用域，因此在 func2 中只能用 nonlocal 定义后才能修改。</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-15-1><a class=lnlinks href=#hl-15-1> 1</a>
</span><span class=lnt id=hl-15-2><a class=lnlinks href=#hl-15-2> 2</a>
</span><span class=lnt id=hl-15-3><a class=lnlinks href=#hl-15-3> 3</a>
</span><span class=lnt id=hl-15-4><a class=lnlinks href=#hl-15-4> 4</a>
</span><span class=lnt id=hl-15-5><a class=lnlinks href=#hl-15-5> 5</a>
</span><span class=lnt id=hl-15-6><a class=lnlinks href=#hl-15-6> 6</a>
</span><span class=lnt id=hl-15-7><a class=lnlinks href=#hl-15-7> 7</a>
</span><span class=lnt id=hl-15-8><a class=lnlinks href=#hl-15-8> 8</a>
</span><span class=lnt id=hl-15-9><a class=lnlinks href=#hl-15-9> 9</a>
</span><span class=lnt id=hl-15-10><a class=lnlinks href=#hl-15-10>10</a>
</span><span class=lnt id=hl-15-11><a class=lnlinks href=#hl-15-11>11</a>
</span><span class=lnt id=hl-15-12><a class=lnlinks href=#hl-15-12>12</a>
</span><span class=lnt id=hl-15-13><a class=lnlinks href=#hl-15-13>13</a>
</span><span class=lnt id=hl-15-14><a class=lnlinks href=#hl-15-14>14</a>
</span><span class=lnt id=hl-15-15><a class=lnlinks href=#hl-15-15>15</a>
</span><span class=lnt id=hl-15-16><a class=lnlinks href=#hl-15-16>16</a>
</span><span class=lnt id=hl-15-17><a class=lnlinks href=#hl-15-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func1</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>func2</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>global</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;closure a: &#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;func1_a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>func2</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;after func2, func1_a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>func1</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;global a: </span><span class=si>{</span><span class=n>a</span><span class=si>}</span><span class=s1>&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-16-1><a class=lnlinks href=#hl-16-1>1</a>
</span><span class=lnt id=hl-16-2><a class=lnlinks href=#hl-16-2>2</a>
</span><span class=lnt id=hl-16-3><a class=lnlinks href=#hl-16-3>3</a>
</span><span class=lnt id=hl-16-4><a class=lnlinks href=#hl-16-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># func1_a: 1</span>
</span></span><span class=line><span class=cl><span class=c1># closure a:  2</span>
</span></span><span class=line><span class=cl><span class=c1># after func2, func1_a: 1</span>
</span></span><span class=line><span class=cl><span class=c1># global a: 2</span></span></span></code></pre></td></tr></table></div></div></div></li></ul><h3 id=闭包-nonclosure class=heading>闭包 nonclosure<a href=#%e9%97%ad%e5%8c%85-nonclosure aria-labelledby=闭包-nonclosure><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>一个闭包就是你调用了一个函数 A，这个函数 A 返回了一个函数 B 给你。<strong>这个返回的函数 B 就叫做闭包</strong>。你在调用函数 A 的时候传递的参数就是 <strong>自由变量</strong>。</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-17-1><a class=lnlinks href=#hl-17-1>1</a>
</span><span class=lnt id=hl-17-2><a class=lnlinks href=#hl-17-2>2</a>
</span><span class=lnt id=hl-17-3><a class=lnlinks href=#hl-17-3>3</a>
</span><span class=lnt id=hl-17-4><a class=lnlinks href=#hl-17-4>4</a>
</span><span class=lnt id=hl-17-5><a class=lnlinks href=#hl-17-5>5</a>
</span><span class=lnt id=hl-17-6><a class=lnlinks href=#hl-17-6>6</a>
</span><span class=lnt id=hl-17-7><a class=lnlinks href=#hl-17-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>inner_func</span><span class=p>(</span><span class=n>age</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;name:&#39;</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=s1>&#39;age:&#39;</span><span class=p>,</span> <span class=n>age</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>inner_func</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>bb</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=s1>&#39;aa&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>bb</span><span class=p>(</span><span class=mi>26</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-18-1><a class=lnlinks href=#hl-18-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># name: aa age: 26</span></span></span></code></pre></td></tr></table></div></div></div><p>这里面调用 <code>func</code> 的时候就产生了一个 <strong>闭包——<code>inner_func</code></strong>, 并且该闭包持有 <strong>自由变量——<code>name</code></strong>，因此这也意味着，当函数 <code>func</code> 的生命周期结束之后，<code>name</code> 这个变量依然存在，因为它被闭包引用了，所以不会被回收。</p><p><strong>闭包的作用</strong></p><p>闭包的最大特点是 <strong>可以将父函数的变量与内部函数绑定</strong>，<strong>并返回绑定变量后的函数（也即闭包）</strong>，此时即便生成闭包的环境（父函数）已经释放，闭包仍然存在，这个过程很像类（父函数）生成实例（闭包），不同的是父函数只在调用时执行，执行完毕后其环境就会释放，而类则在文件执行时创建，一般程序执行完毕后作用域才释放。</p><p>因此对一些需要重用的功能且不足以定义为类的行为，<strong>使用闭包会比使用类占用更少的资源</strong>，且更轻巧灵活。</p><p><strong>Example：</strong></p><p>假设我们仅仅想打印出各类动物的叫声，分别以类和闭包来实现：</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-19-1><a class=lnlinks href=#hl-19-1>1</a>
</span><span class=lnt id=hl-19-2><a class=lnlinks href=#hl-19-2>2</a>
</span><span class=lnt id=hl-19-3><a class=lnlinks href=#hl-19-3>3</a>
</span><span class=lnt id=hl-19-4><a class=lnlinks href=#hl-19-4>4</a>
</span><span class=lnt id=hl-19-5><a class=lnlinks href=#hl-19-5>5</a>
</span><span class=lnt id=hl-19-6><a class=lnlinks href=#hl-19-6>6</a>
</span><span class=lnt id=hl-19-7><a class=lnlinks href=#hl-19-7>7</a>
</span><span class=lnt id=hl-19-8><a class=lnlinks href=#hl-19-8>8</a>
</span><span class=lnt id=hl-19-9><a class=lnlinks href=#hl-19-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>animal_voice</span><span class=p>(</span><span class=n>animal</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>sound</span><span class=p>(</span><span class=n>voice</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>animal</span><span class=p>,</span> <span class=s2>&#34;:&#34;</span><span class=p>,</span> <span class=n>voice</span><span class=p>,</span> <span class=s2>&#34;...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sound</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dog</span> <span class=o>=</span> <span class=n>animal_voice</span><span class=p>(</span><span class=s2>&#34;dog&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>dog</span><span class=p>(</span><span class=s2>&#34;wangwang&#34;</span><span class=p>)</span>  <span class=c1># dog : wangwang ...</span>
</span></span><span class=line><span class=cl><span class=n>dog</span><span class=p>(</span><span class=s2>&#34;wowo&#34;</span><span class=p>)</span>  <span class=c1># dog : wowo ...</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-20-1><a class=lnlinks href=#hl-20-1> 1</a>
</span><span class=lnt id=hl-20-2><a class=lnlinks href=#hl-20-2> 2</a>
</span><span class=lnt id=hl-20-3><a class=lnlinks href=#hl-20-3> 3</a>
</span><span class=lnt id=hl-20-4><a class=lnlinks href=#hl-20-4> 4</a>
</span><span class=lnt id=hl-20-5><a class=lnlinks href=#hl-20-5> 5</a>
</span><span class=lnt id=hl-20-6><a class=lnlinks href=#hl-20-6> 6</a>
</span><span class=lnt id=hl-20-7><a class=lnlinks href=#hl-20-7> 7</a>
</span><span class=lnt id=hl-20-8><a class=lnlinks href=#hl-20-8> 8</a>
</span><span class=lnt id=hl-20-9><a class=lnlinks href=#hl-20-9> 9</a>
</span><span class=lnt id=hl-20-10><a class=lnlinks href=#hl-20-10>10</a>
</span><span class=lnt id=hl-20-11><a class=lnlinks href=#hl-20-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Animal</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>animal</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>animal</span> <span class=o>=</span> <span class=n>animal</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>sound</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>voice</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>animal</span><span class=p>,</span> <span class=s2>&#34;:&#34;</span><span class=p>,</span> <span class=n>voice</span><span class=p>,</span> <span class=s2>&#34;...&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>dog</span> <span class=o>=</span> <span class=n>Animal</span><span class=p>(</span><span class=s1>&#39;dog&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>dog</span><span class=o>.</span><span class=n>sound</span><span class=p>(</span><span class=s2>&#34;wangwang&#34;</span><span class=p>)</span>  <span class=c1># dog : wangwang ...</span>
</span></span><span class=line><span class=cl><span class=n>dog</span><span class=o>.</span><span class=n>sound</span><span class=p>(</span><span class=s2>&#34;wowo&#34;</span><span class=p>)</span>  <span class=c1># dog : wowo ... </span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-21-1><a class=lnlinks href=#hl-21-1>1</a>
</span><span class=lnt id=hl-21-2><a class=lnlinks href=#hl-21-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>Animal</span><span class=o>.</span><span class=n>sound</span><span class=p>))</span>  <span class=c1># 2165033261520</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>dog</span><span class=o>.</span><span class=n>sound</span><span class=p>))</span>  <span class=c1># 2165026975808</span></span></span></code></pre></td></tr></table></div></div></div><p>可以看到输出结果完全一样，但显然类的实现相对繁琐，且这里只是想输出一下动物的叫声，定义一个 Animal 类未免小题大做，而且 voice 函数在执行完毕后，其作用域就已经释放，但 Animal 类及其实例 dog 的相应属性却一直贮存在内存中。而这种占用对于实现该功能后，则是没有必要的。</p><p>除此之外，闭包还有很多其他功能，比如用于封装等，另外，<strong>闭包有效的减少了函数参数的数目</strong>，<strong>这对并行计算非常有价值</strong>，比如可以让每台电脑负责一个函数，然后串起来，实现流水化的作业等。</p><p><strong>Example</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-22-1><a class=lnlinks href=#hl-22-1> 1</a>
</span><span class=lnt id=hl-22-2><a class=lnlinks href=#hl-22-2> 2</a>
</span><span class=lnt id=hl-22-3><a class=lnlinks href=#hl-22-3> 3</a>
</span><span class=lnt id=hl-22-4><a class=lnlinks href=#hl-22-4> 4</a>
</span><span class=lnt id=hl-22-5><a class=lnlinks href=#hl-22-5> 5</a>
</span><span class=lnt id=hl-22-6><a class=lnlinks href=#hl-22-6> 6</a>
</span><span class=lnt id=hl-22-7><a class=lnlinks href=#hl-22-7> 7</a>
</span><span class=lnt id=hl-22-8><a class=lnlinks href=#hl-22-8> 8</a>
</span><span class=lnt id=hl-22-9><a class=lnlinks href=#hl-22-9> 9</a>
</span><span class=lnt id=hl-22-10><a class=lnlinks href=#hl-22-10>10</a>
</span><span class=lnt id=hl-22-11><a class=lnlinks href=#hl-22-11>11</a>
</span><span class=lnt id=hl-22-12><a class=lnlinks href=#hl-22-12>12</a>
</span><span class=lnt id=hl-22-13><a class=lnlinks href=#hl-22-13>13</a>
</span><span class=lnt id=hl-22-14><a class=lnlinks href=#hl-22-14>14</a>
</span><span class=lnt id=hl-22-15><a class=lnlinks href=#hl-22-15>15</a>
</span><span class=lnt id=hl-22-16><a class=lnlinks href=#hl-22-16>16</a>
</span><span class=lnt id=hl-22-17><a class=lnlinks href=#hl-22-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>makebold</span><span class=p>(</span><span class=n>fn</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapped</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;&lt;b&gt;&#34;</span> <span class=o>+</span> <span class=n>fn</span> <span class=o>+</span> <span class=s2>&#34;&lt;b&gt;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapped</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>makeitalic</span><span class=p>(</span><span class=n>fn</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>wrapped</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;&lt;i&gt;&#34;</span> <span class=o>+</span> <span class=n>fn</span> <span class=o>+</span> <span class=s2>&#34;&lt;i&gt;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>wrapped</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>hello</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s2>&#34;hello world&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>hello</span> <span class=o>=</span> <span class=n>makeitalic</span><span class=p>(</span><span class=n>hello</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=n>hello</span> <span class=o>=</span> <span class=n>makebold</span><span class=p>(</span><span class=n>hello</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>hello</span><span class=p>())</span>  <span class=c1># &lt;b&gt;&lt;i&gt;hello world&lt;i&gt;&lt;b&gt;</span></span></span></code></pre></td></tr></table></div></div></div><h3 id=装饰器 class=heading>装饰器<a href=#%e8%a3%85%e9%a5%b0%e5%99%a8 aria-labelledby=装饰器><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p><strong>装饰器（decorators）</strong> 是 Python 中的一种高级功能，它允许你 <strong>动态地修改函数或类的行为</strong>。</p><p>装饰器是一种函数，它接受 <strong>一个函数作为参数</strong>，并 <strong>返回一个新的函数或修改原来的函数</strong>。</p><p>装饰器的语法使用 <strong>@decorator_name</strong> 来应用在函数或方法上</p><p>Python 装饰器允许在不修改原有函数代码的基础上，动态地增加或修改函数的功能，装饰器本质上是一个 <strong>接收函数作为输入</strong> 并 <strong>返回一个新的包装过后的函数</strong> 的对象。</p><p><strong>装饰器的应用场景：</strong></p><ul><li><strong>日志记录</strong>: 装饰器可用于记录函数的调用信息、参数和返回值。</li><li><strong>性能分析</strong>: 可以使用装饰器来测量函数的执行时间。</li><li><strong>权限控制</strong>: 装饰器可用于限制对某些函数的访问权限。</li><li><strong>缓存</strong>: 装饰器可用于实现函数结果的缓存，以提高性能。</li></ul><p><strong>Example 1</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-23-1><a class=lnlinks href=#hl-23-1> 1</a>
</span><span class=lnt id=hl-23-2><a class=lnlinks href=#hl-23-2> 2</a>
</span><span class=lnt id=hl-23-3><a class=lnlinks href=#hl-23-3> 3</a>
</span><span class=lnt id=hl-23-4><a class=lnlinks href=#hl-23-4> 4</a>
</span><span class=lnt id=hl-23-5><a class=lnlinks href=#hl-23-5> 5</a>
</span><span class=lnt id=hl-23-6><a class=lnlinks href=#hl-23-6> 6</a>
</span><span class=lnt id=hl-23-7><a class=lnlinks href=#hl-23-7> 7</a>
</span><span class=lnt id=hl-23-8><a class=lnlinks href=#hl-23-8> 8</a>
</span><span class=lnt id=hl-23-9><a class=lnlinks href=#hl-23-9> 9</a>
</span><span class=lnt id=hl-23-10><a class=lnlinks href=#hl-23-10>10</a>
</span><span class=lnt id=hl-23-11><a class=lnlinks href=#hl-23-11>11</a>
</span><span class=lnt id=hl-23-12><a class=lnlinks href=#hl-23-12>12</a>
</span><span class=lnt id=hl-23-13><a class=lnlinks href=#hl-23-13>13</a>
</span><span class=lnt id=hl-23-14><a class=lnlinks href=#hl-23-14>14</a>
</span><span class=lnt id=hl-23-15><a class=lnlinks href=#hl-23-15>15</a>
</span><span class=lnt id=hl-23-16><a class=lnlinks href=#hl-23-16>16</a>
</span><span class=lnt id=hl-23-17><a class=lnlinks href=#hl-23-17>17</a>
</span><span class=lnt id=hl-23-18><a class=lnlinks href=#hl-23-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>outer</span><span class=p>(</span><span class=n>f</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>inner</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>inner</span><span class=o>.</span><span class=n>co</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>f</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>inner</span><span class=o>.</span><span class=n>co</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>inner</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@outer</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>f</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>f</span><span class=o>.</span><span class=n>co</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-24-1><a class=lnlinks href=#hl-24-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 3</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 2</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-25-1><a class=lnlinks href=#hl-25-1> 1</a>
</span><span class=lnt id=hl-25-2><a class=lnlinks href=#hl-25-2> 2</a>
</span><span class=lnt id=hl-25-3><a class=lnlinks href=#hl-25-3> 3</a>
</span><span class=lnt id=hl-25-4><a class=lnlinks href=#hl-25-4> 4</a>
</span><span class=lnt id=hl-25-5><a class=lnlinks href=#hl-25-5> 5</a>
</span><span class=lnt id=hl-25-6><a class=lnlinks href=#hl-25-6> 6</a>
</span><span class=lnt id=hl-25-7><a class=lnlinks href=#hl-25-7> 7</a>
</span><span class=lnt id=hl-25-8><a class=lnlinks href=#hl-25-8> 8</a>
</span><span class=lnt id=hl-25-9><a class=lnlinks href=#hl-25-9> 9</a>
</span><span class=lnt id=hl-25-10><a class=lnlinks href=#hl-25-10>10</a>
</span><span class=lnt id=hl-25-11><a class=lnlinks href=#hl-25-11>11</a>
</span><span class=lnt id=hl-25-12><a class=lnlinks href=#hl-25-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>wrapFun</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>inner</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;function name:&#39;</span><span class=p>,</span> <span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>r</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>r</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>inner</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@wrapFun</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>myadd</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>myadd</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-26-1><a class=lnlinks href=#hl-26-1>1</a>
</span><span class=lnt id=hl-26-2><a class=lnlinks href=#hl-26-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># function name: myadd</span>
</span></span><span class=line><span class=cl><span class=c1># 5</span></span></span></code></pre></td></tr></table></div></div></div><p>多个装饰器装饰一个函数类似 stack</p><p>多个装饰器装饰一个函数时，执行时的顺序是：<strong>最先装饰的装饰器，最后一个执行</strong>。它遵循了 <strong>先进后出规则</strong> 类似于 stack</p><p><strong>Example 3</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-27-1><a class=lnlinks href=#hl-27-1> 1</a>
</span><span class=lnt id=hl-27-2><a class=lnlinks href=#hl-27-2> 2</a>
</span><span class=lnt id=hl-27-3><a class=lnlinks href=#hl-27-3> 3</a>
</span><span class=lnt id=hl-27-4><a class=lnlinks href=#hl-27-4> 4</a>
</span><span class=lnt id=hl-27-5><a class=lnlinks href=#hl-27-5> 5</a>
</span><span class=lnt id=hl-27-6><a class=lnlinks href=#hl-27-6> 6</a>
</span><span class=lnt id=hl-27-7><a class=lnlinks href=#hl-27-7> 7</a>
</span><span class=lnt id=hl-27-8><a class=lnlinks href=#hl-27-8> 8</a>
</span><span class=lnt id=hl-27-9><a class=lnlinks href=#hl-27-9> 9</a>
</span><span class=lnt id=hl-27-10><a class=lnlinks href=#hl-27-10>10</a>
</span><span class=lnt id=hl-27-11><a class=lnlinks href=#hl-27-11>11</a>
</span><span class=lnt id=hl-27-12><a class=lnlinks href=#hl-27-12>12</a>
</span><span class=lnt id=hl-27-13><a class=lnlinks href=#hl-27-13>13</a>
</span><span class=lnt id=hl-27-14><a class=lnlinks href=#hl-27-14>14</a>
</span><span class=lnt id=hl-27-15><a class=lnlinks href=#hl-27-15>15</a>
</span><span class=lnt id=hl-27-16><a class=lnlinks href=#hl-27-16>16</a>
</span><span class=lnt id=hl-27-17><a class=lnlinks href=#hl-27-17>17</a>
</span><span class=lnt id=hl-27-18><a class=lnlinks href=#hl-27-18>18</a>
</span><span class=lnt id=hl-27-19><a class=lnlinks href=#hl-27-19>19</a>
</span><span class=lnt id=hl-27-20><a class=lnlinks href=#hl-27-20>20</a>
</span><span class=lnt id=hl-27-21><a class=lnlinks href=#hl-27-21>21</a>
</span><span class=lnt id=hl-27-22><a class=lnlinks href=#hl-27-22>22</a>
</span><span class=lnt id=hl-27-23><a class=lnlinks href=#hl-27-23>23</a>
</span><span class=lnt id=hl-27-24><a class=lnlinks href=#hl-27-24>24</a>
</span><span class=lnt id=hl-27-25><a class=lnlinks href=#hl-27-25>25</a>
</span><span class=lnt id=hl-27-26><a class=lnlinks href=#hl-27-26>26</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>set_fun1</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 打印用于验证在多个装饰器的情况下，多个装饰器之间的执行顺序</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;set_fun1已被定义&#34;</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>call_fun1</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 当被装饰函数执行时，会打印</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;call_fun1执行了&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>call_fun1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>set_fun2</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;set_fun2已被定义&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>call_fun2</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;call_fun2执行了&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>call_fun2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 装饰函数</span>
</span></span><span class=line><span class=cl><span class=nd>@set_fun2</span>
</span></span><span class=line><span class=cl><span class=nd>@set_fun1</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>test</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;--------------&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>test</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-28-1><a class=lnlinks href=#hl-28-1>1</a>
</span><span class=lnt id=hl-28-2><a class=lnlinks href=#hl-28-2>2</a>
</span><span class=lnt id=hl-28-3><a class=lnlinks href=#hl-28-3>3</a>
</span><span class=lnt id=hl-28-4><a class=lnlinks href=#hl-28-4>4</a>
</span><span class=lnt id=hl-28-5><a class=lnlinks href=#hl-28-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># set_fun1已被定义</span>
</span></span><span class=line><span class=cl><span class=c1># set_fun2已被定义</span>
</span></span><span class=line><span class=cl><span class=c1># call_fun2执行了</span>
</span></span><span class=line><span class=cl><span class=c1># call_fun1执行了</span>
</span></span><span class=line><span class=cl><span class=c1># --------------</span></span></span></code></pre></td></tr></table></div></div></div><h3 id=迭代对象迭代器生成器 class=heading>迭代对象，迭代器，生成器<a href=#%e8%bf%ad%e4%bb%a3%e5%af%b9%e8%b1%a1%e8%bf%ad%e4%bb%a3%e5%99%a8%e7%94%9f%e6%88%90%e5%99%a8 aria-labelledby=迭代对象迭代器生成器><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><ul><li><p>若对象中实现了 <strong><code>__getitem__</code> 或者 <code>__iter__</code> 方法</strong>，那么这个对象就是 <strong>可迭代对象</strong></p></li><li><p>若对象中实现了 <strong><code>__next__</code> 和 <code>__iter__</code> 方法</strong>，那么这个对象就是 <strong>迭代器</strong></p></li><li><p>可迭代对象的背后其实是迭代器在起作用</p></li></ul><p>使用了 <strong>yield</strong> 的函数被称为 <strong>生成器（generator）</strong></p><p><strong>yield</strong> 是一个关键字，用于定义生成器函数，生成器函数是一种特殊的函数，可以在迭代过程中逐步产生值，而不是一次性返回所有结果。生成器是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个迭代器。</p><p>当在生成器函数中使用 <strong>yield</strong> 语句时，函数的执行将会暂停，并将 <strong>yield</strong> 后面的表达式作为当前迭代的值返回。</p><p>然后，每次调用生成器的 <strong>next()</strong> 方法或使用 <strong>for</strong> 循环进行迭代时，函数会从上次暂停的地方继续执行，直到再次遇到 <strong>yield</strong> 语句。这样，生成器函数可以逐步产生值，而不需要一次性计算并返回所有结果。</p><p><strong>调用一个生成器函数</strong>，返回的是一个 <strong>迭代器对象</strong>。可以说所有生成器对象都是迭代器对象，有一点细微的区别：</p><ul><li><strong>生成器对象更倾向于在无限中集合中惰性的输出需要的数据</strong></li><li><strong>迭代器更倾向于在实现已知道所有数据的情况下惰性输出需要的数据</strong></li></ul><p>恰当的例子就是斐波那契数列，可以用生成器实现一个斐波那契数列，但因为该数列的元素是无限多个，所以说其是迭代器实现的就没有说由生成器实现的说法恰当。</p><p><strong>判断对象是否是可迭代对象的方法</strong></p><p>方法一：</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-29-1><a class=lnlinks href=#hl-29-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;__iter__&#39;</span> <span class=ow>in</span> <span class=nb>dir</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]))</span>  <span class=c1># True</span></span></span></code></pre></td></tr></table></div></div></div><p>方法二：</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-30-1><a class=lnlinks href=#hl-30-1>1</a>
</span><span class=lnt id=hl-30-2><a class=lnlinks href=#hl-30-2>2</a>
</span><span class=lnt id=hl-30-3><a class=lnlinks href=#hl-30-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>collections.abc</span> <span class=kn>import</span> <span class=n>Iterable</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>isinstance</span><span class=p>(</span><span class=s1>&#39;123&#39;</span><span class=p>,</span> <span class=n>Iterable</span><span class=p>))</span>  <span class=c1># True</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-31-1><a class=lnlinks href=#hl-31-1>1</a>
</span><span class=lnt id=hl-31-2><a class=lnlinks href=#hl-31-2>2</a>
</span><span class=lnt id=hl-31-3><a class=lnlinks href=#hl-31-3>3</a>
</span><span class=lnt id=hl-31-4><a class=lnlinks href=#hl-31-4>4</a>
</span><span class=lnt id=hl-31-5><a class=lnlinks href=#hl-31-5>5</a>
</span><span class=lnt id=hl-31-6><a class=lnlinks href=#hl-31-6>6</a>
</span><span class=lnt id=hl-31-7><a class=lnlinks href=#hl-31-7>7</a>
</span><span class=lnt id=hl-31-8><a class=lnlinks href=#hl-31-8>8</a>
</span><span class=lnt id=hl-31-9><a class=lnlinks href=#hl-31-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>arr</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>arr_iter</span> <span class=o>=</span> <span class=n>arr</span><span class=o>.</span><span class=fm>__iter__</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>arr_iter</span><span class=o>.</span><span class=fm>__next__</span><span class=p>())</span>  <span class=c1># 1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># arr是可迭代对象, 不是迭代器 </span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;__next__&#39;</span> <span class=ow>in</span> <span class=nb>dir</span><span class=p>(</span><span class=n>arr</span><span class=p>))</span>  <span class=c1># False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># arr_iter是迭代器</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;__next__&#39;</span> <span class=ow>in</span> <span class=nb>dir</span><span class=p>(</span><span class=n>arr_iter</span><span class=p>))</span>  <span class=c1># True</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>1.</strong> <strong><code>__iter__()</code></strong></p><p>该方法返回的是当前对象的 <strong>迭代器类的实例</strong>。因为可迭代对象与迭代器都要实现这个方法，因此有以下两种写法。</p><ol><li>用于可迭代对象类的写法，返回该可迭代对象的迭代器类的实例。</li><li>用于迭代器类的写法，直接返回 self（即自己本身），表示自身即是自己的迭代器。</li></ol><p><strong>2.</strong> <strong><code>__next__ ()</code></strong></p><p>返回迭代的每一步，实现该方法时注意要最后超出边界要抛出 <code>StopIteration</code> 异常。</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-32-1><a class=lnlinks href=#hl-32-1> 1</a>
</span><span class=lnt id=hl-32-2><a class=lnlinks href=#hl-32-2> 2</a>
</span><span class=lnt id=hl-32-3><a class=lnlinks href=#hl-32-3> 3</a>
</span><span class=lnt id=hl-32-4><a class=lnlinks href=#hl-32-4> 4</a>
</span><span class=lnt id=hl-32-5><a class=lnlinks href=#hl-32-5> 5</a>
</span><span class=lnt id=hl-32-6><a class=lnlinks href=#hl-32-6> 6</a>
</span><span class=lnt id=hl-32-7><a class=lnlinks href=#hl-32-7> 7</a>
</span><span class=lnt id=hl-32-8><a class=lnlinks href=#hl-32-8> 8</a>
</span><span class=lnt id=hl-32-9><a class=lnlinks href=#hl-32-9> 9</a>
</span><span class=lnt id=hl-32-10><a class=lnlinks href=#hl-32-10>10</a>
</span><span class=lnt id=hl-32-11><a class=lnlinks href=#hl-32-11>11</a>
</span><span class=lnt id=hl-32-12><a class=lnlinks href=#hl-32-12>12</a>
</span><span class=lnt id=hl-32-13><a class=lnlinks href=#hl-32-13>13</a>
</span><span class=lnt id=hl-32-14><a class=lnlinks href=#hl-32-14>14</a>
</span><span class=lnt id=hl-32-15><a class=lnlinks href=#hl-32-15>15</a>
</span><span class=lnt id=hl-32-16><a class=lnlinks href=#hl-32-16>16</a>
</span><span class=lnt id=hl-32-17><a class=lnlinks href=#hl-32-17>17</a>
</span><span class=lnt id=hl-32-18><a class=lnlinks href=#hl-32-18>18</a>
</span><span class=lnt id=hl-32-19><a class=lnlinks href=#hl-32-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>start</span><span class=p>,</span> <span class=n>end</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>start</span> <span class=o>=</span> <span class=n>start</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>end</span> <span class=o>=</span> <span class=n>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__next__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>start</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>end</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>start</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>start</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>StopIteration</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>MyRange</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>  <span class=c1># 1 2</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>3</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>i</span><span class=p>)</span>  <span class=c1># 1 2</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>3. <code>iter(source, sentinel=None)</code></strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-33-1><a class=lnlinks href=#hl-33-1> 1</a>
</span><span class=lnt id=hl-33-2><a class=lnlinks href=#hl-33-2> 2</a>
</span><span class=lnt id=hl-33-3><a class=lnlinks href=#hl-33-3> 3</a>
</span><span class=lnt id=hl-33-4><a class=lnlinks href=#hl-33-4> 4</a>
</span><span class=lnt id=hl-33-5><a class=lnlinks href=#hl-33-5> 5</a>
</span><span class=lnt id=hl-33-6><a class=lnlinks href=#hl-33-6> 6</a>
</span><span class=lnt id=hl-33-7><a class=lnlinks href=#hl-33-7> 7</a>
</span><span class=lnt id=hl-33-8><a class=lnlinks href=#hl-33-8> 8</a>
</span><span class=lnt id=hl-33-9><a class=lnlinks href=#hl-33-9> 9</a>
</span><span class=lnt id=hl-33-10><a class=lnlinks href=#hl-33-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>iter</span><span class=p>(</span><span class=n>source</span><span class=p>,</span> <span class=n>sentinel</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span> <span class=c1># known special case of iter</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    iter(iterable) -&gt; iterator
</span></span></span><span class=line><span class=cl><span class=s2>    iter(callable, sentinel) -&gt; iterator
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Get an iterator from an object.  In the first form, the argument must
</span></span></span><span class=line><span class=cl><span class=s2>    supply its own iterator, or be a sequence.
</span></span></span><span class=line><span class=cl><span class=s2>    In the second form, the callable is called until it returns the sentinel.
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 1:</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-34-1><a class=lnlinks href=#hl-34-1>1</a>
</span><span class=lnt id=hl-34-2><a class=lnlinks href=#hl-34-2>2</a>
</span><span class=lnt id=hl-34-3><a class=lnlinks href=#hl-34-3>3</a>
</span><span class=lnt id=hl-34-4><a class=lnlinks href=#hl-34-4>4</a>
</span><span class=lnt id=hl-34-5><a class=lnlinks href=#hl-34-5>5</a>
</span><span class=lnt id=hl-34-6><a class=lnlinks href=#hl-34-6>6</a>
</span><span class=lnt id=hl-34-7><a class=lnlinks href=#hl-34-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>it</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>next</span><span class=p>(</span><span class=n>it</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>iter</span><span class=p>(</span><span class=n>func</span><span class=p>,</span> <span class=mi>4</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>j</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-35-1><a class=lnlinks href=#hl-35-1>1</a>
</span><span class=lnt id=hl-35-2><a class=lnlinks href=#hl-35-2>2</a>
</span><span class=lnt id=hl-35-3><a class=lnlinks href=#hl-35-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 1</span>
</span></span><span class=line><span class=cl><span class=c1># 2</span>
</span></span><span class=line><span class=cl><span class=c1># 3</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 2:</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-36-1><a class=lnlinks href=#hl-36-1> 1</a>
</span><span class=lnt id=hl-36-2><a class=lnlinks href=#hl-36-2> 2</a>
</span><span class=lnt id=hl-36-3><a class=lnlinks href=#hl-36-3> 3</a>
</span><span class=lnt id=hl-36-4><a class=lnlinks href=#hl-36-4> 4</a>
</span><span class=lnt id=hl-36-5><a class=lnlinks href=#hl-36-5> 5</a>
</span><span class=lnt id=hl-36-6><a class=lnlinks href=#hl-36-6> 6</a>
</span><span class=lnt id=hl-36-7><a class=lnlinks href=#hl-36-7> 7</a>
</span><span class=lnt id=hl-36-8><a class=lnlinks href=#hl-36-8> 8</a>
</span><span class=lnt id=hl-36-9><a class=lnlinks href=#hl-36-9> 9</a>
</span><span class=lnt id=hl-36-10><a class=lnlinks href=#hl-36-10>10</a>
</span><span class=lnt id=hl-36-11><a class=lnlinks href=#hl-36-11>11</a>
</span><span class=lnt id=hl-36-12><a class=lnlinks href=#hl-36-12>12</a>
</span><span class=lnt id=hl-36-13><a class=lnlinks href=#hl-36-13>13</a>
</span><span class=lnt id=hl-36-14><a class=lnlinks href=#hl-36-14>14</a>
</span><span class=lnt id=hl-36-15><a class=lnlinks href=#hl-36-15>15</a>
</span><span class=lnt id=hl-36-16><a class=lnlinks href=#hl-36-16>16</a>
</span><span class=lnt id=hl-36-17><a class=lnlinks href=#hl-36-17>17</a>
</span><span class=lnt id=hl-36-18><a class=lnlinks href=#hl-36-18>18</a>
</span><span class=lnt id=hl-36-19><a class=lnlinks href=#hl-36-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Next</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>data</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_iter</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_len</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;iter&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;call&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>next</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_iter</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__next__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;i am next&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>next</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_iter</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><p>这里 <code>Next()</code> 是初始化创建一个实例，该实例可以被调用，也就是 <code>Next()()</code> 时会调用 <code>Next().__call__()</code>。</p><p>而 <code>iter</code> 对象的第一个参数如果是 <strong>可调用对象</strong> 时，会一直调用该对象 <strong>直到与第二个参数相同</strong> 或者 <strong><code>raise StopIteration</code></strong></p><p>而每次执行 <code>__call__</code> 时，会对 <code>self._iter</code> 迭代一次。这里 <code>__next__</code> 和 <code>__iter__</code> 没有执行。</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-37-1><a class=lnlinks href=#hl-37-1> 1</a>
</span><span class=lnt id=hl-37-2><a class=lnlinks href=#hl-37-2> 2</a>
</span><span class=lnt id=hl-37-3><a class=lnlinks href=#hl-37-3> 3</a>
</span><span class=lnt id=hl-37-4><a class=lnlinks href=#hl-37-4> 4</a>
</span><span class=lnt id=hl-37-5><a class=lnlinks href=#hl-37-5> 5</a>
</span><span class=lnt id=hl-37-6><a class=lnlinks href=#hl-37-6> 6</a>
</span><span class=lnt id=hl-37-7><a class=lnlinks href=#hl-37-7> 7</a>
</span><span class=lnt id=hl-37-8><a class=lnlinks href=#hl-37-8> 8</a>
</span><span class=lnt id=hl-37-9><a class=lnlinks href=#hl-37-9> 9</a>
</span><span class=lnt id=hl-37-10><a class=lnlinks href=#hl-37-10>10</a>
</span><span class=lnt id=hl-37-11><a class=lnlinks href=#hl-37-11>11</a>
</span><span class=lnt id=hl-37-12><a class=lnlinks href=#hl-37-12>12</a>
</span><span class=lnt id=hl-37-13><a class=lnlinks href=#hl-37-13>13</a>
</span><span class=lnt id=hl-37-14><a class=lnlinks href=#hl-37-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>it</span> <span class=ow>in</span> <span class=nb>iter</span><span class=p>(</span><span class=n>Next</span><span class=p>(),</span> <span class=mi>6</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>it</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># call</span>
</span></span><span class=line><span class=cl><span class=c1># 0</span>
</span></span><span class=line><span class=cl><span class=c1># call</span>
</span></span><span class=line><span class=cl><span class=c1># 1</span>
</span></span><span class=line><span class=cl><span class=c1># call</span>
</span></span><span class=line><span class=cl><span class=c1># 2</span>
</span></span><span class=line><span class=cl><span class=c1># call</span>
</span></span><span class=line><span class=cl><span class=c1># 3</span>
</span></span><span class=line><span class=cl><span class=c1># call</span>
</span></span><span class=line><span class=cl><span class=c1># 4</span>
</span></span><span class=line><span class=cl><span class=c1># call</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-38-1><a class=lnlinks href=#hl-38-1> 1</a>
</span><span class=lnt id=hl-38-2><a class=lnlinks href=#hl-38-2> 2</a>
</span><span class=lnt id=hl-38-3><a class=lnlinks href=#hl-38-3> 3</a>
</span><span class=lnt id=hl-38-4><a class=lnlinks href=#hl-38-4> 4</a>
</span><span class=lnt id=hl-38-5><a class=lnlinks href=#hl-38-5> 5</a>
</span><span class=lnt id=hl-38-6><a class=lnlinks href=#hl-38-6> 6</a>
</span><span class=lnt id=hl-38-7><a class=lnlinks href=#hl-38-7> 7</a>
</span><span class=lnt id=hl-38-8><a class=lnlinks href=#hl-38-8> 8</a>
</span><span class=lnt id=hl-38-9><a class=lnlinks href=#hl-38-9> 9</a>
</span><span class=lnt id=hl-38-10><a class=lnlinks href=#hl-38-10>10</a>
</span><span class=lnt id=hl-38-11><a class=lnlinks href=#hl-38-11>11</a>
</span><span class=lnt id=hl-38-12><a class=lnlinks href=#hl-38-12>12</a>
</span><span class=lnt id=hl-38-13><a class=lnlinks href=#hl-38-13>13</a>
</span><span class=lnt id=hl-38-14><a class=lnlinks href=#hl-38-14>14</a>
</span><span class=lnt id=hl-38-15><a class=lnlinks href=#hl-38-15>15</a>
</span><span class=lnt id=hl-38-16><a class=lnlinks href=#hl-38-16>16</a>
</span><span class=lnt id=hl-38-17><a class=lnlinks href=#hl-38-17>17</a>
</span><span class=lnt id=hl-38-18><a class=lnlinks href=#hl-38-18>18</a>
</span><span class=lnt id=hl-38-19><a class=lnlinks href=#hl-38-19>19</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>iter_next</span> <span class=o>=</span> <span class=nb>iter</span><span class=p>(</span><span class=n>Next</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;===================&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>it</span> <span class=ow>in</span> <span class=n>iter_next</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>it</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># iter</span>
</span></span><span class=line><span class=cl><span class=c1># ===================</span>
</span></span><span class=line><span class=cl><span class=c1># iter</span>
</span></span><span class=line><span class=cl><span class=c1># i am next</span>
</span></span><span class=line><span class=cl><span class=c1># 0</span>
</span></span><span class=line><span class=cl><span class=c1># i am next</span>
</span></span><span class=line><span class=cl><span class=c1># 1</span>
</span></span><span class=line><span class=cl><span class=c1># i am next</span>
</span></span><span class=line><span class=cl><span class=c1># 2</span>
</span></span><span class=line><span class=cl><span class=c1># i am next</span>
</span></span><span class=line><span class=cl><span class=c1># 3</span>
</span></span><span class=line><span class=cl><span class=c1># i am next</span>
</span></span><span class=line><span class=cl><span class=c1># 4</span>
</span></span><span class=line><span class=cl><span class=c1># i am next</span></span></span></code></pre></td></tr></table></div></div></div><h2 id=异常捕获 class=heading>异常捕获<a href=#%e5%bc%82%e5%b8%b8%e6%8d%95%e8%8e%b7 aria-labelledby=异常捕获><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p><strong>try/except</strong></p><p>try 语句按照如下方式工作:</p><ul><li><p>执行 try 子句（在关键字 try 和关键字 except 之间的语句）。</p></li><li><p>如果没有异常发生，忽略 except 子句，try 子句执行后结束。</p></li><li><p>如果在执行 try 子句的过程中发生了异常，<strong>那么 try 子句余下的部分将被忽略</strong>。</p></li><li><p>如果异常的类型和 except 之后的名称相符，那么对应的 except 子句将被执行。一个 try 语句可能包含多个 except 子句，分别来处理不同的特定的异常。最多只有一个分支会被执行。</p><p><strong>except 只有第一个捕获的会执行</strong>。</p><p>一个 except 子句可以同时处理多个异常，这些异常将被放在一个括号里成为一个元组：</p><p><code>except (ValueError,IndexError) as e:</code></p></li><li><p>如果一个异常没有与任何的 except 匹配，那么这个异常将会传递给上层的 try 中。</p></li></ul><p><strong>Except 多个异常</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-39-1><a class=lnlinks href=#hl-39-1> 1</a>
</span><span class=lnt id=hl-39-2><a class=lnlinks href=#hl-39-2> 2</a>
</span><span class=lnt id=hl-39-3><a class=lnlinks href=#hl-39-3> 3</a>
</span><span class=lnt id=hl-39-4><a class=lnlinks href=#hl-39-4> 4</a>
</span><span class=lnt id=hl-39-5><a class=lnlinks href=#hl-39-5> 5</a>
</span><span class=lnt id=hl-39-6><a class=lnlinks href=#hl-39-6> 6</a>
</span><span class=lnt id=hl-39-7><a class=lnlinks href=#hl-39-7> 7</a>
</span><span class=lnt id=hl-39-8><a class=lnlinks href=#hl-39-8> 8</a>
</span><span class=lnt id=hl-39-9><a class=lnlinks href=#hl-39-9> 9</a>
</span><span class=lnt id=hl-39-10><a class=lnlinks href=#hl-39-10>10</a>
</span><span class=lnt id=hl-39-11><a class=lnlinks href=#hl-39-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>AException</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;A Exception&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BException</span><span class=p>(</span><span class=n>AException</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;B Exception&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CException</span><span class=p>(</span><span class=n>AException</span><span class=p>,</span> <span class=n>BException</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 1</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-40-1><a class=lnlinks href=#hl-40-1>1</a>
</span><span class=lnt id=hl-40-2><a class=lnlinks href=#hl-40-2>2</a>
</span><span class=lnt id=hl-40-3><a class=lnlinks href=#hl-40-3>3</a>
</span><span class=lnt id=hl-40-4><a class=lnlinks href=#hl-40-4>4</a>
</span><span class=lnt id=hl-40-5><a class=lnlinks href=#hl-40-5>5</a>
</span><span class=lnt id=hl-40-6><a class=lnlinks href=#hl-40-6>6</a>
</span><span class=lnt id=hl-40-7><a class=lnlinks href=#hl-40-7>7</a>
</span><span class=lnt id=hl-40-8><a class=lnlinks href=#hl-40-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>BException</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>AException</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Raise exception&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>exc</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-41-1><a class=lnlinks href=#hl-41-1>1</a>
</span><span class=lnt id=hl-41-2><a class=lnlinks href=#hl-41-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Raise exception</span>
</span></span><span class=line><span class=cl><span class=c1># B Exception</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 2</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-42-1><a class=lnlinks href=#hl-42-1>1</a>
</span><span class=lnt id=hl-42-2><a class=lnlinks href=#hl-42-2>2</a>
</span><span class=lnt id=hl-42-3><a class=lnlinks href=#hl-42-3>3</a>
</span><span class=lnt id=hl-42-4><a class=lnlinks href=#hl-42-4>4</a>
</span><span class=lnt id=hl-42-5><a class=lnlinks href=#hl-42-5>5</a>
</span><span class=lnt id=hl-42-6><a class=lnlinks href=#hl-42-6>6</a>
</span><span class=lnt id=hl-42-7><a class=lnlinks href=#hl-42-7>7</a>
</span><span class=lnt id=hl-42-8><a class=lnlinks href=#hl-42-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>BException</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>AException</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>AException</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Raise exception&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=nb>str</span><span class=p>(</span><span class=n>exc</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-43-1><a class=lnlinks href=#hl-43-1>1</a>
</span><span class=lnt id=hl-43-2><a class=lnlinks href=#hl-43-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Raise exception</span>
</span></span><span class=line><span class=cl><span class=c1># A Exception</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 3</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-44-1><a class=lnlinks href=#hl-44-1> 1</a>
</span><span class=lnt id=hl-44-2><a class=lnlinks href=#hl-44-2> 2</a>
</span><span class=lnt id=hl-44-3><a class=lnlinks href=#hl-44-3> 3</a>
</span><span class=lnt id=hl-44-4><a class=lnlinks href=#hl-44-4> 4</a>
</span><span class=lnt id=hl-44-5><a class=lnlinks href=#hl-44-5> 5</a>
</span><span class=lnt id=hl-44-6><a class=lnlinks href=#hl-44-6> 6</a>
</span><span class=lnt id=hl-44-7><a class=lnlinks href=#hl-44-7> 7</a>
</span><span class=lnt id=hl-44-8><a class=lnlinks href=#hl-44-8> 8</a>
</span><span class=lnt id=hl-44-9><a class=lnlinks href=#hl-44-9> 9</a>
</span><span class=lnt id=hl-44-10><a class=lnlinks href=#hl-44-10>10</a>
</span><span class=lnt id=hl-44-11><a class=lnlinks href=#hl-44-11>11</a>
</span><span class=lnt id=hl-44-12><a class=lnlinks href=#hl-44-12>12</a>
</span><span class=lnt id=hl-44-13><a class=lnlinks href=#hl-44-13>13</a>
</span><span class=lnt id=hl-44-14><a class=lnlinks href=#hl-44-14>14</a>
</span><span class=lnt id=hl-44-15><a class=lnlinks href=#hl-44-15>15</a>
</span><span class=lnt id=hl-44-16><a class=lnlinks href=#hl-44-16>16</a>
</span><span class=lnt id=hl-44-17><a class=lnlinks href=#hl-44-17>17</a>
</span><span class=lnt id=hl-44-18><a class=lnlinks href=#hl-44-18>18</a>
</span><span class=lnt id=hl-44-19><a class=lnlinks href=#hl-44-19>19</a>
</span><span class=lnt id=hl-44-20><a class=lnlinks href=#hl-44-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>exc_massage</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>CException</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>AException</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>exc_massage</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;AException&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>exc</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>BException</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>exc_massage</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;BException&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>exc</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=n>CException</span> <span class=k>as</span> <span class=n>exc</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>exc_massage</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;CException&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=n>exc</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=n>CException</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>exc_massage</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;C Exception&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=n>AException</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;A Exception&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=n>BException</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;B Exception&#34;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-45-1><a class=lnlinks href=#hl-45-1>1</a>
</span><span class=lnt id=hl-45-2><a class=lnlinks href=#hl-45-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># [&#39;AException&#39;]</span>
</span></span><span class=line><span class=cl><span class=c1># C Exception</span></span></span></code></pre></td></tr></table></div></div></div><hr><p><strong>try/except&mldr;else</strong></p><p><strong><code>try/except</code></strong> 语句还有一个可选的 <strong><code>else</code></strong> 子句，如果使用这个子句，那么必须放在所有的 <code>except</code> 子句之后。</p><p><code>else</code> 子句将在 <code>try</code> 子句没有发生任何异常的时候执行。</p><p>使用 <code>else</code> 子句比把所有的语句都放在 try 子句里面要好，这样可以避免一些意想不到，而 except 又无法捕获的异常。</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-46-1><a class=lnlinks href=#hl-46-1>1</a>
</span><span class=lnt id=hl-46-2><a class=lnlinks href=#hl-46-2>2</a>
</span><span class=lnt id=hl-46-3><a class=lnlinks href=#hl-46-3>3</a>
</span><span class=lnt id=hl-46-4><a class=lnlinks href=#hl-46-4>4</a>
</span><span class=lnt id=hl-46-5><a class=lnlinks href=#hl-46-5>5</a>
</span><span class=lnt id=hl-46-6><a class=lnlinks href=#hl-46-6>6</a>
</span><span class=lnt id=hl-46-7><a class=lnlinks href=#hl-46-7>7</a>
</span><span class=lnt id=hl-46-8><a class=lnlinks href=#hl-46-8>8</a>
</span><span class=lnt id=hl-46-9><a class=lnlinks href=#hl-46-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>x</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;TypeError&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Else&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>e</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-47-1><a class=lnlinks href=#hl-47-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># division by zero</span></span></span></code></pre></td></tr></table></div></div></div><hr><p><strong>try/except&mldr;else&mldr;finally</strong></p><p><strong>finally 语句无论异常是否发生都会执行</strong></p><p><strong>Example 1</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-48-1><a class=lnlinks href=#hl-48-1> 1</a>
</span><span class=lnt id=hl-48-2><a class=lnlinks href=#hl-48-2> 2</a>
</span><span class=lnt id=hl-48-3><a class=lnlinks href=#hl-48-3> 3</a>
</span><span class=lnt id=hl-48-4><a class=lnlinks href=#hl-48-4> 4</a>
</span><span class=lnt id=hl-48-5><a class=lnlinks href=#hl-48-5> 5</a>
</span><span class=lnt id=hl-48-6><a class=lnlinks href=#hl-48-6> 6</a>
</span><span class=lnt id=hl-48-7><a class=lnlinks href=#hl-48-7> 7</a>
</span><span class=lnt id=hl-48-8><a class=lnlinks href=#hl-48-8> 8</a>
</span><span class=lnt id=hl-48-9><a class=lnlinks href=#hl-48-9> 9</a>
</span><span class=lnt id=hl-48-10><a class=lnlinks href=#hl-48-10>10</a>
</span><span class=lnt id=hl-48-11><a class=lnlinks href=#hl-48-11>11</a>
</span><span class=lnt id=hl-48-12><a class=lnlinks href=#hl-48-12>12</a>
</span><span class=lnt id=hl-48-13><a class=lnlinks href=#hl-48-13>13</a>
</span><span class=lnt id=hl-48-14><a class=lnlinks href=#hl-48-14>14</a>
</span><span class=lnt id=hl-48-15><a class=lnlinks href=#hl-48-15>15</a>
</span><span class=lnt id=hl-48-16><a class=lnlinks href=#hl-48-16>16</a>
</span><span class=lnt id=hl-48-17><a class=lnlinks href=#hl-48-17>17</a>
</span><span class=lnt id=hl-48-18><a class=lnlinks href=#hl-48-18>18</a>
</span><span class=lnt id=hl-48-19><a class=lnlinks href=#hl-48-19>19</a>
</span><span class=lnt id=hl-48-20><a class=lnlinks href=#hl-48-20>20</a>
</span><span class=lnt id=hl-48-21><a class=lnlinks href=#hl-48-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>test</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;except&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;else&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;finally&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>test</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># try</span>
</span></span><span class=line><span class=cl><span class=c1># except</span>
</span></span><span class=line><span class=cl><span class=c1># finally</span>
</span></span><span class=line><span class=cl><span class=c1># 1</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 2</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-49-1><a class=lnlinks href=#hl-49-1> 1</a>
</span><span class=lnt id=hl-49-2><a class=lnlinks href=#hl-49-2> 2</a>
</span><span class=lnt id=hl-49-3><a class=lnlinks href=#hl-49-3> 3</a>
</span><span class=lnt id=hl-49-4><a class=lnlinks href=#hl-49-4> 4</a>
</span><span class=lnt id=hl-49-5><a class=lnlinks href=#hl-49-5> 5</a>
</span><span class=lnt id=hl-49-6><a class=lnlinks href=#hl-49-6> 6</a>
</span><span class=lnt id=hl-49-7><a class=lnlinks href=#hl-49-7> 7</a>
</span><span class=lnt id=hl-49-8><a class=lnlinks href=#hl-49-8> 8</a>
</span><span class=lnt id=hl-49-9><a class=lnlinks href=#hl-49-9> 9</a>
</span><span class=lnt id=hl-49-10><a class=lnlinks href=#hl-49-10>10</a>
</span><span class=lnt id=hl-49-11><a class=lnlinks href=#hl-49-11>11</a>
</span><span class=lnt id=hl-49-12><a class=lnlinks href=#hl-49-12>12</a>
</span><span class=lnt id=hl-49-13><a class=lnlinks href=#hl-49-13>13</a>
</span><span class=lnt id=hl-49-14><a class=lnlinks href=#hl-49-14>14</a>
</span><span class=lnt id=hl-49-15><a class=lnlinks href=#hl-49-15>15</a>
</span><span class=lnt id=hl-49-16><a class=lnlinks href=#hl-49-16>16</a>
</span><span class=lnt id=hl-49-17><a class=lnlinks href=#hl-49-17>17</a>
</span><span class=lnt id=hl-49-18><a class=lnlinks href=#hl-49-18>18</a>
</span><span class=lnt id=hl-49-19><a class=lnlinks href=#hl-49-19>19</a>
</span><span class=lnt id=hl-49-20><a class=lnlinks href=#hl-49-20>20</a>
</span><span class=lnt id=hl-49-21><a class=lnlinks href=#hl-49-21>21</a>
</span><span class=lnt id=hl-49-22><a class=lnlinks href=#hl-49-22>22</a>
</span><span class=lnt id=hl-49-23><a class=lnlinks href=#hl-49-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>test</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span> <span class=o>=</span> <span class=mf>5.0</span> <span class=o>/</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;except&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;else&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;finally&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>test</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># try</span>
</span></span><span class=line><span class=cl><span class=c1># except</span>
</span></span><span class=line><span class=cl><span class=c1># finally</span>
</span></span><span class=line><span class=cl><span class=c1># 3</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 3</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-50-1><a class=lnlinks href=#hl-50-1> 1</a>
</span><span class=lnt id=hl-50-2><a class=lnlinks href=#hl-50-2> 2</a>
</span><span class=lnt id=hl-50-3><a class=lnlinks href=#hl-50-3> 3</a>
</span><span class=lnt id=hl-50-4><a class=lnlinks href=#hl-50-4> 4</a>
</span><span class=lnt id=hl-50-5><a class=lnlinks href=#hl-50-5> 5</a>
</span><span class=lnt id=hl-50-6><a class=lnlinks href=#hl-50-6> 6</a>
</span><span class=lnt id=hl-50-7><a class=lnlinks href=#hl-50-7> 7</a>
</span><span class=lnt id=hl-50-8><a class=lnlinks href=#hl-50-8> 8</a>
</span><span class=lnt id=hl-50-9><a class=lnlinks href=#hl-50-9> 9</a>
</span><span class=lnt id=hl-50-10><a class=lnlinks href=#hl-50-10>10</a>
</span><span class=lnt id=hl-50-11><a class=lnlinks href=#hl-50-11>11</a>
</span><span class=lnt id=hl-50-12><a class=lnlinks href=#hl-50-12>12</a>
</span><span class=lnt id=hl-50-13><a class=lnlinks href=#hl-50-13>13</a>
</span><span class=lnt id=hl-50-14><a class=lnlinks href=#hl-50-14>14</a>
</span><span class=lnt id=hl-50-15><a class=lnlinks href=#hl-50-15>15</a>
</span><span class=lnt id=hl-50-16><a class=lnlinks href=#hl-50-16>16</a>
</span><span class=lnt id=hl-50-17><a class=lnlinks href=#hl-50-17>17</a>
</span><span class=lnt id=hl-50-18><a class=lnlinks href=#hl-50-18>18</a>
</span><span class=lnt id=hl-50-19><a class=lnlinks href=#hl-50-19>19</a>
</span><span class=lnt id=hl-50-20><a class=lnlinks href=#hl-50-20>20</a>
</span><span class=lnt id=hl-50-21><a class=lnlinks href=#hl-50-21>21</a>
</span><span class=lnt id=hl-50-22><a class=lnlinks href=#hl-50-22>22</a>
</span><span class=lnt id=hl-50-23><a class=lnlinks href=#hl-50-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>test</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;except&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;else&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;finally&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>test</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># try</span>
</span></span><span class=line><span class=cl><span class=c1># try</span>
</span></span><span class=line><span class=cl><span class=c1># finally</span>
</span></span><span class=line><span class=cl><span class=c1># 3</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 4</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-51-1><a class=lnlinks href=#hl-51-1> 1</a>
</span><span class=lnt id=hl-51-2><a class=lnlinks href=#hl-51-2> 2</a>
</span><span class=lnt id=hl-51-3><a class=lnlinks href=#hl-51-3> 3</a>
</span><span class=lnt id=hl-51-4><a class=lnlinks href=#hl-51-4> 4</a>
</span><span class=lnt id=hl-51-5><a class=lnlinks href=#hl-51-5> 5</a>
</span><span class=lnt id=hl-51-6><a class=lnlinks href=#hl-51-6> 6</a>
</span><span class=lnt id=hl-51-7><a class=lnlinks href=#hl-51-7> 7</a>
</span><span class=lnt id=hl-51-8><a class=lnlinks href=#hl-51-8> 8</a>
</span><span class=lnt id=hl-51-9><a class=lnlinks href=#hl-51-9> 9</a>
</span><span class=lnt id=hl-51-10><a class=lnlinks href=#hl-51-10>10</a>
</span><span class=lnt id=hl-51-11><a class=lnlinks href=#hl-51-11>11</a>
</span><span class=lnt id=hl-51-12><a class=lnlinks href=#hl-51-12>12</a>
</span><span class=lnt id=hl-51-13><a class=lnlinks href=#hl-51-13>13</a>
</span><span class=lnt id=hl-51-14><a class=lnlinks href=#hl-51-14>14</a>
</span><span class=lnt id=hl-51-15><a class=lnlinks href=#hl-51-15>15</a>
</span><span class=lnt id=hl-51-16><a class=lnlinks href=#hl-51-16>16</a>
</span><span class=lnt id=hl-51-17><a class=lnlinks href=#hl-51-17>17</a>
</span><span class=lnt id=hl-51-18><a class=lnlinks href=#hl-51-18>18</a>
</span><span class=lnt id=hl-51-19><a class=lnlinks href=#hl-51-19>19</a>
</span><span class=lnt id=hl-51-20><a class=lnlinks href=#hl-51-20>20</a>
</span><span class=lnt id=hl-51-21><a class=lnlinks href=#hl-51-21>21</a>
</span><span class=lnt id=hl-51-22><a class=lnlinks href=#hl-51-22>22</a>
</span><span class=lnt id=hl-51-23><a class=lnlinks href=#hl-51-23>23</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>test</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>/</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;try&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;except&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;else&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;finally&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>test</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># try</span>
</span></span><span class=line><span class=cl><span class=c1># try</span>
</span></span><span class=line><span class=cl><span class=c1># else</span>
</span></span><span class=line><span class=cl><span class=c1># finally</span>
</span></span><span class=line><span class=cl><span class=c1># 3</span></span></span></code></pre></td></tr></table></div></div></div><h2 id=类 class=heading>类<a href=#%e7%b1%bb aria-labelledby=类><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p>python 的类变量和 C++的静态变量不同，并不是由类的所有对象共享。</p><p>类本身拥有自己的类变量（保存在内存），当一个 <code>TestClass</code> 类的对象被构造时，会将当前类变量拷贝一份给这个对象，当前类变量的值是多少，这个对象拷贝得到的类变量的值就是多少；而且，<strong>通过对象来修改类变量，并不会影响其他对象的类变量的值</strong>，因为大家都有各自的副本，<strong>更不会影响类本身所拥有的那个类变量的值</strong>；只有类自己才能改变类本身拥有的类变量的值。</p><p>对于 <strong>类数据属性</strong> 和 <strong>实例数据属性</strong>，可以总结为：</p><ul><li><strong>类数据属性</strong> 属于类本身，可以通过 <strong>类名</strong> 进行访问/修改</li><li>类数据属性也可以被类的所有实例访问/修改</li><li>在类定义之后，可以通过类名动态添加类数据属性，新增的类属性也被类和所有实例共有</li><li><strong>实例数据属性</strong> 只能通过实例访问</li><li>在实例生成后，还可以动态添加实例数据属性，但是这些实例数据属性只属于该实例</li></ul><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-52-1><a class=lnlinks href=#hl-52-1> 1</a>
</span><span class=lnt id=hl-52-2><a class=lnlinks href=#hl-52-2> 2</a>
</span><span class=lnt id=hl-52-3><a class=lnlinks href=#hl-52-3> 3</a>
</span><span class=lnt id=hl-52-4><a class=lnlinks href=#hl-52-4> 4</a>
</span><span class=lnt id=hl-52-5><a class=lnlinks href=#hl-52-5> 5</a>
</span><span class=lnt id=hl-52-6><a class=lnlinks href=#hl-52-6> 6</a>
</span><span class=lnt id=hl-52-7><a class=lnlinks href=#hl-52-7> 7</a>
</span><span class=lnt id=hl-52-8><a class=lnlinks href=#hl-52-8> 8</a>
</span><span class=lnt id=hl-52-9><a class=lnlinks href=#hl-52-9> 9</a>
</span><span class=lnt id=hl-52-10><a class=lnlinks href=#hl-52-10>10</a>
</span><span class=lnt id=hl-52-11><a class=lnlinks href=#hl-52-11>11</a>
</span><span class=lnt id=hl-52-12><a class=lnlinks href=#hl-52-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>TestClass</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># 类变量</span>
</span></span><span class=line><span class=cl>    <span class=n>val1</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1># 成员变量</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>val2</span> <span class=o>=</span> <span class=mi>200</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fcn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>val</span><span class=o>=</span><span class=mi>400</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>val3</span> <span class=o>=</span> <span class=mi>300</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>val4</span> <span class=o>=</span> <span class=n>val</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>val5</span> <span class=o>=</span> <span class=mi>500</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-53-1><a class=lnlinks href=#hl-53-1>1</a>
</span><span class=lnt id=hl-53-2><a class=lnlinks href=#hl-53-2>2</a>
</span><span class=lnt id=hl-53-3><a class=lnlinks href=#hl-53-3>3</a>
</span><span class=lnt id=hl-53-4><a class=lnlinks href=#hl-53-4>4</a>
</span><span class=lnt id=hl-53-5><a class=lnlinks href=#hl-53-5>5</a>
</span><span class=lnt id=hl-53-6><a class=lnlinks href=#hl-53-6>6</a>
</span><span class=lnt id=hl-53-7><a class=lnlinks href=#hl-53-7>7</a>
</span><span class=lnt id=hl-53-8><a class=lnlinks href=#hl-53-8>8</a>
</span><span class=lnt id=hl-53-9><a class=lnlinks href=#hl-53-9>9</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>inst</span> <span class=o>=</span> <span class=n>TestClass</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>TestClass</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 100</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 100</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst</span><span class=o>.</span><span class=n>val2</span><span class=p>)</span>  <span class=c1># 200</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst</span><span class=o>.</span><span class=n>val3</span><span class=p>)</span>  <span class=c1># &#39;TestClass&#39; object has no attribute &#39;val3&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst</span><span class=o>.</span><span class=n>val4</span><span class=p>)</span>  <span class=c1># &#39;TestClass&#39; object has no attribute &#39;val4&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst</span><span class=o>.</span><span class=n>val5</span><span class=p>)</span>  <span class=c1># &#39;TestClass&#39; object has no attribute &#39;val5&#39;</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-54-1><a class=lnlinks href=#hl-54-1> 1</a>
</span><span class=lnt id=hl-54-2><a class=lnlinks href=#hl-54-2> 2</a>
</span><span class=lnt id=hl-54-3><a class=lnlinks href=#hl-54-3> 3</a>
</span><span class=lnt id=hl-54-4><a class=lnlinks href=#hl-54-4> 4</a>
</span><span class=lnt id=hl-54-5><a class=lnlinks href=#hl-54-5> 5</a>
</span><span class=lnt id=hl-54-6><a class=lnlinks href=#hl-54-6> 6</a>
</span><span class=lnt id=hl-54-7><a class=lnlinks href=#hl-54-7> 7</a>
</span><span class=lnt id=hl-54-8><a class=lnlinks href=#hl-54-8> 8</a>
</span><span class=lnt id=hl-54-9><a class=lnlinks href=#hl-54-9> 9</a>
</span><span class=lnt id=hl-54-10><a class=lnlinks href=#hl-54-10>10</a>
</span><span class=lnt id=hl-54-11><a class=lnlinks href=#hl-54-11>11</a>
</span><span class=lnt id=hl-54-12><a class=lnlinks href=#hl-54-12>12</a>
</span><span class=lnt id=hl-54-13><a class=lnlinks href=#hl-54-13>13</a>
</span><span class=lnt id=hl-54-14><a class=lnlinks href=#hl-54-14>14</a>
</span><span class=lnt id=hl-54-15><a class=lnlinks href=#hl-54-15>15</a>
</span><span class=lnt id=hl-54-16><a class=lnlinks href=#hl-54-16>16</a>
</span><span class=lnt id=hl-54-17><a class=lnlinks href=#hl-54-17>17</a>
</span><span class=lnt id=hl-54-18><a class=lnlinks href=#hl-54-18>18</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>inst1</span> <span class=o>=</span> <span class=n>TestClass</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>inst2</span> <span class=o>=</span> <span class=n>TestClass</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst1</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>inst1</span><span class=o>.</span><span class=n>val1</span> <span class=o>=</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst1</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 1000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>TestClass</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 100</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst2</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 100</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>TestClass</span><span class=o>.</span><span class=n>val1</span> <span class=o>=</span> <span class=mi>2000</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>TestClass</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 2000</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst1</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 1000     被重新赋值后，就跟类变量没关系了</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst2</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 2000     没有重新赋值，跟类变量保存一致</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>inst3</span> <span class=o>=</span> <span class=n>TestClass</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>inst3</span><span class=o>.</span><span class=n>val1</span><span class=p>)</span>  <span class=c1># 2000</span></span></span></code></pre></td></tr></table></div></div></div><hr><p><strong>不可变对象与可变对象</strong></p><p>python 内置的一些类型中</p><ul><li><p>可变对象：<code>list</code> <code>dict</code> <code>set</code></p></li><li><p>不可变对象：<code>tuple</code> <code>string</code> <code>int</code> <code>float</code> <code>bool</code></p></li></ul><p>Python 中万物皆对象，<strong>每个对象包含 3 个属性，id，type，value</strong></p><ul><li><p><strong>id</strong> ：对象地址，可以通过内置函数 <code>id()</code> 查看对象引用的地址。</p></li><li><p><strong>type</strong> ：对象类型，可以通过内置函数 <code>type()</code> 查看对象的类型。</p></li><li><p><strong>value</strong> ：对象的值</p></li></ul><hr><p><strong><code>is</code> 和 <code>==</code></strong></p><ul><li><strong><code>is</code> 比较的是 id 是不是一样</strong></li><li><strong><code>==</code> 比较的是值是不是一样。</strong></li></ul><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-55-1><a class=lnlinks href=#hl-55-1> 1</a>
</span><span class=lnt id=hl-55-2><a class=lnlinks href=#hl-55-2> 2</a>
</span><span class=lnt id=hl-55-3><a class=lnlinks href=#hl-55-3> 3</a>
</span><span class=lnt id=hl-55-4><a class=lnlinks href=#hl-55-4> 4</a>
</span><span class=lnt id=hl-55-5><a class=lnlinks href=#hl-55-5> 5</a>
</span><span class=lnt id=hl-55-6><a class=lnlinks href=#hl-55-6> 6</a>
</span><span class=lnt id=hl-55-7><a class=lnlinks href=#hl-55-7> 7</a>
</span><span class=lnt id=hl-55-8><a class=lnlinks href=#hl-55-8> 8</a>
</span><span class=lnt id=hl-55-9><a class=lnlinks href=#hl-55-9> 9</a>
</span><span class=lnt id=hl-55-10><a class=lnlinks href=#hl-55-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>a</span>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>a</span><span class=p>))</span>  <span class=c1># 140729241962160</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>b</span><span class=p>))</span>  <span class=c1># 140729241962160</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>c</span><span class=p>))</span>  <span class=c1># 140729241962160</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>id</span><span class=p>(</span><span class=n>d</span><span class=p>))</span>  <span class=c1># 2070028299024</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>a</span> <span class=ow>is</span> <span class=n>d</span><span class=p>)</span>  <span class=c1># False</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>a</span> <span class=o>==</span> <span class=n>d</span><span class=p>)</span>  <span class=c1># True</span></span></span></code></pre></td></tr></table></div></div></div><ul><li>判断 <code>a is d</code> 的时候，实际上比较的是 <code>id(d)==id(d)</code>，结果为 False。</li><li>判断 <code>a==d</code> 的时候，实际上比较的是 <code>id(a)</code> 这个地址指向的值是不是和 <code>id(d)</code> 这个地址指向值一样。结果为 True。</li></ul><p>python 为了实现对内存的有效利用，对小整数 [-5,256] 内的整数会进行缓存，不在该范围内的则不会缓存。</p><p><strong>注意在 python 交互式界面有内存池缓存机制，只适用于-5~256，在 python 脚本编程中则没有这个限制:</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-56-1><a class=lnlinks href=#hl-56-1>1</a>
</span><span class=lnt id=hl-56-2><a class=lnlinks href=#hl-56-2>2</a>
</span><span class=lnt id=hl-56-3><a class=lnlinks href=#hl-56-3>3</a>
</span><span class=lnt id=hl-56-4><a class=lnlinks href=#hl-56-4>4</a>
</span><span class=lnt id=hl-56-5><a class=lnlinks href=#hl-56-5>5</a>
</span><span class=lnt id=hl-56-6><a class=lnlinks href=#hl-56-6>6</a>
</span><span class=lnt id=hl-56-7><a class=lnlinks href=#hl-56-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>255</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=mi>255</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>a</span> <span class=ow>is</span> <span class=n>b</span><span class=p>)</span>  <span class=c1># True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=mi>257</span>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=mi>257</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>c</span> <span class=ow>is</span> <span class=n>d</span><span class=p>)</span>  <span class=c1># True</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Python console</strong>：</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-57-1><a class=lnlinks href=#hl-57-1>1</a>
</span><span class=lnt id=hl-57-2><a class=lnlinks href=#hl-57-2>2</a>
</span><span class=lnt id=hl-57-3><a class=lnlinks href=#hl-57-3>3</a>
</span><span class=lnt id=hl-57-4><a class=lnlinks href=#hl-57-4>4</a>
</span><span class=lnt id=hl-57-5><a class=lnlinks href=#hl-57-5>5</a>
</span><span class=lnt id=hl-57-6><a class=lnlinks href=#hl-57-6>6</a>
</span><span class=lnt id=hl-57-7><a class=lnlinks href=#hl-57-7>7</a>
</span><span class=lnt id=hl-57-8><a class=lnlinks href=#hl-57-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=mi>255</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=mi>255</span>
</span></span><span class=line><span class=cl><span class=nb>id</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>10</span><span class=p>]:</span> <span class=mi>2922684620976</span>
</span></span><span class=line><span class=cl><span class=nb>id</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>11</span><span class=p>]:</span> <span class=mi>2922684620976</span>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=ow>is</span> <span class=n>b</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>4</span><span class=p>]:</span> <span class=kc>True</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-58-1><a class=lnlinks href=#hl-58-1>1</a>
</span><span class=lnt id=hl-58-2><a class=lnlinks href=#hl-58-2>2</a>
</span><span class=lnt id=hl-58-3><a class=lnlinks href=#hl-58-3>3</a>
</span><span class=lnt id=hl-58-4><a class=lnlinks href=#hl-58-4>4</a>
</span><span class=lnt id=hl-58-5><a class=lnlinks href=#hl-58-5>5</a>
</span><span class=lnt id=hl-58-6><a class=lnlinks href=#hl-58-6>6</a>
</span><span class=lnt id=hl-58-7><a class=lnlinks href=#hl-58-7>7</a>
</span><span class=lnt id=hl-58-8><a class=lnlinks href=#hl-58-8>8</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=mi>257</span>
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=mi>257</span>
</span></span><span class=line><span class=cl><span class=nb>id</span><span class=p>(</span><span class=n>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>8</span><span class=p>]:</span> <span class=mi>2920614082448</span>
</span></span><span class=line><span class=cl><span class=nb>id</span><span class=p>(</span><span class=n>d</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>9</span><span class=p>]:</span> <span class=mi>2920614081904</span>    
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=ow>is</span> <span class=n>d</span>
</span></span><span class=line><span class=cl><span class=n>Out</span><span class=p>[</span><span class=mi>7</span><span class=p>]:</span> <span class=kc>False</span></span></span></code></pre></td></tr></table></div></div></div><h3 id=类属性 class=heading>类属性<a href=#%e7%b1%bb%e5%b1%9e%e6%80%a7 aria-labelledby=类属性><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-59-1><a class=lnlinks href=#hl-59-1> 1</a>
</span><span class=lnt id=hl-59-2><a class=lnlinks href=#hl-59-2> 2</a>
</span><span class=lnt id=hl-59-3><a class=lnlinks href=#hl-59-3> 3</a>
</span><span class=lnt id=hl-59-4><a class=lnlinks href=#hl-59-4> 4</a>
</span><span class=lnt id=hl-59-5><a class=lnlinks href=#hl-59-5> 5</a>
</span><span class=lnt id=hl-59-6><a class=lnlinks href=#hl-59-6> 6</a>
</span><span class=lnt id=hl-59-7><a class=lnlinks href=#hl-59-7> 7</a>
</span><span class=lnt id=hl-59-8><a class=lnlinks href=#hl-59-8> 8</a>
</span><span class=lnt id=hl-59-9><a class=lnlinks href=#hl-59-9> 9</a>
</span><span class=lnt id=hl-59-10><a class=lnlinks href=#hl-59-10>10</a>
</span><span class=lnt id=hl-59-11><a class=lnlinks href=#hl-59-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Person</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>tall</span> <span class=o>=</span> <span class=mi>180</span>
</span></span><span class=line><span class=cl>    <span class=n>hobbies</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>age</span><span class=p>,</span> <span class=n>weight</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>age</span> <span class=o>=</span> <span class=n>age</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>weight</span> <span class=o>=</span> <span class=n>weight</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>inform</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%s</span><span class=s1> is </span><span class=si>%s</span><span class=s1> weights </span><span class=si>%s</span><span class=s1>&#39;</span> <span class=o>%</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>age</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>weight</span><span class=p>))</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>特殊的类属性：对于所有的类，都有一组特殊的属性</strong></p><p><code>__name__</code>：类的名字（字符串）</p><p><code>__doc__ </code>：类的文档字符串</p><p><code>__bases__</code>：类的所有父类组成的元组</p><p><code>__dict__</code>：类的属性组成的字典</p><p><code>__module__</code>：类所属的模块</p><p><code>__class__</code>：类对象的类型</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-60-1><a class=lnlinks href=#hl-60-1>1</a>
</span><span class=lnt id=hl-60-2><a class=lnlinks href=#hl-60-2>2</a>
</span><span class=lnt id=hl-60-3><a class=lnlinks href=#hl-60-3>3</a>
</span><span class=lnt id=hl-60-4><a class=lnlinks href=#hl-60-4>4</a>
</span><span class=lnt id=hl-60-5><a class=lnlinks href=#hl-60-5>5</a>
</span><span class=lnt id=hl-60-6><a class=lnlinks href=#hl-60-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=vm>__name__</span><span class=p>)</span>  <span class=c1># Person</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>  <span class=c1># None</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=vm>__bases__</span><span class=p>)</span>  <span class=c1># (&lt;class &#39;object&#39;&gt;,)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=fm>__dir__</span><span class=p>)</span>  <span class=c1># &lt;method &#39;__dir__&#39; of &#39;object&#39; objects&gt;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=vm>__module__</span><span class=p>)</span>  <span class=c1># __main__</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=vm>__class__</span><span class=p>)</span>  <span class=c1># &lt;class &#39;type&#39;&gt;</span></span></span></code></pre></td></tr></table></div></div></div><blockquote class=blockquote><p><strong><code>__dict__</code> 与 <code>dir()</code> 区别</strong></p><ul><li><code>__dict__</code> 属性：<ul><li><strong>类的 <code>__dict__</code></strong> 存储 <strong>所有实例共享的变量和函数</strong>(类属性，方法等)，类的 <code>__dict__</code> 并 <strong>不包含其父类的属性</strong>。</li><li><strong>实例的 <code>__dict__</code> 属性</strong> 仅仅是那个实例的 <strong>实例属性的集合</strong>，并不包含该实例的所有有效属性，正是因为实例的 <code>__dict__</code> 属性，每个实例的实例属性才会互不影响。</li><li>python 一切皆对象，<strong>并不是所有对象都拥有 <code>__dict__</code> 属性</strong>。许多内建类型就没有 <code>__dict__</code> 属性，如 <code>list</code>，此时就需要用 <code>dir()</code> 来列出对象的所有属性。</li></ul></li><li><code>dir()</code> 函数：
<code>dir()</code> 是 Python 提供的一个 API 函数，<code>dir()</code> 函数会自动寻找一个对象的所有属性(<strong>包括从父类中继承的属性</strong>)。
<strong>所以如果想获取一个对象所有有效属性，应使用 <code>dir()</code></strong>。</li></ul></blockquote><hr><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-61-1><a class=lnlinks href=#hl-61-1> 1</a>
</span><span class=lnt id=hl-61-2><a class=lnlinks href=#hl-61-2> 2</a>
</span><span class=lnt id=hl-61-3><a class=lnlinks href=#hl-61-3> 3</a>
</span><span class=lnt id=hl-61-4><a class=lnlinks href=#hl-61-4> 4</a>
</span><span class=lnt id=hl-61-5><a class=lnlinks href=#hl-61-5> 5</a>
</span><span class=lnt id=hl-61-6><a class=lnlinks href=#hl-61-6> 6</a>
</span><span class=lnt id=hl-61-7><a class=lnlinks href=#hl-61-7> 7</a>
</span><span class=lnt id=hl-61-8><a class=lnlinks href=#hl-61-8> 8</a>
</span><span class=lnt id=hl-61-9><a class=lnlinks href=#hl-61-9> 9</a>
</span><span class=lnt id=hl-61-10><a class=lnlinks href=#hl-61-10>10</a>
</span><span class=lnt id=hl-61-11><a class=lnlinks href=#hl-61-11>11</a>
</span><span class=lnt id=hl-61-12><a class=lnlinks href=#hl-61-12>12</a>
</span><span class=lnt id=hl-61-13><a class=lnlinks href=#hl-61-13>13</a>
</span><span class=lnt id=hl-61-14><a class=lnlinks href=#hl-61-14>14</a>
</span><span class=lnt id=hl-61-15><a class=lnlinks href=#hl-61-15>15</a>
</span><span class=lnt id=hl-61-16><a class=lnlinks href=#hl-61-16>16</a>
</span><span class=lnt id=hl-61-17><a class=lnlinks href=#hl-61-17>17</a>
</span><span class=lnt id=hl-61-18><a class=lnlinks href=#hl-61-18>18</a>
</span><span class=lnt id=hl-61-19><a class=lnlinks href=#hl-61-19>19</a>
</span><span class=lnt id=hl-61-20><a class=lnlinks href=#hl-61-20>20</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 类数据属性属于类本身，可以通过类名进行访问/修改，此处添加&#34;football&#34;、&#34;woman&#34;两个</span>
</span></span><span class=line><span class=cl><span class=n>Person</span><span class=o>.</span><span class=n>hobbies</span><span class=o>.</span><span class=n>extend</span><span class=p>([</span><span class=s2>&#34;football&#34;</span><span class=p>,</span> <span class=s2>&#34;woman&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>hobbies</span><span class=p>)</span>  <span class=c1># [&#39;football&#39;, &#39;woman&#39;]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 在类定义之后，可以通过类名动态添加类数据属性，新增的类属性也被类和所有实例共有</span>
</span></span><span class=line><span class=cl><span class=n>Person</span><span class=o>.</span><span class=n>hobbies2</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;reading&#34;</span><span class=p>,</span> <span class=s2>&#34;jogging&#34;</span><span class=p>,</span> <span class=s2>&#34;swimming&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>hobbies2</span><span class=p>)</span>  <span class=c1># [&#39;reading&#39;, &#39;jogging&#39;, &#39;swimming&#39;]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 实例数据属性只能通过实例访问</span>
</span></span><span class=line><span class=cl><span class=n>Bruce</span> <span class=o>=</span> <span class=n>Person</span><span class=p>(</span><span class=s2>&#34;Bruce&#34;</span><span class=p>,</span> <span class=mi>25</span><span class=p>,</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>Bruce</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2> is </span><span class=si>{</span><span class=n>Bruce</span><span class=o>.</span><span class=n>age</span><span class=si>}</span><span class=s2> years old&#34;</span><span class=p>)</span>  <span class=c1># Bruce is 25 years old</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 在实例生成后，还可以动态添加实例数据属性，但是这些实例数据属性只属于该实例</span>
</span></span><span class=line><span class=cl><span class=n>Bruce</span><span class=o>.</span><span class=n>gender</span> <span class=o>=</span> <span class=s2>&#34;male&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=si>{Bruce.name}</span><span class=s2> is </span><span class=si>{Bruce.gender}</span><span class=s2>&#34;</span><span class=p>)</span>  <span class=c1># Bruce is male</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># class instance can access class attribute</span>
</span></span><span class=line><span class=cl><span class=n>Bruce</span><span class=o>.</span><span class=n>hobbies</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;C#&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Bruce</span><span class=o>.</span><span class=n>hobbies</span><span class=p>)</span>  <span class=c1># [&#39;football&#39;, &#39;woman&#39;, &#39;C#&#39;]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Bruce</span><span class=o>.</span><span class=n>hobbies2</span><span class=p>)</span>  <span class=c1># [&#39;reading&#39;, &#39;jogging&#39;, &#39;swimming&#39;]</span></span></span></code></pre></td></tr></table></div></div></div><p>类数据属性属于类本身，被所有该类的实例共享并且，通过实例可以去访问/修改类属性。但是，在通过实例中访问类属性的时候一定要谨慎，因为可能出现 <strong>属性 &ldquo;隐藏&rdquo;</strong> 的情况</p><p>对于 <strong>不可变类型</strong> 的类属性，<strong>隐藏属性</strong> 可以总结为：</p><ul><li>对于 <strong>不可变类型</strong> 的类属性 <code>person.tall</code>，可以通过实例 <code>Bruce</code> 进行访问，并且 &ldquo;<code>person.tall is Bruce.tall</code>&rdquo;</li><li>当通过实例赋值/修改 tall 属性的时候，将为实例 Bruce 新建一个 tall 实例属性，这时，“<code>person.tall is not Bruce.tall</code>”</li><li>当通过 &ldquo;<code>del Bruce.tall</code>&rdquo; 语句删除实例的 tall 属性后，再次成为 &ldquo;<code>person.tall is Bruce.tall</code>&rdquo;</li></ul><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-62-1><a class=lnlinks href=#hl-62-1> 1</a>
</span><span class=lnt id=hl-62-2><a class=lnlinks href=#hl-62-2> 2</a>
</span><span class=lnt id=hl-62-3><a class=lnlinks href=#hl-62-3> 3</a>
</span><span class=lnt id=hl-62-4><a class=lnlinks href=#hl-62-4> 4</a>
</span><span class=lnt id=hl-62-5><a class=lnlinks href=#hl-62-5> 5</a>
</span><span class=lnt id=hl-62-6><a class=lnlinks href=#hl-62-6> 6</a>
</span><span class=lnt id=hl-62-7><a class=lnlinks href=#hl-62-7> 7</a>
</span><span class=lnt id=hl-62-8><a class=lnlinks href=#hl-62-8> 8</a>
</span><span class=lnt id=hl-62-9><a class=lnlinks href=#hl-62-9> 9</a>
</span><span class=lnt id=hl-62-10><a class=lnlinks href=#hl-62-10>10</a>
</span><span class=lnt id=hl-62-11><a class=lnlinks href=#hl-62-11>11</a>
</span><span class=lnt id=hl-62-12><a class=lnlinks href=#hl-62-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 对于不可变类型的类属性person.tall，可以通过实例Bruce进行访问</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>tall</span> <span class=ow>is</span> <span class=n>Bruce</span><span class=o>.</span><span class=n>tall</span><span class=p>)</span>  <span class=c1># True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重新赋值或者修改</span>
</span></span><span class=line><span class=cl><span class=n>Bruce</span><span class=o>.</span><span class=n>tall</span> <span class=o>=</span> <span class=mi>185</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Bruce</span><span class=o>.</span><span class=n>tall</span><span class=p>)</span>  <span class=c1># 185</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>tall</span> <span class=ow>is</span> <span class=n>Bruce</span><span class=o>.</span><span class=n>tall</span><span class=p>)</span>  <span class=c1># False</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 再次删除实例的赋值</span>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>Bruce</span><span class=o>.</span><span class=n>tall</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Bruce</span><span class=o>.</span><span class=n>tall</span><span class=p>)</span>  <span class=c1># 180</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>tall</span> <span class=ow>is</span> <span class=n>Bruce</span><span class=o>.</span><span class=n>tall</span><span class=p>)</span>  <span class=c1># True</span></span></span></code></pre></td></tr></table></div></div></div><p>对于 <strong>可变类型</strong> 的类属性，<strong>隐藏属性</strong> 可以总结为：</p><ul><li>同样对于 <strong>可变类型</strong> 的类属性 <code>person.hobbies</code>，可以通过实例 <code>Bruce</code> 进行访问，并且 &ldquo;<code>person.hobbies is Bruce hobbies</code>&rdquo;</li><li>当通过实例赋值 <code>hobbies</code> 属性的时候，都将为实例 <code>Bruce</code> 新建一个 <code>hobbies</code> 实例属性，这时，“<code>person.hobbies is not Bruce hobbies</code>”</li><li>当通过 &ldquo;<code>del Bruce. hobbies</code>&rdquo; 语句删除实例的 <code>hobbies</code> 属性后，再次成为 &ldquo;<code>person. hobbies is Bruce hobbies</code>&rdquo;</li><li>当通过实例修改 <code>hobbies</code> 属性的时候，将修改 <code>Bruce. hobbies</code> 指向的内存地址（即 <code>person.hobbies</code>），此时，“<code>person.hobbies is Bruce. hobbies</code>”</li></ul><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-63-1><a class=lnlinks href=#hl-63-1> 1</a>
</span><span class=lnt id=hl-63-2><a class=lnlinks href=#hl-63-2> 2</a>
</span><span class=lnt id=hl-63-3><a class=lnlinks href=#hl-63-3> 3</a>
</span><span class=lnt id=hl-63-4><a class=lnlinks href=#hl-63-4> 4</a>
</span><span class=lnt id=hl-63-5><a class=lnlinks href=#hl-63-5> 5</a>
</span><span class=lnt id=hl-63-6><a class=lnlinks href=#hl-63-6> 6</a>
</span><span class=lnt id=hl-63-7><a class=lnlinks href=#hl-63-7> 7</a>
</span><span class=lnt id=hl-63-8><a class=lnlinks href=#hl-63-8> 8</a>
</span><span class=lnt id=hl-63-9><a class=lnlinks href=#hl-63-9> 9</a>
</span><span class=lnt id=hl-63-10><a class=lnlinks href=#hl-63-10>10</a>
</span><span class=lnt id=hl-63-11><a class=lnlinks href=#hl-63-11>11</a>
</span><span class=lnt id=hl-63-12><a class=lnlinks href=#hl-63-12>12</a>
</span><span class=lnt id=hl-63-13><a class=lnlinks href=#hl-63-13>13</a>
</span><span class=lnt id=hl-63-14><a class=lnlinks href=#hl-63-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># 对于可变类型的类属性person.hobbies，可以通过实例Bruce进行访问</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>hobbies</span> <span class=ow>is</span> <span class=n>Bruce</span><span class=o>.</span><span class=n>hobbies</span><span class=p>)</span>  <span class=c1># True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Bruce</span><span class=o>.</span><span class=n>hobbies</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&#34;CSS&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>hobbies</span> <span class=ow>is</span> <span class=n>Bruce</span><span class=o>.</span><span class=n>hobbies</span><span class=p>)</span>  <span class=c1># True</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Person</span><span class=o>.</span><span class=n>hobbies</span><span class=p>)</span>  <span class=c1># [&#39;football&#39;, &#39;woman&#39;, &#39;C#&#39;, &#39;CSS&#39;]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Will</span> <span class=o>=</span> <span class=n>Person</span><span class=p>(</span><span class=s2>&#34;Will&#34;</span><span class=p>,</span> <span class=mi>27</span><span class=p>,</span> <span class=mi>60</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>Will</span><span class=o>.</span><span class=n>name</span><span class=si>}</span><span class=s2> is </span><span class=si>{</span><span class=n>Will</span><span class=o>.</span><span class=n>age</span><span class=si>}</span><span class=s2> years old&#34;</span><span class=p>)</span> <span class=c1># Will is 27 years old</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Will shares the same class attribute with wilber</span>
</span></span><span class=line><span class=cl><span class=c1># Will don&#39;t have the &#34;gender&#34; attribute that belongs to wilber</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Will</span><span class=o>.</span><span class=n>hobbies</span><span class=p>)</span>  <span class=c1># [&#39;football&#39;, &#39;woman&#39;, &#39;C#&#39;, &#39;CSS&#39;]</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Will</span><span class=o>.</span><span class=n>gender</span><span class=p>)</span>  <span class=c1># AttributeError: &#39;Person&#39; object has no attribute &#39;gender&#39;</span></span></span></code></pre></td></tr></table></div></div></div><p>注意，虽然通过实例可以访问类属性，但是，不建议这么做，最好还是通过类名来访问类属性，从而避免属性隐藏带来的不必要麻烦</p><hr><p><strong><code>__del__</code></strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-64-1><a class=lnlinks href=#hl-64-1> 1</a>
</span><span class=lnt id=hl-64-2><a class=lnlinks href=#hl-64-2> 2</a>
</span><span class=lnt id=hl-64-3><a class=lnlinks href=#hl-64-3> 3</a>
</span><span class=lnt id=hl-64-4><a class=lnlinks href=#hl-64-4> 4</a>
</span><span class=lnt id=hl-64-5><a class=lnlinks href=#hl-64-5> 5</a>
</span><span class=lnt id=hl-64-6><a class=lnlinks href=#hl-64-6> 6</a>
</span><span class=lnt id=hl-64-7><a class=lnlinks href=#hl-64-7> 7</a>
</span><span class=lnt id=hl-64-8><a class=lnlinks href=#hl-64-8> 8</a>
</span><span class=lnt id=hl-64-9><a class=lnlinks href=#hl-64-9> 9</a>
</span><span class=lnt id=hl-64-10><a class=lnlinks href=#hl-64-10>10</a>
</span><span class=lnt id=hl-64-11><a class=lnlinks href=#hl-64-11>11</a>
</span><span class=lnt id=hl-64-12><a class=lnlinks href=#hl-64-12>12</a>
</span><span class=lnt id=hl-64-13><a class=lnlinks href=#hl-64-13>13</a>
</span><span class=lnt id=hl-64-14><a class=lnlinks href=#hl-64-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Test</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># 当内存不需要的时候调用这个删除方法，python解释器自动调用</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__del__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Over&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>t1</span> <span class=o>=</span> <span class=n>Test</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>t2</span> <span class=o>=</span> <span class=n>t1</span>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>t1</span>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>t2</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;==========&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Over</span>
</span></span><span class=line><span class=cl><span class=c1># ==========</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-65-1><a class=lnlinks href=#hl-65-1> 1</a>
</span><span class=lnt id=hl-65-2><a class=lnlinks href=#hl-65-2> 2</a>
</span><span class=lnt id=hl-65-3><a class=lnlinks href=#hl-65-3> 3</a>
</span><span class=lnt id=hl-65-4><a class=lnlinks href=#hl-65-4> 4</a>
</span><span class=lnt id=hl-65-5><a class=lnlinks href=#hl-65-5> 5</a>
</span><span class=lnt id=hl-65-6><a class=lnlinks href=#hl-65-6> 6</a>
</span><span class=lnt id=hl-65-7><a class=lnlinks href=#hl-65-7> 7</a>
</span><span class=lnt id=hl-65-8><a class=lnlinks href=#hl-65-8> 8</a>
</span><span class=lnt id=hl-65-9><a class=lnlinks href=#hl-65-9> 9</a>
</span><span class=lnt id=hl-65-10><a class=lnlinks href=#hl-65-10>10</a>
</span><span class=lnt id=hl-65-11><a class=lnlinks href=#hl-65-11>11</a>
</span><span class=lnt id=hl-65-12><a class=lnlinks href=#hl-65-12>12</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Test</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># 当内存不需要的时候调用这个删除方法，python解释器自动调用</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__del__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Over&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>t1</span> <span class=o>=</span> <span class=n>Test</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>t2</span> <span class=o>=</span> <span class=n>t1</span>
</span></span><span class=line><span class=cl><span class=k>del</span> <span class=n>dog1</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;==========&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ==========</span>
</span></span><span class=line><span class=cl><span class=c1># Over</span></span></span></code></pre></td></tr></table></div></div></div><p>当删除了 <code>t1</code>，内存空间还没有结束，还不会调用 <code>__del__</code> 方法，当调用完最后一条语句时，内存空间被释放，调用 <code>__del__</code> 方法</p><h3 id=类-class-的访问控制 class=heading>类 class 的访问控制<a href=#%e7%b1%bb-class-%e7%9a%84%e8%ae%bf%e9%97%ae%e6%8e%a7%e5%88%b6 aria-labelledby=类-class-的访问控制><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>&ldquo;<code>_</code>&rdquo; 和 &ldquo;<code>__</code>&rdquo; 的使用 更多的是一种规范/约定，并没有真正达到限制的目的</p><p><strong>单下划线 &ldquo;<code>_</code>&rdquo;</strong></p><p>以单下划线开头的表示的是 <strong>protected</strong> 类型的变量，即只能 <strong>允许其本身与子类</strong> 进行访问；同时表示弱内部变量标示，<strong>如 &ldquo;<code>from moduleName import *</code> " 将不会引入以单下划线 &ldquo;<code>_</code>&rdquo; 开头的函数</strong>。</p><p><strong>双下划线 &ldquo;<code>__</code>&rdquo;</strong></p><p>双下划线的表示的是 <strong>private</strong> 类型的变量。只能是 <strong>允许这个类本身</strong> 进行访问了，连子类也不可以，这类属性在运行时属性名会加上单下划线和类名。</p><ul><li><p>对于 Python 中的类属性，可以通过双下划线 <strong>"<code>__</code>&rdquo;</strong> 来实现 <strong>一定程度的私有化</strong>，因为双下划线开头的属性在运行时会被 &ldquo;混淆&rdquo;（mangling）</p></li><li><p>双下划线的另一个重要的目地是，避免子类对父类同名属性的冲突</p></li><li><p>单下划线，<strong>可被重写</strong>，调用 <strong>子类方法</strong></p></li><li><p>双下划线，<strong>不能被重写</strong>，调用的还是 <strong>父类方法</strong></p></li></ul><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-66-1><a class=lnlinks href=#hl-66-1> 1</a>
</span><span class=lnt id=hl-66-2><a class=lnlinks href=#hl-66-2> 2</a>
</span><span class=lnt id=hl-66-3><a class=lnlinks href=#hl-66-3> 3</a>
</span><span class=lnt id=hl-66-4><a class=lnlinks href=#hl-66-4> 4</a>
</span><span class=lnt id=hl-66-5><a class=lnlinks href=#hl-66-5> 5</a>
</span><span class=lnt id=hl-66-6><a class=lnlinks href=#hl-66-6> 6</a>
</span><span class=lnt id=hl-66-7><a class=lnlinks href=#hl-66-7> 7</a>
</span><span class=lnt id=hl-66-8><a class=lnlinks href=#hl-66-8> 8</a>
</span><span class=lnt id=hl-66-9><a class=lnlinks href=#hl-66-9> 9</a>
</span><span class=lnt id=hl-66-10><a class=lnlinks href=#hl-66-10>10</a>
</span><span class=lnt id=hl-66-11><a class=lnlinks href=#hl-66-11>11</a>
</span><span class=lnt id=hl-66-12><a class=lnlinks href=#hl-66-12>12</a>
</span><span class=lnt id=hl-66-13><a class=lnlinks href=#hl-66-13>13</a>
</span><span class=lnt id=hl-66-14><a class=lnlinks href=#hl-66-14>14</a>
</span><span class=lnt id=hl-66-15><a class=lnlinks href=#hl-66-15>15</a>
</span><span class=lnt id=hl-66-16><a class=lnlinks href=#hl-66-16>16</a>
</span><span class=lnt id=hl-66-17><a class=lnlinks href=#hl-66-17>17</a>
</span><span class=lnt id=hl-66-18><a class=lnlinks href=#hl-66-18>18</a>
</span><span class=lnt id=hl-66-19><a class=lnlinks href=#hl-66-19>19</a>
</span><span class=lnt id=hl-66-20><a class=lnlinks href=#hl-66-20>20</a>
</span><span class=lnt id=hl-66-21><a class=lnlinks href=#hl-66-21>21</a>
</span><span class=lnt id=hl-66-22><a class=lnlinks href=#hl-66-22>22</a>
</span><span class=lnt id=hl-66-23><a class=lnlinks href=#hl-66-23>23</a>
</span><span class=lnt id=hl-66-24><a class=lnlinks href=#hl-66-24>24</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__private</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>public</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__private</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;A.__private()&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>public</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;A.public()&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__private</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;B.__private()&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>public</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;B.public()&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>B</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># A.__private()</span>
</span></span><span class=line><span class=cl><span class=c1># B.public()</span></span></span></code></pre></td></tr></table></div></div></div><h3 id=类-class-的继承 class=heading>类 class 的继承<a href=#%e7%b1%bb-class-%e7%9a%84%e7%bb%a7%e6%89%bf aria-labelledby=类-class-的继承><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>在 Python 中，同时支持 <strong>单继承</strong> 与 <strong>多继承</strong></p><p>实现继承之后，<strong>子类将继承父类的属性(除了文档字符串)，也可以使用内建函数 <code>insubclass()</code> 来判断一个类是不是另一个类的子孙类</strong></p><hr><p><strong>类型比较</strong></p><ul><li><code>type()</code> 不会认为子类是一种父类类型</li><li><code>isinstance()</code> 会认为子类是一种父类类型。</li></ul><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-67-1><a class=lnlinks href=#hl-67-1> 1</a>
</span><span class=lnt id=hl-67-2><a class=lnlinks href=#hl-67-2> 2</a>
</span><span class=lnt id=hl-67-3><a class=lnlinks href=#hl-67-3> 3</a>
</span><span class=lnt id=hl-67-4><a class=lnlinks href=#hl-67-4> 4</a>
</span><span class=lnt id=hl-67-5><a class=lnlinks href=#hl-67-5> 5</a>
</span><span class=lnt id=hl-67-6><a class=lnlinks href=#hl-67-6> 6</a>
</span><span class=lnt id=hl-67-7><a class=lnlinks href=#hl-67-7> 7</a>
</span><span class=lnt id=hl-67-8><a class=lnlinks href=#hl-67-8> 8</a>
</span><span class=lnt id=hl-67-9><a class=lnlinks href=#hl-67-9> 9</a>
</span><span class=lnt id=hl-67-10><a class=lnlinks href=#hl-67-10>10</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Foo</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Bar</span><span class=p>(</span><span class=n>Foo</span><span class=p>):</span>
</span></span><span class=line><span class=cl> <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>Foo</span><span class=p>())</span> <span class=o>==</span> <span class=n>Foo</span><span class=p>)</span>  <span class=c1># True</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>Bar</span><span class=p>())</span> <span class=o>==</span> <span class=n>Foo</span><span class=p>)</span>  <span class=c1># False</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>isinstance</span><span class=p>(</span><span class=n>Foo</span><span class=p>(),</span> <span class=n>Foo</span><span class=p>))</span>  <span class=c1># True</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>isinstance</span><span class=p>(</span><span class=n>Bar</span><span class=p>(),</span> <span class=n>Foo</span><span class=p>))</span>  <span class=c1># True</span></span></span></code></pre></td></tr></table></div></div></div><hr><p><strong>Example 1</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-68-1><a class=lnlinks href=#hl-68-1> 1</a>
</span><span class=lnt id=hl-68-2><a class=lnlinks href=#hl-68-2> 2</a>
</span><span class=lnt id=hl-68-3><a class=lnlinks href=#hl-68-3> 3</a>
</span><span class=lnt id=hl-68-4><a class=lnlinks href=#hl-68-4> 4</a>
</span><span class=lnt id=hl-68-5><a class=lnlinks href=#hl-68-5> 5</a>
</span><span class=lnt id=hl-68-6><a class=lnlinks href=#hl-68-6> 6</a>
</span><span class=lnt id=hl-68-7><a class=lnlinks href=#hl-68-7> 7</a>
</span><span class=lnt id=hl-68-8><a class=lnlinks href=#hl-68-8> 8</a>
</span><span class=lnt id=hl-68-9><a class=lnlinks href=#hl-68-9> 9</a>
</span><span class=lnt id=hl-68-10><a class=lnlinks href=#hl-68-10>10</a>
</span><span class=lnt id=hl-68-11><a class=lnlinks href=#hl-68-11>11</a>
</span><span class=lnt id=hl-68-12><a class=lnlinks href=#hl-68-12>12</a>
</span><span class=lnt id=hl-68-13><a class=lnlinks href=#hl-68-13>13</a>
</span><span class=lnt id=hl-68-14><a class=lnlinks href=#hl-68-14>14</a>
</span><span class=lnt id=hl-68-15><a class=lnlinks href=#hl-68-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__j</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>number</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__j</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>number</span> <span class=o>=</span> <span class=mi>7</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>show</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>__j</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>number</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>B</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>b</span><span class=o>.</span><span class=n>show</span><span class=p>()</span> <span class=c1># 2 7</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 2</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-69-1><a class=lnlinks href=#hl-69-1> 1</a>
</span><span class=lnt id=hl-69-2><a class=lnlinks href=#hl-69-2> 2</a>
</span><span class=lnt id=hl-69-3><a class=lnlinks href=#hl-69-3> 3</a>
</span><span class=lnt id=hl-69-4><a class=lnlinks href=#hl-69-4> 4</a>
</span><span class=lnt id=hl-69-5><a class=lnlinks href=#hl-69-5> 5</a>
</span><span class=lnt id=hl-69-6><a class=lnlinks href=#hl-69-6> 6</a>
</span><span class=lnt id=hl-69-7><a class=lnlinks href=#hl-69-7> 7</a>
</span><span class=lnt id=hl-69-8><a class=lnlinks href=#hl-69-8> 8</a>
</span><span class=lnt id=hl-69-9><a class=lnlinks href=#hl-69-9> 9</a>
</span><span class=lnt id=hl-69-10><a class=lnlinks href=#hl-69-10>10</a>
</span><span class=lnt id=hl-69-11><a class=lnlinks href=#hl-69-11>11</a>
</span><span class=lnt id=hl-69-12><a class=lnlinks href=#hl-69-12>12</a>
</span><span class=lnt id=hl-69-13><a class=lnlinks href=#hl-69-13>13</a>
</span><span class=lnt id=hl-69-14><a class=lnlinks href=#hl-69-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__method</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;I&#39;m a method in A&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>method</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>__method</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__method</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;I&#39;m a method in B&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>B</span><span class=p>()</span><span class=o>.</span><span class=n>method</span><span class=p>()</span>  <span class=c1># I&#39;m a method in A</span>
</span></span><span class=line><span class=cl><span class=n>A</span><span class=p>()</span><span class=o>.</span><span class=n>method</span><span class=p>()</span>  <span class=c1># I&#39;m a method in A</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>Example 3</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-70-1><a class=lnlinks href=#hl-70-1> 1</a>
</span><span class=lnt id=hl-70-2><a class=lnlinks href=#hl-70-2> 2</a>
</span><span class=lnt id=hl-70-3><a class=lnlinks href=#hl-70-3> 3</a>
</span><span class=lnt id=hl-70-4><a class=lnlinks href=#hl-70-4> 4</a>
</span><span class=lnt id=hl-70-5><a class=lnlinks href=#hl-70-5> 5</a>
</span><span class=lnt id=hl-70-6><a class=lnlinks href=#hl-70-6> 6</a>
</span><span class=lnt id=hl-70-7><a class=lnlinks href=#hl-70-7> 7</a>
</span><span class=lnt id=hl-70-8><a class=lnlinks href=#hl-70-8> 8</a>
</span><span class=lnt id=hl-70-9><a class=lnlinks href=#hl-70-9> 9</a>
</span><span class=lnt id=hl-70-10><a class=lnlinks href=#hl-70-10>10</a>
</span><span class=lnt id=hl-70-11><a class=lnlinks href=#hl-70-11>11</a>
</span><span class=lnt id=hl-70-12><a class=lnlinks href=#hl-70-12>12</a>
</span><span class=lnt id=hl-70-13><a class=lnlinks href=#hl-70-13>13</a>
</span><span class=lnt id=hl-70-14><a class=lnlinks href=#hl-70-14>14</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Parent</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    parent class
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Child</span><span class=p>(</span><span class=n>Parent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># doc属性不会被继承</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Parent</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>  <span class=c1># parent class</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>Child</span><span class=o>.</span><span class=vm>__doc__</span><span class=p>)</span>  <span class=c1># None</span></span></span></code></pre></td></tr></table></div></div></div><hr><p><strong><code>super</code> 的使用</strong></p><p><code>super</code> 主要显式调用父类，在子类中，一般会定义与父类相同的属性（数据属性，方法），从而来实现子类特有的行为。也就是说，<strong>子类会继承父类的所有的属性和方法，子类也可以覆盖父类同名的属性和方法</strong></p><p><strong>调用父类的方法：</strong></p><ol><li><strong>将“<code>self</code>”显式的传递进去：</strong></li></ol><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-71-1><a class=lnlinks href=#hl-71-1> 1</a>
</span><span class=lnt id=hl-71-2><a class=lnlinks href=#hl-71-2> 2</a>
</span><span class=lnt id=hl-71-3><a class=lnlinks href=#hl-71-3> 3</a>
</span><span class=lnt id=hl-71-4><a class=lnlinks href=#hl-71-4> 4</a>
</span><span class=lnt id=hl-71-5><a class=lnlinks href=#hl-71-5> 5</a>
</span><span class=lnt id=hl-71-6><a class=lnlinks href=#hl-71-6> 6</a>
</span><span class=lnt id=hl-71-7><a class=lnlinks href=#hl-71-7> 7</a>
</span><span class=lnt id=hl-71-8><a class=lnlinks href=#hl-71-8> 8</a>
</span><span class=lnt id=hl-71-9><a class=lnlinks href=#hl-71-9> 9</a>
</span><span class=lnt id=hl-71-10><a class=lnlinks href=#hl-71-10>10</a>
</span><span class=lnt id=hl-71-11><a class=lnlinks href=#hl-71-11>11</a>
</span><span class=lnt id=hl-71-12><a class=lnlinks href=#hl-71-12>12</a>
</span><span class=lnt id=hl-71-13><a class=lnlinks href=#hl-71-13>13</a>
</span><span class=lnt id=hl-71-14><a class=lnlinks href=#hl-71-14>14</a>
</span><span class=lnt id=hl-71-15><a class=lnlinks href=#hl-71-15>15</a>
</span><span class=lnt id=hl-71-16><a class=lnlinks href=#hl-71-16>16</a>
</span><span class=lnt id=hl-71-17><a class=lnlinks href=#hl-71-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Parent</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>Value</span> <span class=o>=</span> <span class=s2>&#34;Hi, Parent value&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fun</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;This is from Parent&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Child</span><span class=p>(</span><span class=n>Parent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>Value</span> <span class=o>=</span> <span class=s2>&#34;Hi, Child  value&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fun</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;This is from Child&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 调用父类Parent的fun函数方法</span>
</span></span><span class=line><span class=cl>        <span class=n>Parent</span><span class=o>.</span><span class=n>fun</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=n>Child</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>fun</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># This is from Child</span>
</span></span><span class=line><span class=cl><span class=c1># This is from Parent</span></span></span></code></pre></td></tr></table></div></div></div><ol start=2><li>使用 Python 中的 <code>super</code> 关键字</li></ol><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-72-1><a class=lnlinks href=#hl-72-1> 1</a>
</span><span class=lnt id=hl-72-2><a class=lnlinks href=#hl-72-2> 2</a>
</span><span class=lnt id=hl-72-3><a class=lnlinks href=#hl-72-3> 3</a>
</span><span class=lnt id=hl-72-4><a class=lnlinks href=#hl-72-4> 4</a>
</span><span class=lnt id=hl-72-5><a class=lnlinks href=#hl-72-5> 5</a>
</span><span class=lnt id=hl-72-6><a class=lnlinks href=#hl-72-6> 6</a>
</span><span class=lnt id=hl-72-7><a class=lnlinks href=#hl-72-7> 7</a>
</span><span class=lnt id=hl-72-8><a class=lnlinks href=#hl-72-8> 8</a>
</span><span class=lnt id=hl-72-9><a class=lnlinks href=#hl-72-9> 9</a>
</span><span class=lnt id=hl-72-10><a class=lnlinks href=#hl-72-10>10</a>
</span><span class=lnt id=hl-72-11><a class=lnlinks href=#hl-72-11>11</a>
</span><span class=lnt id=hl-72-12><a class=lnlinks href=#hl-72-12>12</a>
</span><span class=lnt id=hl-72-13><a class=lnlinks href=#hl-72-13>13</a>
</span><span class=lnt id=hl-72-14><a class=lnlinks href=#hl-72-14>14</a>
</span><span class=lnt id=hl-72-15><a class=lnlinks href=#hl-72-15>15</a>
</span><span class=lnt id=hl-72-16><a class=lnlinks href=#hl-72-16>16</a>
</span><span class=lnt id=hl-72-17><a class=lnlinks href=#hl-72-17>17</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Parent</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>Value</span> <span class=o>=</span> <span class=s2>&#34;Hi, Parent value&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fun</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;This is from Parent&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Child</span><span class=p>(</span><span class=n>Parent</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>Value</span> <span class=o>=</span> <span class=s2>&#34;Hi, Child  value&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>fun</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;This is from Child&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># 相当于用super的方法与上一调用父类的语句置换</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>(</span><span class=n>Child</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>fun</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=n>Child</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>c</span><span class=o>.</span><span class=n>fun</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># This is from Child</span>
</span></span><span class=line><span class=cl><span class=c1># This is from Parent</span></span></span></code></pre></td></tr></table></div></div></div><h4 id=super class=heading>super()<a href=#super aria-labelledby=super><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>对于你定义的每一个类，Python 会计算出一个所谓的 <strong>方法解析顺序(<code>MRO</code>)列表</strong>。 这个 <code>MRO</code> 列表就是一个简单的所有基类的线性顺序表。为了实现继承，Python 会在 <code>MRO</code> 列表上从左到右开始查找基类，直到找到第一个匹配这个属性的类为止。</p><p>而这个 <code>MRO</code> 列表的构造是通过一个 C3 线性化算法来实现的。 实际上就是 <strong>合并所有父类的 <code>MRO</code> 列表并遵循如下三条准则</strong>：</p><ul><li>子类会先于父类被检查</li><li>多个父类会根据它们在列表中的顺序被检查</li><li>如果对下一个类存在两个合法的选择，选择第一个父类</li></ul><p><strong>虽然名义上来说 super 是用来调用父类中的方法，但是 super 实际上是在 <code>MRO</code> 表中找到下一个匹配的类</strong>。super 原型如下：</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-73-1><a class=lnlinks href=#hl-73-1>1</a>
</span><span class=lnt id=hl-73-2><a class=lnlinks href=#hl-73-2>2</a>
</span><span class=lnt id=hl-73-3><a class=lnlinks href=#hl-73-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>super</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>inst</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>mro</span> <span class=o>=</span> <span class=n>inst</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=n>mro</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>mro</span><span class=p>[</span><span class=n>mro</span><span class=o>.</span><span class=n>index</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div></div><p>两个参数 <code>cls</code> 和 <code>inst</code> 分别做了两件事：</p><ol><li><code>inst</code> 负责生成 <code>MRO</code> 的 list</li><li>通过 <code>cls</code> 定位当前 <code>MRO</code> 中的 index, 并返回 <code>mro[index + 1]</code></li></ol><p>但是根据我们上面说的 <code>super</code> 本质知道 <code>super</code> 和父类其实没有实质关联，我们就不难理解为什么 enter B 下一句是 enter C 而不是 enter A 了（如果认为 <code>super</code> 代表“调用父类的方法”，会想当然的认为下一句应该是 enter A）。</p><p>可以用　<strong><code>self.__class__.__mro__</code></strong> 方法来 <strong>查询当前 <code>MRO</code></strong></p><p>一个多继承中的 MRO 是固定的(只要每个类之间都有继承关系）</p><p><strong>Example:</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-74-1><a class=lnlinks href=#hl-74-1> 1</a>
</span><span class=lnt id=hl-74-2><a class=lnlinks href=#hl-74-2> 2</a>
</span><span class=lnt id=hl-74-3><a class=lnlinks href=#hl-74-3> 3</a>
</span><span class=lnt id=hl-74-4><a class=lnlinks href=#hl-74-4> 4</a>
</span><span class=lnt id=hl-74-5><a class=lnlinks href=#hl-74-5> 5</a>
</span><span class=lnt id=hl-74-6><a class=lnlinks href=#hl-74-6> 6</a>
</span><span class=lnt id=hl-74-7><a class=lnlinks href=#hl-74-7> 7</a>
</span><span class=lnt id=hl-74-8><a class=lnlinks href=#hl-74-8> 8</a>
</span><span class=lnt id=hl-74-9><a class=lnlinks href=#hl-74-9> 9</a>
</span><span class=lnt id=hl-74-10><a class=lnlinks href=#hl-74-10>10</a>
</span><span class=lnt id=hl-74-11><a class=lnlinks href=#hl-74-11>11</a>
</span><span class=lnt id=hl-74-12><a class=lnlinks href=#hl-74-12>12</a>
</span><span class=lnt id=hl-74-13><a class=lnlinks href=#hl-74-13>13</a>
</span><span class=lnt id=hl-74-14><a class=lnlinks href=#hl-74-14>14</a>
</span><span class=lnt id=hl-74-15><a class=lnlinks href=#hl-74-15>15</a>
</span><span class=lnt id=hl-74-16><a class=lnlinks href=#hl-74-16>16</a>
</span><span class=lnt id=hl-74-17><a class=lnlinks href=#hl-74-17>17</a>
</span><span class=lnt id=hl-74-18><a class=lnlinks href=#hl-74-18>18</a>
</span><span class=lnt id=hl-74-19><a class=lnlinks href=#hl-74-19>19</a>
</span><span class=lnt id=hl-74-20><a class=lnlinks href=#hl-74-20>20</a>
</span><span class=lnt id=hl-74-21><a class=lnlinks href=#hl-74-21>21</a>
</span><span class=lnt id=hl-74-22><a class=lnlinks href=#hl-74-22>22</a>
</span><span class=lnt id=hl-74-23><a class=lnlinks href=#hl-74-23>23</a>
</span><span class=lnt id=hl-74-24><a class=lnlinks href=#hl-74-24>24</a>
</span><span class=lnt id=hl-74-25><a class=lnlinks href=#hl-74-25>25</a>
</span><span class=lnt id=hl-74-26><a class=lnlinks href=#hl-74-26>26</a>
</span><span class=lnt id=hl-74-27><a class=lnlinks href=#hl-74-27>27</a>
</span><span class=lnt id=hl-74-28><a class=lnlinks href=#hl-74-28>28</a>
</span><span class=lnt id=hl-74-29><a class=lnlinks href=#hl-74-29>29</a>
</span><span class=lnt id=hl-74-30><a class=lnlinks href=#hl-74-30>30</a>
</span><span class=lnt id=hl-74-31><a class=lnlinks href=#hl-74-31>31</a>
</span><span class=lnt id=hl-74-32><a class=lnlinks href=#hl-74-32>32</a>
</span><span class=lnt id=hl-74-33><a class=lnlinks href=#hl-74-33>33</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Enter A&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Enter B&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>(</span><span class=n>B</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Leave B&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>C</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Enter C&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>(</span><span class=n>C</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Leave C&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>D</span><span class=p>(</span><span class=n>B</span><span class=p>,</span> <span class=n>C</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Enter D&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>(</span><span class=n>D</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Leave D&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__mro__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=n>d</span> <span class=o>=</span> <span class=n>D</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Enter D</span>
</span></span><span class=line><span class=cl><span class=c1># Enter B</span>
</span></span><span class=line><span class=cl><span class=c1># Enter C</span>
</span></span><span class=line><span class=cl><span class=c1># Enter A</span>
</span></span><span class=line><span class=cl><span class=c1># Leave C</span>
</span></span><span class=line><span class=cl><span class=c1># Leave B</span>
</span></span><span class=line><span class=cl><span class=c1># Leave D</span>
</span></span><span class=line><span class=cl><span class=c1># (&lt;class &#39;__main__.D&#39;&gt;, &lt;class &#39;__main__.B&#39;&gt;, &lt;class &#39;__main__.C&#39;&gt;, &lt;class &#39;__main__.A&#39;&gt;, &lt;class &#39;object&#39;&gt;)</span></span></span></code></pre></td></tr></table></div></div></div><p>上方例子的中流程：</p><ol><li><p><code>class D</code> 中，输出“Enter D " , 然后就会调用 <code>super</code> 方法，<code>super()</code> 方法，第一个参数是 <code>D</code>，在 <code>MRO</code> 列表中的下标（index）为 0，那么调用的下一个类就是下标为（index+1）的类，即 <code>class B</code>,</p></li><li><p>进入 <code>class B</code>，输出 &ldquo;Enter B&rdquo; , 再次调用 <code>super()</code>，此时的 index 为 1，那么调用的下一个类的 index 为 2，即 <code>class C</code>，输出“Enter C” .</p></li><li><p>在 <code>class C</code> 中，调用 <code>super()</code>，进入 <code>class A</code>，输出“Enter A”，</p></li><li><p>回到 <code>class C</code> ，输出 &ldquo;Leave C&rdquo; , 再回到 <code>class B </code>，输出“Leave B”, 然后回到 <code>class D</code>，输出“Leave D”。结束</p></li></ol><p>当使用 <code>super()</code> 函数时，Python 会在 <code>MRO </code>列表上继续搜索下一个类。 只要每个重定义的方法统一使用 <code>super()</code> 并只调用它一次， 那么控制流最终会遍历完整个 <code>MRO </code>列表，每个方法也只会被调用一次。</p><h4 id=__new__ class=heading><code>__new__</code><a href=#__new__ aria-labelledby=__new__><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p><strong><code>__new__</code> 方法：类级别的方法</strong></p><ol><li>是在类准备将自身实例化时调用，并且至少需要传递一个参数 <strong><code>cls</code></strong>，此参数在实例化时由 python 解释器自动提供</li><li>始终是 <strong>类的类方法</strong>，即使没有被加上类方法装饰器；</li><li>必须要有返回值，<strong>返回实例化出来的实例</strong>；在自己实现 <code>__new__()</code> 时需要注意：可以 <code>return</code> 父类（通过 <code>super(当前类名，cls)）.__new__</code> 出来的实例，或者直接是 object 的 <code>__new__</code> 出来的实例</li></ol><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-75-1><a class=lnlinks href=#hl-75-1> 1</a>
</span><span class=lnt id=hl-75-2><a class=lnlinks href=#hl-75-2> 2</a>
</span><span class=lnt id=hl-75-3><a class=lnlinks href=#hl-75-3> 3</a>
</span><span class=lnt id=hl-75-4><a class=lnlinks href=#hl-75-4> 4</a>
</span><span class=lnt id=hl-75-5><a class=lnlinks href=#hl-75-5> 5</a>
</span><span class=lnt id=hl-75-6><a class=lnlinks href=#hl-75-6> 6</a>
</span><span class=lnt id=hl-75-7><a class=lnlinks href=#hl-75-7> 7</a>
</span><span class=lnt id=hl-75-8><a class=lnlinks href=#hl-75-8> 8</a>
</span><span class=lnt id=hl-75-9><a class=lnlinks href=#hl-75-9> 9</a>
</span><span class=lnt id=hl-75-10><a class=lnlinks href=#hl-75-10>10</a>
</span><span class=lnt id=hl-75-11><a class=lnlinks href=#hl-75-11>11</a>
</span><span class=lnt id=hl-75-12><a class=lnlinks href=#hl-75-12>12</a>
</span><span class=lnt id=hl-75-13><a class=lnlinks href=#hl-75-13>13</a>
</span><span class=lnt id=hl-75-14><a class=lnlinks href=#hl-75-14>14</a>
</span><span class=lnt id=hl-75-15><a class=lnlinks href=#hl-75-15>15</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 默认调用父类object的__new__()方法来构造该类的实例</span>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>A</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>  <span class=c1># &lt;__main__.A object at 0x000001BE6F8CD520&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;重写__new__方法&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;abc&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>A</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>  <span class=c1># &#39;abc&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>a</span><span class=p>))</span>  <span class=c1># &lt;class &#39;str&#39;&gt;</span></span></span></code></pre></td></tr></table></div></div></div><p><strong>通过 <code>__new__()</code> 方法实现单例</strong></p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-76-1><a class=lnlinks href=#hl-76-1> 1</a>
</span><span class=lnt id=hl-76-2><a class=lnlinks href=#hl-76-2> 2</a>
</span><span class=lnt id=hl-76-3><a class=lnlinks href=#hl-76-3> 3</a>
</span><span class=lnt id=hl-76-4><a class=lnlinks href=#hl-76-4> 4</a>
</span><span class=lnt id=hl-76-5><a class=lnlinks href=#hl-76-5> 5</a>
</span><span class=lnt id=hl-76-6><a class=lnlinks href=#hl-76-6> 6</a>
</span><span class=lnt id=hl-76-7><a class=lnlinks href=#hl-76-7> 7</a>
</span><span class=lnt id=hl-76-8><a class=lnlinks href=#hl-76-8> 8</a>
</span><span class=lnt id=hl-76-9><a class=lnlinks href=#hl-76-9> 9</a>
</span><span class=lnt id=hl-76-10><a class=lnlinks href=#hl-76-10>10</a>
</span><span class=lnt id=hl-76-11><a class=lnlinks href=#hl-76-11>11</a>
</span><span class=lnt id=hl-76-12><a class=lnlinks href=#hl-76-12>12</a>
</span><span class=lnt id=hl-76-13><a class=lnlinks href=#hl-76-13>13</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Singleton</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=s2>&#34;_instance&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span> <span class=o>=</span> <span class=nb>super</span><span class=p>(</span><span class=n>Singleton</span><span class=p>,</span> <span class=bp>cls</span><span class=p>)</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>_instance</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>Singleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>Singleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>c</span> <span class=o>=</span> <span class=n>Singleton</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>  <span class=c1># &lt;__main__.Singleton object at 0x000001F0B57D86D0&gt;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>  <span class=c1># &lt;__main__.Singleton object at 0x000001F0B57D86D0&gt;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>c</span><span class=p>)</span>  <span class=c1># &lt;__main__.Singleton object at 0x000001F0B57D86D0&gt;</span></span></span></code></pre></td></tr></table></div></div></div><h4 id=__init__ class=heading><code>__init__</code><a href=#__init__ aria-labelledby=__init__><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p><strong><code>__init__</code> 方法：实例级别的方法</strong></p><ol><li><p>有一个参数 <code>self</code>, 该 <code>self</code> 参数就是 <code>__new__()</code> 返回的实例；</p></li><li><p><code>__init__()</code> 在 <code>__new()__</code> 的基础上完成初始化动作，<strong>不需要返回值</strong>；</p></li></ol><p>若 <code>__new__()</code> 没有正确返回当前类 <code>cls</code> 的实例，那 <code>__init__()</code> 将不会被调用</p><p>创建的每个实例都有自己的属性，方便类中的实例方法调用；</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-77-1><a class=lnlinks href=#hl-77-1> 1</a>
</span><span class=lnt id=hl-77-2><a class=lnlinks href=#hl-77-2> 2</a>
</span><span class=lnt id=hl-77-3><a class=lnlinks href=#hl-77-3> 3</a>
</span><span class=lnt id=hl-77-4><a class=lnlinks href=#hl-77-4> 4</a>
</span><span class=lnt id=hl-77-5><a class=lnlinks href=#hl-77-5> 5</a>
</span><span class=lnt id=hl-77-6><a class=lnlinks href=#hl-77-6> 6</a>
</span><span class=lnt id=hl-77-7><a class=lnlinks href=#hl-77-7> 7</a>
</span><span class=lnt id=hl-77-8><a class=lnlinks href=#hl-77-8> 8</a>
</span><span class=lnt id=hl-77-9><a class=lnlinks href=#hl-77-9> 9</a>
</span><span class=lnt id=hl-77-10><a class=lnlinks href=#hl-77-10>10</a>
</span><span class=lnt id=hl-77-11><a class=lnlinks href=#hl-77-11>11</a>
</span><span class=lnt id=hl-77-12><a class=lnlinks href=#hl-77-12>12</a>
</span><span class=lnt id=hl-77-13><a class=lnlinks href=#hl-77-13>13</a>
</span><span class=lnt id=hl-77-14><a class=lnlinks href=#hl-77-14>14</a>
</span><span class=lnt id=hl-77-15><a class=lnlinks href=#hl-77-15>15</a>
</span><span class=lnt id=hl-77-16><a class=lnlinks href=#hl-77-16>16</a>
</span><span class=lnt id=hl-77-17><a class=lnlinks href=#hl-77-17>17</a>
</span><span class=lnt id=hl-77-18><a class=lnlinks href=#hl-77-18>18</a>
</span><span class=lnt id=hl-77-19><a class=lnlinks href=#hl-77-19>19</a>
</span><span class=lnt id=hl-77-20><a class=lnlinks href=#hl-77-20>20</a>
</span><span class=lnt id=hl-77-21><a class=lnlinks href=#hl-77-21>21</a>
</span><span class=lnt id=hl-77-22><a class=lnlinks href=#hl-77-22>22</a>
</span><span class=lnt id=hl-77-23><a class=lnlinks href=#hl-77-23>23</a>
</span><span class=lnt id=hl-77-24><a class=lnlinks href=#hl-77-24>24</a>
</span><span class=lnt id=hl-77-25><a class=lnlinks href=#hl-77-25>25</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;A&#39; __new__&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># return super(A,cls).__new__(cls)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>object</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;A&#39; __init__&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>B</span><span class=p>(</span><span class=n>A</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;B&#39; __new__&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;B&#39; __init__&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a</span> <span class=o>=</span> <span class=n>A</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># B&#39; __new__  没有创建真正的类B，所以类B的构造函数没有调用</span>
</span></span><span class=line><span class=cl><span class=n>b</span> <span class=o>=</span> <span class=n>B</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># A&#39; __new__</span>
</span></span><span class=line><span class=cl><span class=c1># A&#39; __init__</span>
</span></span><span class=line><span class=cl><span class=c1># B&#39; __new__</span></span></span></code></pre></td></tr></table></div></div></div><p>当在 Python 中出现继承的情况时，一定要注意初始化函数 <code>__init__</code> 的行为:</p><ul><li><p><strong>如果子类没有定义自己的初始化函数</strong>，父类的初始化函数会被 <strong>默认调用</strong>；但是如果要实例化子类的对象，则只能传入父类的初始化函数对应的参数，否则会出错</p></li><li><p><strong>如果子类定义了自己的初始化函数</strong>，而在子类中 <strong>没有显式调用</strong> 父类的初始化函数，则父类的属性 <strong>不会</strong> 被初始化</p></li><li><p><strong>如果子类定义了自己的初始化函数</strong>，在子类中 <strong>显式调用</strong> 父类，子类和父类的属性都 <strong>会</strong> 被初始化</p></li></ul><h3 id=元类 class=heading>元类<a href=#%e5%85%83%e7%b1%bb aria-labelledby=元类><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>类是能够创建出类实例的对象。<strong>类本身也是实例，它们是元类的实例</strong>。</p><p>Python 中的一切都是对象，它们要么是类的实例，要么是元类的实例，<strong>除了 <code>type</code></strong>。<strong>type 实际上是它自己的元类</strong>，在纯 Python 环境中这可不是你能够做到的，这是通过在实现层面耍一些小手段做到的。</p><p>其次，元类是很复杂的。对于非常简单的类，你可能不希望通过使用元类来对类做修改。你可以通过其他两种技术来修改类：</p><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-78-1><a class=lnlinks href=#hl-78-1>1</a>
</span><span class=lnt id=hl-78-2><a class=lnlinks href=#hl-78-2>2</a>
</span><span class=lnt id=hl-78-3><a class=lnlinks href=#hl-78-3>3</a>
</span><span class=lnt id=hl-78-4><a class=lnlinks href=#hl-78-4>4</a>
</span><span class=lnt id=hl-78-5><a class=lnlinks href=#hl-78-5>5</a>
</span><span class=lnt id=hl-78-6><a class=lnlinks href=#hl-78-6>6</a>
</span><span class=lnt id=hl-78-7><a class=lnlinks href=#hl-78-7>7</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>A</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=mi>1</span><span class=p>))</span>  <span class=c1># &lt;class &#39;int&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=mi>1</span><span class=p>)))</span>  <span class=c1># &lt;class &#39;type&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=nb>int</span><span class=p>))</span>  <span class=c1># &lt;class &#39;type&#39;&gt;</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>A</span><span class=p>))</span>  <span class=c1># &lt;class &#39;type&#39;&gt;</span></span></span></code></pre></td></tr></table></div></div></div><p>元类是类的类，常可以用在类工厂中；</p><ul><li>Python 中所有的类都是对象，可以通过 <code>type()</code> 来创建元类</li><li>在定义类时，可用过 <code>metaclass</code> 参数来指定此类的元类</li><li>Python 类语句执行时，会先 <strong>查找其类本身的 <code>metaclass</code> 属性</strong>，如果没找到，会继续在 <strong>父类</strong> 中找，还没找到，则到 <strong>模块</strong> 中找，最后再用 <strong>内置的 type</strong> 来创建此类对象</li><li>使用类、函数都可以当作元类，通常在 <strong><code>__new__</code></strong> 方法中通过 type 来自定义自己的元类</li><li>从设计的复杂度来讲，尽量少用元类，多用普通类或函数</li></ul><h2 id=并发与并行 class=heading>并发与并行<a href=#%e5%b9%b6%e5%8f%91%e4%b8%8e%e5%b9%b6%e8%a1%8c aria-labelledby=并发与并行><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p><strong>并行</strong></p><p>只有多个 CPU，才能实现并行；<strong>多个 CPU 同时执行任务</strong>（线程或者进程）</p><p><strong>并发</strong></p><p><strong>CPU 轮流执行任务</strong>，每个任务执行 0.01s（举例），看起来是同时，实际上同一个时刻还是只执行一个任务；这种情况，称为并发；</p><h3 id=线程-进程 class=heading>线程 进程<a href=#%e7%ba%bf%e7%a8%8b-%e8%bf%9b%e7%a8%8b aria-labelledby=线程-进程><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p><strong>线程</strong></p><p>线程是 <strong>CPU 执行</strong> 的最基本单元</p><p><strong>进程</strong></p><p>进程是系统进行分配资源和调度的基本单位，是 <strong>操作系统执行</strong> 的基本单元；</p><blockquote class=blockquote><p><strong>多线程相比多进程的优势</strong></p><ul><li><p>多线程无需重复申请资源，子线程和父线程共享资源；</p></li><li><p>多线程间的通信速度快于进程通信，效率更高；</p></li></ul></blockquote><h3 id=协程 class=heading>协程<a href=#%e5%8d%8f%e7%a8%8b aria-labelledby=协程><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p><strong>协程</strong>，又称微线程。在 Python 语言中，<strong>单线程+异步 I/O</strong> 的编程模型称为协程。协程的特点是 <strong>只有一个线程</strong> 在执行，只有当子程序内部发生阻塞或者 IO 时，才会交出线程执行权给其他子程序，适当的时候再返回；</p><blockquote class=blockquote><p><strong>协程相比多线程的优势</strong></p><ul><li>省去了大量线程切换的开销；</li><li>由于是单线程执行，共享资源不需要加锁，执行效率更高；</li></ul></blockquote><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-79-1><a class=lnlinks href=#hl-79-1> 1</a>
</span><span class=lnt id=hl-79-2><a class=lnlinks href=#hl-79-2> 2</a>
</span><span class=lnt id=hl-79-3><a class=lnlinks href=#hl-79-3> 3</a>
</span><span class=lnt id=hl-79-4><a class=lnlinks href=#hl-79-4> 4</a>
</span><span class=lnt id=hl-79-5><a class=lnlinks href=#hl-79-5> 5</a>
</span><span class=lnt id=hl-79-6><a class=lnlinks href=#hl-79-6> 6</a>
</span><span class=lnt id=hl-79-7><a class=lnlinks href=#hl-79-7> 7</a>
</span><span class=lnt id=hl-79-8><a class=lnlinks href=#hl-79-8> 8</a>
</span><span class=lnt id=hl-79-9><a class=lnlinks href=#hl-79-9> 9</a>
</span><span class=lnt id=hl-79-10><a class=lnlinks href=#hl-79-10>10</a>
</span><span class=lnt id=hl-79-11><a class=lnlinks href=#hl-79-11>11</a>
</span><span class=lnt id=hl-79-12><a class=lnlinks href=#hl-79-12>12</a>
</span><span class=lnt id=hl-79-13><a class=lnlinks href=#hl-79-13>13</a>
</span><span class=lnt id=hl-79-14><a class=lnlinks href=#hl-79-14>14</a>
</span><span class=lnt id=hl-79-15><a class=lnlinks href=#hl-79-15>15</a>
</span><span class=lnt id=hl-79-16><a class=lnlinks href=#hl-79-16>16</a>
</span><span class=lnt id=hl-79-17><a class=lnlinks href=#hl-79-17>17</a>
</span><span class=lnt id=hl-79-18><a class=lnlinks href=#hl-79-18>18</a>
</span><span class=lnt id=hl-79-19><a class=lnlinks href=#hl-79-19>19</a>
</span><span class=lnt id=hl-79-20><a class=lnlinks href=#hl-79-20>20</a>
</span><span class=lnt id=hl-79-21><a class=lnlinks href=#hl-79-21>21</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>say_after</span><span class=p>(</span><span class=n>delay</span><span class=p>,</span> <span class=n>what</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>delay</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>delay</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>what</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>task1</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>say_after</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;hello1&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>task2</span> <span class=o>=</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>say_after</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;world1&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;started at </span><span class=si>{</span><span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%X</span><span class=s1>&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>say_after</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;hello2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>say_after</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s1>&#39;world2&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>task1</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>task2</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;finished at </span><span class=si>{</span><span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>&#39;</span><span class=si>%X</span><span class=s1>&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div></div><div class="mb-3 syntax-highlight"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-80-1><a class=lnlinks href=#hl-80-1>1</a>
</span><span class=lnt id=hl-80-2><a class=lnlinks href=#hl-80-2>2</a>
</span><span class=lnt id=hl-80-3><a class=lnlinks href=#hl-80-3>3</a>
</span><span class=lnt id=hl-80-4><a class=lnlinks href=#hl-80-4>4</a>
</span><span class=lnt id=hl-80-5><a class=lnlinks href=#hl-80-5>5</a>
</span><span class=lnt id=hl-80-6><a class=lnlinks href=#hl-80-6>6</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># started at 10:19:42</span>
</span></span><span class=line><span class=cl><span class=c1># 1: hello2</span>
</span></span><span class=line><span class=cl><span class=c1># 2: hello1</span>
</span></span><span class=line><span class=cl><span class=c1># 2: world1</span>
</span></span><span class=line><span class=cl><span class=c1># 2: world2</span>
</span></span><span class=line><span class=cl><span class=c1># finished at 10:19:45</span></span></span></code></pre></td></tr></table></div></div></div><p>要真正运行一个协程，asyncio 提供了三种主要机制:</p><ul><li><p><code>asyncio.run()</code> 函数用来运行最高层级的入口点 &ldquo;<code>main()</code>&rdquo; 函数</p></li><li><p><strong>等待一个协程</strong>。<code>await say_after(1, 'hello2') </code>、<code> await say_after(2, 'world2')</code> 会在等待 1 秒后打印 &ldquo;hello2&rdquo;，然后 <strong>再次</strong> 等待
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span>
</span>秒后打印 &ldquo;world2&rdquo;:</p></li><li><p><strong>asyncio.create_task()</strong> 函数用来 <strong>并发运行</strong> 作为 asyncio 任务 的多个协程。</p></li><li><p><strong>总用时
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span>
</span>s</strong></p></li></ul><h3 id=死锁 class=heading>死锁<a href=#%e6%ad%bb%e9%94%81 aria-labelledby=死锁><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>两个或两个以上的进程在执行过程中, 因争夺资源而造成的一种 <strong>互相等待</strong> 的现象, 若无 <strong>外力</strong> 作用, 它们都将无法推进下去。</p><p><strong>产生死锁的原因：</strong></p><ol><li>因为系统资源不足。</li><li>进程运行推进顺序不合适。</li><li>资源分配不当等。</li></ol><p><strong>死锁的必要条件</strong></p><ol><li><strong>互斥条件</strong>：一个资源每次只能被一个进程使用。</li><li><strong>请求与保持条件</strong>：一个进程因请求资源而阻塞时，对已获得的资源保持不放。</li><li><strong>不剥夺条件</strong>: 进程已获得的资源，在末使用完之前，不能强行剥夺。</li><li><strong>循环等待条件</strong>: 若干进程之间形成一种头尾相接的循环等待资源关系</li></ol><p><strong>死锁的避免：</strong></p><p>死锁的预防是通过破坏产生条件来阻止死锁的产生，但这种方法破坏了系统的并行性和并发性。</p><p>死锁产生的前三个条件是死锁产生的必要条件，也就是说要产生死锁必须具备的条件，而不是存在这 3 个条件就一定产生死锁，那么只要在逻辑上回避了第四个条件就可以避免死锁。避免死锁采用的是允许前三个条件存在，但通过合理的资源分配算法来确保永远不会形成环形等待的封闭进程链，从而避免死锁。该方法支持多个进程的并行执行，为了避免死锁，系统动态的确定是否分配一个资源给请求的进程。</p><p><strong>银行家算法</strong>：分配资源之前先看清楚，资源分配后是否会导致系统死锁。如果会死锁，则不分配，否则就分配。要求每个进程必须先知道资源的最大需求量，且在系统运行过程中，考察每个进程对各类资源的申请需要花费较多的时间。</p><p><strong>进程间通信方式：</strong></p><p>管道、共享存储器系统、消息传递系统、信号量</p><p>mutex 是互斥锁</p></div><div class="row row-cols-2 mt-5 mb-3"><div class=col><a class=next href=/blogs/%E8%87%AA%E4%BF%A1%E6%81%AF%E4%BA%92%E4%BF%A1%E6%81%AF%E7%86%B5/><svg class="svg-inline--fa fas fa-arrow-left" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 448 512"><use href="#fas-arrow-left"/></svg>&nbsp;自信息&互信息&熵</a></div><div class="col text-end"></div></div><a href=# id=back-to-top class=back-to-top><span>▲</span>
</a><a href=# id=scroll-to-bottom class=back-to-top><span>▼</span>
</a><script>document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("back-to-top"),t=document.getElementById("scroll-to-bottom");e.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),t.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})})</script></div><div class="col col-md-3 col-lg-2 d-none d-md-block pt-5"><div class="toc toc-sidebar mb-5 my-md-0 mb-lg-5 p-3 text-body-secondary sticky-top"><strong class="d-block h6 my-2 pt-4">On this page:</strong><nav class=toc><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#赋值浅-copy深-copy>赋值、浅 copy、深 copy </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#赋值>赋值 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#浅拷贝>浅拷贝 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#深拷贝>深拷贝 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#推导式生成对象>推导式生成对象 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#变量及作用域>变量及作用域 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#全局变量>全局变量 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#闭包-nonclosure>闭包 nonclosure </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#装饰器>装饰器 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#迭代对象迭代器生成器>迭代对象，迭代器，生成器 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#异常捕获>异常捕获 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#类>类 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#类属性>类属性 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#类-class-的访问控制>类 class 的访问控制 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#类-class-的继承>类 class 的继承 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#元类>元类 </a><a class="toc-item toc-level-1" href=/blogs/python%E5%9F%BA%E7%A1%80/#并发与并行>并发与并行 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#线程-进程>线程 进程 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#协程>协程 </a><a class="toc-item toc-level-2" href=/blogs/python%E5%9F%BA%E7%A1%80/#死锁>死锁</a></nav></div></div></div></div><footer class="container-fluid footer text-center p-3"><div class="container-xxl text-center"><small>Copyright © 2025 EV's Blog All rights reserved.
|
Powered by
<a href=https://gethinode.com class="link-bg-footer markdown-link">Hinode</a>.</small></div></footer></div><div id=toast-container class="toast-container position-fixed bottom-0 end-0 p-3"><div id=toast-copied-code-message class=toast role=alert aria-live=assertive aria-atomic=true><div class=toast-header><strong class=me-auto>EV's Blog</strong>
<button type=button class=btn-close data-bs-dismiss=toast aria-label=Close></button></div><div class=toast-body>Code copied to clipboard</div></div></div><svg xmlns:xlink="http://www.w3.org/1999/xlink" display="none"><symbol id="fas-ellipsis"><path d="M8 256a56 56 0 11112 0A56 56 0 118 256zm160 0a56 56 0 11112 0 56 56 0 11-112 0zm216-56a56 56 0 110 112 56 56 0 110-112z"/></symbol><symbol id="fas-sun"><path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 11192 0 96 96 0 11-192 0zm224 0a128 128 0 10-256 0 128 128 0 10256 0z"/></symbol><symbol id="fas-moon"><path d="M223.5 32C1e2 32 0 132.3.0 256S1e2 480 223.5 480c60.6.0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9.0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></symbol><symbol id="fas-angle-left"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8.0 45.3l160 160c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0l-160 160z"/></symbol><symbol id="fas-sort"><path d="M137.4 41.4c12.5-12.5 32.8-12.5 45.3.0l128 128c9.2 9.2 11.9 22.9 6.9 34.9S301 224.1 288 224.1L32 224c-12.9.0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128zm0 429.3-128-128c-9.2-9.2-11.9-22.9-6.9-34.9S19.1 288 32.1 288h256c12.9.0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128c-12.5 12.5-32.8 12.5-45.3.0z"/></symbol><symbol id="fas-arrow-left"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8.0 45.3l160 160c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L109.2 288H416c17.7.0 32-14.3 32-32s-14.3-32-32-32H109.3L214.6 118.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0l-160 160z"/></symbol></svg>
<script src=/js/core.bundle-analytics.en.min.ceb6a67c169a28031391976dac91e1e2f460951862201b6249516a55d0fd6109.js data-category=analytics integrity="sha256-zramfBaaKAMTkZdtrJHh4vRglRhiIBtiSVFqVdD9YQk=" crossorigin=anonymous async></script><script src=/js/core.bundle.en.min.82868b7252e09bfbfda9583f6e99ff753228964cf66772429255a8d5ff982f48.js integrity="sha256-goaLclLgm/v9qVg/bpn/dTIolkz2Z3JCklWo1f+YL0g=" crossorigin=anonymous async></script></body></html>