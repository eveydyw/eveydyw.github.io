<!doctype html><html lang=en class=no-js><head><script src=/js/critical.bundle.min.85a7f5f23dc031d38877ecdb71b00d49e8a62c54f1ba98e75a734706ea09f30a.js integrity="sha256-haf18j3AMdOId+zbcbANSeimLFTxupjnWnNHBuoJ8wo=" crossorigin=anonymous></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.143.1"><meta name=theme content="Hinode 0.29.3"><link rel=stylesheet href="/css/main.min.87520833af13a26c9eab0db4b8b9e6c7afddf5dd51d32505d34d673a925cb9af.css" integrity="sha256-h1IIM68Tomyeqw20uLnmx6/d9d1R0yUF001nOpJcua8=" crossorigin=anonymous><link rel=preload href=/fonts/inter-v12-latin-regular.woff2 as=font type=font/woff2 crossorigin><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>EV's Blog - SearchEngine-1-概要</title>
<meta name=description content="【笔记】wangshusen-搜索引擎技术：搜索引擎的基本概念"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="SearchEngine-1-概要"><meta property="og:description" content="【笔记】wangshusen-搜索引擎技术：搜索引擎的基本概念"><meta property="og:url" content="https://eveydyw.github.io/blogs/searchengine/basics/"><meta property="og:site_name" content="EV's Blog"><meta property="article:published_time" content="2024-10-14T18:51:07+08:00"><meta property="article:modified_time" content="2024-10-14T18:51:07+08:00"><meta property="og:image" content="https://eveydyw.github.io/img/logo1280x640.png"><meta property="og:image:alt" content="SearchEngine-1-概要"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="SearchEngine-1-概要"><meta name=twitter:description content="【笔记】wangshusen-搜索引擎技术：搜索引擎的基本概念"><meta name=twitter:image content="https://eveydyw.github.io/img/logo1280x640.png"><meta name=twitter:image:alt content="SearchEngine-1-概要"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://eveydyw.github.io/#/schema/organization/1","name":"Hinode","url":"https://eveydyw.github.io/","sameAs":[null,"https://github.com/gethinode/hinode"],"logo":{"@type":"ImageObject","@id":"https://eveydyw.github.io/#/schema/image/1","url":"https://eveydyw.github.io/img/logo512x512.png","width":512,"height":512,"caption":"Hinode"},"image":{"@id":"https://eveydyw.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://eveydyw.github.io/#/schema/website/1","url":"https://eveydyw.github.io/","name":"EV\u0027s Blog","description":"Hinode is a clean documentation and blog theme for your Hugo site based on Bootstrap 5.","publisher":{"@id":"https://eveydyw.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://eveydyw.github.io/blogs/searchengine/basics/","url":"https://eveydyw.github.io/blogs/searchengine/basics/","name":"SearchEngine-1-概要","description":"【笔记】wangshusen-搜索引擎技术：搜索引擎的基本概念","isPartOf":{"@id":"https://eveydyw.github.io/#/schema/website/1"},"about":{"@id":"https://eveydyw.github.io/#/schema/organization/1"},"datePublished":"2024-10-14T18:51:07CET","dateModified":"2024-10-14T18:51:07CET","breadcrumb":{"@id":"https://eveydyw.github.io/blogs/searchengine/basics/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://eveydyw.github.io/blogs/searchengine/basics/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://eveydyw.github.io/blogs/searchengine/basics/"]}]},{"@type":"BreadcrumbList","@id":"https://eveydyw.github.io/blogs/searchengine/basics/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://eveydyw.github.io/","url":"https://eveydyw.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://eveydyw.github.io/blogs/","url":"https://eveydyw.github.io/blogs/","name":"Blogs"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://eveydyw.github.io/blogs/searchengine/","url":"https://eveydyw.github.io/blogs/searchengine/","name":"Searchengine"}},{"@type":"ListItem","position":4,"item":{"@id":"https://eveydyw.github.io/blogs/searchengine/basics/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://eveydyw.github.io/blogs/searchengine/basics/#/schema/image/2","url":"https://eveydyw.github.io/img/logo1280x640.png","contentUrl":"https://eveydyw.github.io/img/logo1280x640.png","caption":"SearchEngine-1-概要"}]}]}</script><link rel=icon type=image/png sizes=16x16 href=/img/my_logo_hu_10729e67805acfd8.png><link rel=icon type=image/png sizes=32x32 href=/img/my_logo_hu_f267cd4735c3fb50.png><link rel=icon type=image/png sizes=48x48 href=/img/my_logo_hu_bc348718a5ba4099.png><link rel=apple-touch-icon sizes=180x180 href=/img/my_logo_hu_a8f52fe79483cdab.png><script>MathJax={loader:{load:["[tex]/html","[tex]/ams","[tex]/amscd"]},tex:{inlineMath:[["\\(","\\)"],["$","$"]],displayMath:[["\\[","\\]"],["$$","$$"]],processEscapes:!0,packages:["base","ams","amscd"],tags:"ams"},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"],renderActions:{addMenu:[0,"",""],checkLoading:[0,"",""]}},chtml:{scale:1,displayAlign:"center",displayIndent:"0em",lineWidth:"container"},svg:{fontCache:"global"}}</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js></script></head><body><div class="d-flex flex-column min-vh-100"><div class="d-flex flex-column"><div class="container-fluid fixed-top p-0"><nav class="navbar p-4 bg-body navbar-fixed-top navbar-expand-md"><div class="container-xxl p-0"><div class="d-flex navbar-container justify-content-center"><div class="d-flex align-items-center"><button class="navbar-toggler collapsed p-0 mx-auto invisible fw-30" type=button><svg class="svg-inline--fa fas fa-ellipsis fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 448 512"><use href="#fas-ellipsis"/></svg></button></div><div class=mx-auto><a class=navbar-brand href=/ aria-label=Home><img src=/img/my_logo.svg alt="EV's Blog logo" height=30 width=30></a></div><div class="d-flex align-items-center"><button class="navbar-toggler main-nav-toggler collapsed p-0" type=button data-bs-toggle=collapse data-bs-target=#navbar-0-collapse aria-controls=navbar-0 aria-expanded=false aria-label="Toggle main navigation">
<span class="toggler-icon top-bar emphasis"></span>
<span class="toggler-icon middle-bar emphasis"></span>
<span class="toggler-icon bottom-bar emphasis"></span></button></div></div><div class="navbar-collapse collapse" id=navbar-0-collapse><div class="d-flex flex-fill ms-md-3 mt-4 mt-md-0"><form class="search flex-fill position-relative me-auto"><input class="search-input form-control is-search" type=search placeholder="Search this site" aria-label="Search this site" autocomplete=off name=search-input><div class="search-suggestions shadow bg-body rounded d-none" data-no-results="No results for"></div></form></div><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link data-nav=main data-nav-main=home href=/><span>Home</span>&nbsp;</a></li><li class=nav-item><a class=nav-link data-nav=main data-nav-main=blogs href=/blogs/><span>Blogs</span>&nbsp;</a></li><li class=nav-item><a class=nav-link data-nav=main data-nav-main=tags href=/tags><span>Tags</span>&nbsp;</a></li><li class="d-flex mode-switch align-items-center" id=navbar-mode><input type=checkbox class="checkbox navbar-mode-selector" id=navbar-mode-checkbox aria-label="Toggle theme">
<label class=label for=navbar-mode-checkbox><svg class="svg-inline--fa fas fa-sun fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 512 512"><use href="#fas-sun"/></svg><svg class="svg-inline--fa fas fa-moon fa-fw" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 384 512"><use href="#fas-moon"/></svg><div class=ball></div></label></li></ul></div></div></nav></div><div class=main-content></div></div><div class="container-xxl flex-fill p-4 px-xxl-0"><div class="row row-cols-1 row-cols-md-2 row-cols-lg-3"><div class="col col-lg-2 d-none d-lg-block sidebar-overflow sticky-top pt-5"></div><div class="col-12 col-md-9 col-lg-8 mb-5 p-4"><nav aria-label=breadcrumb class=d-sm-none><ol class=breadcrumb><li class=breadcrumb-item><a href=/blogs/searchengine/><svg class="svg-inline--fa fas fa-angle-left" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 320 512"><use href="#fas-angle-left"/></svg>&nbsp;&nbsp;SearchEngine</a></li></ol></nav><nav aria-label=breadcrumb class="d-none d-sm-block"><ol class=breadcrumb><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/blogs/>Blogs</a></li><li class=breadcrumb-item><a href=/blogs/searchengine/>SearchEngine</a></li><li class="breadcrumb-item active" aria-current=page>SearchEngine-1-概要</li></ol></nav><p class="display-4 mt-5">SearchEngine-1-概要</p><small class="text-body-secondary text-uppercase">Posted on October 14, 2024
&bull;
5&nbsp;min read &bull;
906&nbsp;words</small><p class="lead mb-5 mt-3">【笔记】wangshusen-搜索引擎技术：搜索引擎的基本概念</p><div class="d-md-none pb-5"><div class="d-grid gap-2 mx-auto"><a aria-label="On this page" href=#toc-collapse class="btn btn-outline-secondary position-relative toc-button" data-bs-toggle=collapse aria-expanded=false aria-controls=toc-collapse role=button><span class="d-flex justify-content-between"><span class=my-auto>On this page</span><span class="align-self-center ps-1"><svg class="svg-inline--fa fas fa-sort" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 320 512"><use href="#fas-sort"/></svg></span></span></a></div><div class="collapse border bg-body-tertiary rounded p-1 navbar-nav-scroll" id=toc-collapse><small><div class="toc toc-panel text-body p-2"><a class="toc-item toc-level-1" href=/blogs/searchengine/basics/#搜索引擎的基本概念>搜索引擎的基本概念 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#曝光--点击>曝光 & 点击 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#垂搜--通搜>垂搜 & 通搜 </a><a class="toc-item toc-level-1" href=/blogs/searchengine/basics/#搜索引擎的用户满意度>搜索引擎的用户满意度 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#相关性relevance>相关性（Relevance） </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#内容质量>内容质量 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#时效性>时效性 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#个性化>个性化 </a><a class="toc-item toc-level-1" href=/blogs/searchengine/basics/#搜索引擎的评价指标>搜索引擎的评价指标 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#北极星指标用户规模留存>北极星指标：用户规模&留存 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#中间指标>中间指标 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#人工体验评估>人工体验评估 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#总结>总结 </a><a class="toc-item toc-level-1" href=/blogs/searchengine/basics/#搜索引擎的链路>搜索引擎的链路 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#查询词处理>查询词处理 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#召回information-retrieval>召回（Information Retrieval） </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#排序ranking>排序（Ranking）</a></div></small></div></div><div class=content><h2 id=搜索引擎的基本概念 class=heading>搜索引擎的基本概念<a href=#%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e%e7%9a%84%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5 aria-labelledby=搜索引擎的基本概念><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><blockquote class=blockquote><ul><li><p><strong>查询词（query）</strong>：用户在搜索框中输入的词。</p></li><li><p><strong>查询建议（SUG）</strong>：用户点击搜索之前，搜索引擎会给出的相关词，如用户输入“深度学习”，SUG 可能为“深度学习框架”、“深度学习教程”等等。</p><p>作用是让搜索引擎用起来更方便。</p></li><li><p><strong>文档</strong>：搜索结果，如网页链接（Google、百度）、商品（Amazon、淘宝）、视频（YouTube、B 站）</p></li><li><p><strong>搜索结果页</strong>：搜索完成的整个界面。</p><p>搜索结果页的主体为文档，会有首图、标题、摘要等预览</p></li><li><p><strong>标签/筛选项</strong>：搜索结果页中包含的信息，如最新（按时间）、最热（按点击&交互次数）、视频。</p></li></ul></blockquote><blockquote class=blockquote><ul><li><p><strong>文档单列曝光：</strong> 搜索结果页每行只有一篇文档（Google、百度、YouTube）</p></li><li><p><strong>文档双列曝光：</strong> 搜索结果页每行有两篇文档（淘宝、京东、小红书），两者只是产品形态的差异，后台的搜索引擎算法和工程架构差不多</p></li></ul></blockquote><h3 id=曝光--点击 class=heading>曝光 & 点击<a href=#%e6%9b%9d%e5%85%89--%e7%82%b9%e5%87%bb aria-labelledby=曝光--点击><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>搜索引擎考虑两类点击率：<strong>文档、查询词</strong></p><blockquote class=blockquote><ul><li><p><strong>曝光：</strong> 用户在搜索结果页上看到文档，就算曝光。</p><p>如屏幕上最多展示
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span>
</span>篇文档，假如用户搜索之后不往下滑，那么只有前
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span>
</span>篇文档获得曝光。</p></li><li><p><strong>文档点击</strong>：在曝光之后，用户点击文档，进入文档详情页。</p></li><li><p><strong>文档点击率：</strong></p><p>文档点击总次数 / 文档曝光总次数（<strong>独立看待每篇文档的点击</strong>）
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">10 \%</annotation></semantics></math></span></span></p></li></ul></blockquote><h3 id=垂搜--通搜 class=heading>垂搜 & 通搜<a href=#%e5%9e%82%e6%90%9c--%e9%80%9a%e6%90%9c aria-labelledby=垂搜--通搜><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><blockquote class=blockquote><ul><li><p><strong>垂直搜索（垂搜）</strong>：针对某一个行业的搜索引擎</p></li><li><p><strong>通用搜索（通搜）</strong>：覆盖面广，不限于一个领域</p></li></ul></blockquote><h4 id=垂直搜索 class=heading>垂直搜索<a href=#%e5%9e%82%e7%9b%b4%e6%90%9c%e7%b4%a2 aria-labelledby=垂直搜索><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><ul><li><p>电商搜索：Amazon、淘宝、京东、拼多多</p></li><li><p>学术搜索：Google Scholar、知网</p></li><li><p>本地生活搜索：Yelp、大众点评、美团、饿了么</p></li><li><p>酒店机票搜索：Booking、美团、携程、东航</p></li><li><p>租售房搜索：Zillow、Redfin、Airbnb、贝壳</p></li><li><p>招聘搜索：LinkedIn、脉脉、Boss 直聘</p></li></ul><p><strong>特点：</strong></p><ol><li><p><strong>垂搜的文档普遍是结构化的</strong>，容易根据文档属性标签做检索筛选:</p><ul><li><p>电商：商品，可以限定品牌、卖家、价格、颜色</p></li><li><p>学术：论文，可以限定关键词、作者、期刊、年份</p></li><li><p>本地生活：店铺，可以限定类目、商圈、距离</p></li></ul></li><li><p><strong>垂搜用户的意图明确</strong></p><ul><li><p>大众点评用户搜索“寿司”，目的是找寿司餐厅。</p></li><li><p>淘宝用户搜索“拳击”，目的是找拳击相关的商品。</p></li></ul></li></ol><h4 id=通用搜索 class=heading>通用搜索<a href=#%e9%80%9a%e7%94%a8%e6%90%9c%e7%b4%a2 aria-labelledby=通用搜索><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>谷歌、百度、必应、抖音（抖音可以自动判断查询词的意图，找视频/用户/商品/直播/本地生活的店铺）</p><p><strong>特点：</strong></p><ol><li><p><strong>文档来源广</strong>，覆盖面大（网页、视频、图片、商品、直播、店铺）</p></li><li><p><strong>没有结构化，检索难度大</strong>（需要搜索引擎自己做网页分析抽取信息）</p></li><li><p>用户使用通搜的目的各不相同，<strong>较难判断用户意图</strong></p></li></ol><h2 id=搜索引擎的用户满意度 class=heading>搜索引擎的用户满意度<a href=#%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e%e7%9a%84%e7%94%a8%e6%88%b7%e6%bb%a1%e6%84%8f%e5%ba%a6 aria-labelledby=搜索引擎的用户满意度><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p><strong>【业界共识】影响用户满意度的三大因素：</strong></p><ul><li><p><strong>相关性</strong>：查询词和文档在语义上有多相关</p></li><li><p><strong>内容质量</strong>：分为 EAT、文本质量、图片质量等几类，每一类都有多种分数</p></li><li><p><strong>时效性</strong>：意图分为突发时效性、一般时效性、周期时效性</p></li></ul><hr><p><strong>【移动互联网时代】</strong></p><ul><li><p><strong>个性化</strong>：反映在预估点击率、交互率上</p></li><li><p><strong>地域性</strong></p></li></ul><h3 id=相关性relevance class=heading>相关性（Relevance）<a href=#%e7%9b%b8%e5%85%b3%e6%80%a7relevance aria-labelledby=相关性relevance><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><blockquote class=blockquote><p><strong>相关性</strong> 是 <strong>查询词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span></strong>与 <strong>文档
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span>
</span></strong>两者的关系</p><ul><li><p>相关性是<strong>客观标准</strong>，不取决于用户
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span>
</span>，无个性化。(如果大多数有背景知识的人认为
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(q,d)</annotation></semantics></math></span>
</span>相关，则判定为相关。</p></li><li><p>相关性是<strong>语义</strong>上的，不是字面上的。相关是指
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span>
</span>能满足
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>的需求 或 回答
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>提出的问题</p></li><li><p>查询词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>可能有<strong>多重意图</strong>。只要
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span>
</span>命中
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>的一种主要意图，则
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(q,d)</annotation></semantics></math></span>
</span>算相关</p></li></ul></blockquote><p>召回、粗排、精排均需要计算相关性。</p><ul><li><p><strong>召回海选阶段</strong>: 候选文档量级为数万，使用 <strong>文本匹配分数</strong>（如 <code>tf-idf</code>、类目匹配分数等）或 <strong>双塔 <code>BERT</code> 模型</strong> 粗略地估计相关性。</p></li><li><p><strong>粗排阶段</strong>：候选文档量级为数千，使用 <strong>双塔 <code>BERT</code> 模型（推理代价小）</strong> 或 <strong>浅层交叉 <code>BERT</code> 模型</strong> 计算相关性。</p></li><li><p><strong>精排阶段</strong>：候选文档量级为数百，使用 <strong>交叉 <code>BERT</code> 模型（通常
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span>
</span>层</strong>）计算相关性。</p></li></ul><h3 id=内容质量 class=heading>内容质量<a href=#%e5%86%85%e5%ae%b9%e8%b4%a8%e9%87%8f aria-labelledby=内容质量><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p><strong>内容质量不是一个分数，而是很多分数，会在搜索排序中用到</strong></p><ul><li><p><strong><code>EAT</code></strong>：专业性、权威性、可信赖，针对作者和网站（对金钱、健康类的查询词尤为重要。）</p></li><li><p><strong>文本质量</strong>：文字质量、文章意图、标题党这样的负面信号，针对文档本身。</p></li><li><p><strong>图片质量（或视频质量）</strong>：分辨率、有无水印、是不是截图、图片是否清晰、图片的美学……</p></li></ul><h4 id=eat class=heading>EAT<a href=#eat aria-labelledby=eat><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><blockquote class=blockquote><p><strong><code>EAT</code>（又被称为权威性</strong>）：针对网站和作者，是谷歌提出的内容质量评价标准</p><ul><li><p><strong>专业性（Expertise）</strong>：作者有专业资质，比如医生、记者等。</p></li><li><p><strong>权威性（Authoritativeness）</strong>：作者、网站在领域内有影响力，不会被用户质疑。</p></li><li><p><strong>可信赖（Trustworthiness）</strong>：作者、网站的名声好坏。</p></li></ul></blockquote><p>对于 your money or your life 方面（金钱、健康类）的查询词，<code>EAT</code> 是排序的重要因子</p><ul><li><p><strong>Your money</strong>：</p><ul><li><p>金融理财（保险、投资、报税、贷款、转账）</p></li><li><p>电商、购物</p></li></ul></li><li><p><strong>Your life</strong>：</p><ul><li><p>医疗健康（诊断建议、用药建议、医院介绍、减肥）</p></li><li><p>法律等严肃的主题（诉讼、移民、选举、离婚、收养）</p></li><li><p>对人生有重大影响的主题（高考、择校、出国、就业）</p></li></ul></li></ul><h4 id=文本质量 class=heading>文本质量<a href=#%e6%96%87%e6%9c%ac%e8%b4%a8%e9%87%8f aria-labelledby=文本质量><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p><strong>文本质量</strong>：针对文档本身。</p><ul><li><p><strong>文字的质量</strong>：文章写得好不好？</p><ul><li><p>文章的价值：文章是否清晰、全面，事实是否准确，信息是否有用</p></li><li><p>作者的态度和水平：写作是否认真，写作的专业程度，写作的技巧</p><ul><li><p>宠物饲养：解释清楚、事实正确，对读者有价值。</p></li><li><p>笑话：好笑。</p></li><li><p>影评：清晰丶全面丶公正、深刻</p></li></ul></li></ul></li><li><p><strong>文章的意图</strong>：有益、有害？</p><ul><li><p>有益：分享有用的知识、攻略、亲身经历</p></li><li><p>有害：虚假信息、软广、散布仇恨、男女对立、发泄情绪</p></li></ul></li><li><p><strong>负向信号</strong>：标题党、图文不一致、虚假引流标签、堆砌关键词……对于每个文本质量分数，都有一个专门训练的模型：</p></li></ul><hr><ul><li><p><strong>文本质量不是一个分数，而是很多个分数，在搜索排序中起作用</strong>。</p></li><li><p><strong>对于每个文本质量分数，都有一个专门训练的模型</strong></p><ul><li><p>模型：<code>BERT</code> 等 NLP 模型、<code>CLIP</code> 等多模态模型。（预训练后再用人工标注的数据做 finetune）</p></li><li><p>数据：制定分档规则，然后人工标注</p></li><li><p>文本质量分数都是静态的，只需计算一次。在文档发布或被检索时，用模型打分，分数存入文档画像（搜索排序时直接读取文档画像）</p></li></ul></li></ul><h3 id=时效性 class=heading>时效性<a href=#%e6%97%b6%e6%95%88%e6%80%a7 aria-labelledby=时效性><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p><strong>文档的年龄（从文档发布/更新到现在过了多久）在排序中起多大作用</strong>？</p><ul><li><p>时效性强需求：query = “最新房贷政策”、“美元汇率”</p></li><li><p>有时效性需求但不强：query = “泰国旅游”、“新荣记探店”</p></li><li><p>无时效性需求：query = “搞笑萌宠”、“宝宝湿疹”</p></li></ul><p><strong>决于查询词，查询词对时效的需求越强，文档年龄的权重就越大</strong></p><p>优化搜索时效性的关键是 <strong>识别查询词的时效性意图</strong>，即查询词对“新”的需求，即卡文档年龄</p><hr><p><strong>分类</strong>：</p><ul><li><p>突发时效性</p></li><li><p>一般时效性（强/中/弱/无）</p></li><li><p>周期时效性</p></li></ul><p><strong>识别方法</strong>：</p><ul><li><p>数据挖掘</p></li><li><p>语义模型</p></li></ul><h4 id=突发时效性 class=heading>突发时效性<a href=#%e7%aa%81%e5%8f%91%e6%97%b6%e6%95%88%e6%80%a7 aria-labelledby=突发时效性><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>查询词涉及突发的新闻、热点事件。</p><hr><p><strong>如果查询词带有突发时效性，那么用户想看最近发布的文档</strong></p><ul><li><p>" 阿根廷足球”有没有突发时效性？</p></li><li><p>" 王力宏”有没有突发时效性？</p></li></ul><p><strong>识别方法</strong>：<strong>以数据挖掘为主</strong></p><ul><li><p>挖掘站内搜索量激增的查询词(明星八卦)</p></li><li><p>挖掘站内发布量激增的关键词（抖音小红书）</p></li><li><p>爬取其他网站的热词</p></li></ul><hr><p><strong>为什么不能用 <code>BERT</code> 等自然语言模型？</strong></p><ul><li><p>人擅长判断文字质量、相关性，<code>BERT</code> 也擅长</p></li><li><p>如果不借助新闻媒体，人无法判断突发时效性</p></li></ul><h4 id=一般时效性 class=heading>一般时效性<a href=#%e4%b8%80%e8%88%ac%e6%97%b6%e6%95%88%e6%80%a7 aria-labelledby=一般时效性><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>只看查询词字面就可以判断时效性意图的强弱，（无需知道近期是否有大新闻）</p><hr><p><strong>按需求强度分为
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span>
</span>档：强、中、弱、无</strong></p><p>【例】 <strong>(从强到弱)</strong> 某品牌羊毛、黄金价格、上海楼市新闻、在美国更新中国护照、单反相机测评、苏联笑话、82 版射雕</p><p><strong>识别方法：<code>BERT</code> 等语义模型</strong></p><h4 id=周期时效性 class=heading>周期时效性<a href=#%e5%91%a8%e6%9c%9f%e6%97%b6%e6%95%88%e6%80%a7 aria-labelledby=周期时效性><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>在每年特定时间表现为突发时效性，在其他时间表现为无时效性。</p><hr><p>【例】双十一、春晚小品、高考作文、奥斯卡</p><p><strong>识别方法：</strong></p><ul><li><p><strong>可以不做任何处理。</strong> 当查询词表现出突发时效性时，会被算法挖掘到。</p></li><li><p><strong>可以通过人工标注、数据挖掘</strong> 识别周期时效性查询词。</p></li></ul><h3 id=个性化 class=heading>个性化<a href=#%e4%b8%aa%e6%80%a7%e5%8c%96 aria-labelledby=个性化><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>考虑到不同用户有不同偏好，搜索引擎可以根据用户特征做排序（类似推荐系统）。</p><p>衡量用户对文档的偏好：</p><ul><li><p>预估点击率</p></li><li><p>交互率</p></li></ul><hr><p><strong>为什么需要个性化和点击率模型？</strong></p><ul><li><p><strong>查询词越宽泛（例如“头像”），就越需要个性化排序</strong></p><ul><li><p>宽泛的查询词（例如“头像”）相关的文档数量巨大，其中小部分是用户感兴趣的。</p></li><li><p>精准的查询词（例如“权力的游戏龙妈头像”）不需要个性化。</p></li></ul></li><li><p><strong>预估点击率和交互率有利于提升相关性和内容质量</strong></p><ul><li><p>相关且高质量的文档更容易被点击、点赞、收藏、转发。</p></li><li><p>与 <code>BERT</code> 等语义模型互补，解决 bad case。</p></li><li><p>即便是非个性化排序，也会用模型预估点击率和交互率（从另一个角度反映出相关性和内容质量），有助于提升排序效果。</p></li></ul></li></ul><hr><p><strong>【思考题】</strong></p><p><code>PageRank</code>：根据网页之间的链接关系给网页打分。如果很多重要网站的页面指向网页
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span>
</span>，则认为网页
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span>
</span>也重要。</p><p>【问题】：<code>PageRank</code> 属于搜索排序用到的哪一类因子? B</p><p>A.相关性 B． 权威性 (EAT) C． 文本质量 D． 时效性 E． 个性化</p><hr><h2 id=搜索引擎的评价指标 class=heading>搜索引擎的评价指标<a href=#%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e%e7%9a%84%e8%af%84%e4%bb%b7%e6%8c%87%e6%a0%87 aria-labelledby=搜索引擎的评价指标><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><p><strong>北极星指标（也叫核心指标）</strong></p><ul><li><p>用户规模、留存率（用户更多更活跃）</p></li><li><p>单个策略不容易提升规模和留存</p></li><li><p>对于某些垂类搜索引擎北极星指标可能有区别，如电商搜索，还包括商品交易总额等</p></li></ul><hr><p><strong>中间指标（与北极星指标正相关）</strong></p><ul><li><p>用户的点击等行为，反映搜索质量的好坏</p></li><li><p>做 A/B 测试，中间指标很容易显著</p></li></ul><hr><p><strong>人工体验评估</strong></p><ul><li><p>人工评估搜索体验，让标注员评估搜索结果好坏</p><p>考察 <code>GSB</code>、<code>DCG</code> 等指标</p></li></ul><h3 id=北极星指标用户规模留存 class=heading>北极星指标：用户规模&留存<a href=#%e5%8c%97%e6%9e%81%e6%98%9f%e6%8c%87%e6%a0%87%e7%94%a8%e6%88%b7%e8%a7%84%e6%a8%a1%e7%95%99%e5%ad%98 aria-labelledby=北极星指标用户规模留存><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><h4 id=用户规模 class=heading>用户规模<a href=#%e7%94%a8%e6%88%b7%e8%a7%84%e6%a8%a1 aria-labelledby=用户规模><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><blockquote class=blockquote><p><strong>日活用户数（Daily Active User，<code>DAU</code>）</strong>，或 <strong>月活用户数（Monthly Active User，<code>MAU</code>）</strong></p><p>日活用户数：</p><ul><li><p>搜索日活（<code>Search DAU</code>）</p></li><li><p>推荐日活（<code>Feed DAU</code>）</p></li></ul></blockquote><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330193518633.png width=55% alt></center><blockquote class=blockquote><p><strong>搜索渗透率</strong></p><p>搜索渗透率 = <code>Search DAU </code>/ APP 总体 <code>DAU</code>。</p></blockquote><p>搜索体验越好，用户越喜欢用搜索功能，搜索渗透率越高</p><p><strong>提升搜索日活、搜索渗透率的方法：</strong></p><ul><li><p>搜索的体验优化，可以提升搜索留存，从而提升搜索日活。</p></li><li><p>产品设计的改动，从推荐等渠道向搜索导流，推荐的用户更频繁地用搜索，提升搜索渗透率，从而提升搜索日活。</p></li></ul><h4 id=用户留存 class=heading>用户留存<a href=#%e7%94%a8%e6%88%b7%e7%95%99%e5%ad%98 aria-labelledby=用户留存><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p><strong>次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span>
</span>留: APP 的次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span>
</span>日内留存</strong></p><p>【例】</p><ul><li><p>Feb 1 有
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span>
</span>亿用户使用 APP。</p></li><li><p>这
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span>
</span>亿人中，有
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span>
</span>千万在 Feb 2~8 使用 APP 至少
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span>
</span>次。</p></li><li><p>Feb 1 的 <strong>次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span>
</span>留</strong> =
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>8 千万</mtext><mi mathvariant="normal">/</mi><mtext>1 亿</mtext><mo>=</mo><mn>80</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">\text{8 千万} / \text{1 亿} = 80\%</annotation></semantics></math></span>
</span>。</p></li></ul><hr><p><strong>常用的留存指标</strong>：</p><ul><li><p>次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span>
</span>留</p></li><li><p>次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span>
</span>留</p></li><li><p>次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn></mrow><annotation encoding="application/x-tex">30</annotation></semantics></math></span>
</span>留</p></li><li><p>次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span>
</span>留随
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span>
</span>单调递增：
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>次1留</mtext><mo>≤</mo><mtext>次7留</mtext><mo>≤</mo><mtext>次30留</mtext></mrow><annotation encoding="application/x-tex">\text{次1留} \le \text{次7留} \le \text{次30留}</annotation></semantics></math></span></span></p></li></ul><p><strong>把 APP 多个功能单独拆出看留存指标</strong>：</p><ul><li><p>APP 总体次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span>
</span>留</p></li><li><p>搜索次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span>
</span>留</p></li><li><p>推荐次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span>
</span>留</p></li></ul><p>现在更流行 <code>LT7</code> 和 <code>LT30</code> 留存指标。原因：<code>LT</code> 是加和，次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span>
</span>留是 OR，加和波动更小，更容易显著。</p><h3 id=中间指标 class=heading>中间指标<a href=#%e4%b8%ad%e9%97%b4%e6%8c%87%e6%a0%87 aria-labelledby=中间指标><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>用户的点击等行为、规模和留存指标未必适合评价单个策略。</p><p>单个策略很难显著提升规模和留存（很难达到统计显著性）。即便能达到，规模和留存指标也需要很长时间才能显著（<strong>不利于快速迭代模型和策略</strong>）。</p><p><strong>规模和留存指标更适合作为大盘长期指标观察</strong>，评估整个团队长期的表现（所有策略叠加）。</p><p>长期优化搜索体验，规模和留存会稳定提升，反映在 AB 测试的 <code>holdout</code> 上。</p><p><strong>中间指标</strong>：与规模和留存强关联，且容易在 AB 测试中显著。</p><h4 id=点击率有点比 class=heading>点击率&有点比<a href=#%e7%82%b9%e5%87%bb%e7%8e%87%e6%9c%89%e7%82%b9%e6%af%94 aria-labelledby=点击率有点比><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><blockquote class=blockquote><ul><li><p><strong>文档点击率</strong>：搜索结果页上文档被用户看到，算作曝光。（通常是
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">10\%</annotation></semantics></math></span>
</span>）</p><p>文档点击率 = 总点击数 / 总曝光数</p></li><li><p><strong>有点比（查询词点击率）：</strong> 搜索结果页上，用户点击任意一篇文档，则本次搜索算有点击（是否找到至少一篇用户需要的文档）。（通常是
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>70</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">70\%</annotation></semantics></math></span>
</span>）</p><p>有点比 = 有点击的搜索次数 / 总搜索次数</p></li><li><p><strong>首屏有点比</strong>：仅当点击发生在首屏，本次搜索算有点击（考察排序的效果，是否把用户需要的文档排在首屏）</p><p>首屏有点比
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≤</mo></mrow><annotation encoding="application/x-tex">\le</annotation></semantics></math></span>
</span>有点比</p></li></ul></blockquote><p><strong>3 个指标关联很强，一个指标提升会造成其它指标的提升：</strong></p><ul><li><p>改进 <strong>排序策略</strong> 通常会同时提升以上三种指标</p></li><li><p>改进 <strong>召回策略</strong> 可以提升 <strong>文档点击率</strong> 和 <strong>有点比</strong>（因为首屏的几篇文档主要由排序决定）</p></li></ul><h4 id=首点位置 class=heading>首点位置<a href=#%e9%a6%96%e7%82%b9%e4%bd%8d%e7%bd%ae aria-labelledby=首点位置><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>用户需要的文档排名是否靠前。</p><blockquote class=blockquote><p><strong>平均首点位置</strong>：</p><ul><li><p>一次搜索之后，记录第一次点击发生的位置</p></li><li><p>如果没有点击，或者首点位置大于阈值
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span>
</span>，则首点位置取
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span></span></p></li><li><p>对所有搜索的首点位置取平均。</p></li></ul></blockquote><p><strong>平均首点位置越小越好</strong>：平均首点位置小，说明符合用户需求的文档排名靠前，用户体验好。</p><p><strong>优化搜索排序</strong>，通常会同时改善 <strong>有点比</strong>、<strong>首屏有点比</strong>、<strong>平均首点位置</strong>，三者与留存指标强相关。</p><h4 id=主动换词率 class=heading>主动换词率<a href=#%e4%b8%bb%e5%8a%a8%e6%8d%a2%e8%af%8d%e7%8e%87 aria-labelledby=主动换词率><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>如果用户搜到需要的文档，通常不会换查询词。</p><p>【例】</p><ol><li>女性用户搜 “机械键盘”，结果大多是黑色的，不符合用户喜好，个性化差，用户会换词为 “机械键盘 女性”</li><li>搜 “权利的游戏”，搜索引擎没能自动纠错，搜到的文档很少、质量不好，用户会换词为 “权力的游戏”</li></ol><p><strong>换词的判定</strong></p><p>一定时间间隔内，搜的两个查询词相似（比如编辑距离小），则被认定为换词。</p><blockquote class=blockquote><p><strong>主动换词 vs 被动换词：</strong></p><ul><li><p><strong>主动换词</strong>：原因是没找到满意的结果，说明搜索结果不好。</p></li><li><p><strong>被动换词</strong>（说明搜索引擎很智能）：比如搜索建议“您是不是想搜权力的游戏”，用户点击建议。</p></li></ul></blockquote><h4 id=交互指标 class=heading>交互指标<a href=#%e4%ba%a4%e4%ba%92%e6%8c%87%e6%a0%87 aria-labelledby=交互指标><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>用户点击文档进入详情页，可能会点赞、收藏、转发、关注、评论。</p><p>交互通常表明用户对文档非常感兴趣（强度大于点击），因此可以作为中间指标（类似于有点比、首点位置、换词率）</p><hr><p><strong>缺点</strong></p><p>交互行为稀疏（每百次点击，只有 10 次点赞、2 次收藏），单个交互率波动很大，且在 AB 测试中不容易显著。</p><p><strong>解决</strong></p><p>取各种交互率的加权和作为总体交互指标，权重取决于交互率与留存的关联强弱。</p><h4 id=中间目标---留存目标 class=heading>中间目标 -> 留存目标：<a href=#%e4%b8%ad%e9%97%b4%e7%9b%ae%e6%a0%87---%e7%95%99%e5%ad%98%e7%9b%ae%e6%a0%87 aria-labelledby=中间目标---留存目标><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><ul><li><p>体验优化的策略往往同时改善多种中间指标：有点比、首屏有点比、平均首点位置、主动换词率、交互指标（短期内 A/B test 就会显著）</p></li><li><p>单个体验优化的策略很难在短期内显著提升留存指标（通常微弱上涨，不具有统计显著性）。只要中间指标普遍正向，实验就可以推全。</p></li><li><p>上述中间指标与留存有很强的关联，长期持续改善中间指标，留存指标会稳定上涨。</p></li></ul><h3 id=人工体验评估 class=heading>人工体验评估<a href=#%e4%ba%ba%e5%b7%a5%e4%bd%93%e9%aa%8c%e8%af%84%e4%bc%b0 aria-labelledby=人工体验评估><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><h4 id=side-by-side-评估 class=heading>Side by Side 评估<a href=#side-by-side-%e8%af%84%e4%bc%b0 aria-labelledby=side-by-side-评估><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>判断新旧两种策略谁的结果更好</p><hr><p><strong>【步骤】</strong></p><p>随机抽一批搜索日志，取其中查询词、用户画像、场景。<strong>运行新旧两种策略，得到两个搜索结果页</strong>（文档列表，标注员可以看到标题、摘要、首图等信息）。</p><ul><li><p>固定查询词、用户、场景（时间、地点、手机型号等），搜索结果的差异只来自于策略。</p></li><li><p>随机抽样搜索日志时，<strong>非均匀抽样</strong>（否则高频查询词太多），需要覆盖高频、中频、低频查询词。</p></li></ul><p><strong>对于一条查询词，人工评估两个列表，分别对应新旧两种策略。</strong></p><ul><li><p>基于查询词、用户画像、搜索场景，判断左右两个列表谁更好。</p></li><li><p>盲评，即新策略出现在左、右的概率都是
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">50\%</annotation></semantics></math></span>
</span>。</p></li><li><p>不是判断具体哪篇文档更好，而是判断哪个列表整体更好。</p></li></ul><hr><p><strong>【评价指标】</strong></p><p>使用 <code>GSB</code>(Good Same Bad）作为评价指标：</p><ul><li><p>如果新策略更优，记作 Good（G）</p></li><li><p>如果两者持平，记作 Same（S）</p></li><li><p>如果旧策略更优，记作 Bad（B）</p></li></ul><p>【例】：评 300 条查询词，<code>GSB</code> 为
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mo>:</mo><mn>220</mn><mo>:</mo><mn>30</mn></mrow><annotation encoding="application/x-tex">50:220:30</annotation></semantics></math></span>
</span>，
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>&gt;</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">G &gt; B</annotation></semantics></math></span>
</span>，新策略更好</p><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330195850139.png width=55% alt></center><h4 id=月度评估 class=heading>月度评估<a href=#%e6%9c%88%e5%ba%a6%e8%af%84%e4%bc%b0 aria-labelledby=月度评估><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p><strong>【步骤】</strong></p><p>每个月随机抽取一批搜索日志（用户实际看到的搜索结果），每条搜索日志包含查询词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>、用户
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span>
</span>、场景
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span>
</span>、排名前
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span>
</span>的文档
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_1, \cdots ,d_k</annotation></semantics></math></span>
</span>。</p><ul><li><p>随机抽样搜索日志时，<strong>非均匀抽样</strong>，比例固定，需要覆盖高频、中频、低频查询词。</p></li><li><p>文档数量
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span>
</span>取决于平均下滑深度（用户平均浏览结果页的前
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span>
</span>篇文档），比如
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>20</mn></mrow><annotation encoding="application/x-tex">k=20</annotation></semantics></math></span>
</span>。</p></li></ul><p>标注员评估每一篇文档，打分
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>score</mtext><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><mi>u</mi><mo separator="true">,</mo><mi>c</mi><mo separator="true">,</mo><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{score}(q, u, c, d_i)</annotation></semantics></math></span>
</span>，越大说明文档
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span>
</span>越好</p><ul><li><p>可以单独给相关性、内容质量、时效性打分 (每个维度单独评分)。</p></li><li><p>可以只打一个综合满意度分数（有具体的分档方法）</p></li></ul><hr><p><strong>【评价指标】</strong></p><div class=mathjax-display><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi mathvariant="normal">D</mi><mi mathvariant="normal">C</mi><mi mathvariant="normal">G</mi><mi mathvariant="normal">@</mi></mrow><mi>k</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></munderover><mfrac><mrow><mrow><mi mathvariant="normal">s</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi></mrow><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><mi>u</mi><mo separator="true">,</mo><mi>c</mi><mo separator="true">,</mo><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><mrow><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">
\mathrm{DCG@}k =\sum_{i = 1}^k\frac{\mathrm{score}(q, u, c, d_i)}{\log_2(i+1)}.
</annotation></semantics></math></span></div><p><code>DCG</code> <strong>评价的不是单独文档，而是搜索结果页整体好坏</strong></p><ul><li><p><span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">s</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi></mrow><mo stretchy="false">(</mo><mi>q</mi><mo separator="true">,</mo><mi>u</mi><mo separator="true">,</mo><mi>c</mi><mo separator="true">,</mo><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{score}(q,u,c,d_i)</annotation></semantics></math></span>
</span>：标注员评分，越大说明文档
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span>
</span>越好。</p></li><li><p><span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\log_2(i+1)</annotation></semantics></math></span>
</span>：加权，文档排名越靠后，这篇文档对用户体验的影响越小，权重越低。</p></li></ul><p><strong>对月度所有搜索日志，取 <code>DCG</code> 的均值，作为月度评估的结果</strong></p><ul><li><p>可以是自我对比，是否优于往期的 <code>DCG</code></p></li><li><p>可以与竞对对比，是否优于竞对的 <code>DCG</code></p></li></ul><h3 id=总结 class=heading>总结<a href=#%e6%80%bb%e7%bb%93 aria-labelledby=总结><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p><strong>北极星指标：用户规模真&留存</strong></p><ul><li><p><strong>用户规模：</strong></p><ul><li><p>APP 总体的 <code>DAU</code>、搜索的 <code>DAU</code></p></li><li><p>搜索渗透率（Search <code>DAU</code>／APP <code>DAU</code>)</p><p>（百度不看搜索渗透率，看推荐渗透率，因为其主要功能是搜索，搜索渗透率接近
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span>
</span>）</p></li></ul></li><li><p><strong>用户留存：</strong></p><ul><li><p>次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span>
</span>留、次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span>
</span>留、次
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn></mrow><annotation encoding="application/x-tex">30</annotation></semantics></math></span>
</span>留。</p></li><li><p><code>LT7</code>、<code>LT30</code> （目前更流行）</p></li><li><p>APP 总体的留存、搜索自身的留存。</p></li></ul></li></ul><hr><ul><li><p><strong>规模和留存指标未必适合评价单个策略</strong>。</p><ul><li><p>单个策略很难显著提升规模和留存。</p></li><li><p>规模和留存指标需要很长时间才能显著。</p></li></ul></li><li><p><strong>规模和留存指标更适合作为大盘长期指标观察</strong>。</p><ul><li><p>评估整个团队长期的表现（所有策略叠加）。</p></li><li><p>长期优化搜索体验，规模和留存会稳定提升，反映在 A/B 测试的 <code>holdout</code> 上。</p></li></ul></li></ul><hr><p><strong>中间指标：用户的点击等行为</strong></p><p>中间指标：与规模和留存强关联，且容易在 A/B 测试中显著</p><ul><li><p><strong>有点比</strong>：是否找到至少一篇用户需要的文档。</p></li><li><p><strong>首屏有点比</strong>：是否把用户需要的文档排在首屏。(考察排序效果)（越高越好）</p></li><li><p><strong>首点位置</strong>：用户需要的文档排名是否靠前。(考察排序效果)（越小越好）</p></li><li><p><strong>主动换词率</strong>：没搜到用户需要的文档，用户会换词重搜。（越小越好）</p></li><li><p><strong>交互率</strong>：文档是用户非常需要的’那么用户会点赞丶收藏转发、关注·····</p></li></ul><hr><p><strong>人工体验评估</strong></p><ul><li><p><strong><code>Side by side</code> 评估</strong>：以 <code>GSB</code> 作为评价指标，对比新旧两种策略，决策新策略是否可以推全。</p><p><strong>缺点</strong></p><ul><li><p>评估过于主观，评估标准未必与普通用户体验一致。</p></li><li><p>每次仅评价几百个搜索结果页，结果噪声大，稳定性不如 AB 测试（AB 测试虽然单次结果很随机，但样本量大，统计意义上可靠）。</p></li><li><p>速度慢于 AB 测试，影响开发迭代效率。</p></li><li><p>人工成本比较贵。</p></li><li><p>不适合强个性化搜索引擎，个性化较难处理，仅凭用户画像难以判断用户真实需求。</p></li></ul></li><li><p><strong>月度评估</strong>：以 <strong>平均 <code>DCG</code></strong> 作为评价指标，与自己往期做对比，与竞对做对比，判断搜索团队整体水平。</p></li></ul><hr><p><strong><code>Side by side</code> 和月度评估的区别：</strong></p><ul><li><p><strong>目的不同</strong>：前者决策新策略是否推全，后者判断搜索团队整体水平（不是单个策略）。</p></li><li><p><strong>指标不同</strong>：前者的指标是 <code>GSB</code>，后者的指标是 <code>DCG</code>。</p></li><li><p><strong>有无争议</strong>：前者充满争议，后者没有缺点和争议 。</p></li></ul><hr><p><strong>【思考题】</strong></p><p>【问题】：用于评价用户体验，整个搜索引擎的日均搜索次数是好的指标吗？</p><p>【提示】：</p><ul><li><p>是好的商业目标，它与广告收入正相关。</p></li><li><p>可以用来对比新旧策略的用户体验吗?</p></li><li><p>日均搜索次数 = <code>DAU</code> × 人均搜索次数。</p></li><li><p>人均搜索次数与换词率的关系是什么?</p></li></ul><p><code>DAU</code> 增长是好事，但人均搜索次数增长不一定是好事，不代表用户体验变好</p><h2 id=搜索引擎的链路 class=heading>搜索引擎的链路<a href=#%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e%e7%9a%84%e9%93%be%e8%b7%af aria-labelledby=搜索引擎的链路><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h2><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330201135460.png width=55% alt></center><ul><li><p><strong>查询词处理</strong>：分词、词权重、类目识别、意图识别、查询词改写等多个功能模块，后面召回和排序会使用查询词处理的结果。</p></li><li><p><strong>召回</strong>：从海量文档中找出几万篇与查询词相关的文档，二三十条召回通道同时运行，各自有一些配额。召回结束后，会用规则或简单模型做个初步筛选，把文档数量降低到几千，再送去排序服务器。</p></li><li><p><strong>排序</strong>：决定搜索结果页上文档展示的顺序。需要计算相关性、点击率、内容质量、时效性等很多分数，然后用规则或模型融合这些分数，给出最终的排序。</p><ul><li><p><strong>推荐系统排序</strong> 主要靠预估点击率和交互率。</p></li><li><p><strong>搜索引擎排序</strong> 中的预估点击率和交互率是个性化分数，此外还需要相关性、时效性、内容质量等分数综合，<strong>其中相关性最重要</strong>。</p></li></ul></li></ul><h3 id=查询词处理 class=heading>查询词处理<a href=#%e6%9f%a5%e8%af%a2%e8%af%8d%e5%a4%84%e7%90%86 aria-labelledby=查询词处理><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>只要有 <strong>分词</strong> 就能做文本召回，如果用向量召回甚至连分词都不需要；</p><p>除分词之外的其他功能（<strong>词权重、类目识别、意图识别、改写</strong> 等）都是为了用搜索引擎效果更好，而非必不可少。</p><p>查询词处理的 <strong>缓存</strong>，如果查询词命中缓存，就直接读取缓存中的查询词处理结果，不需要调用各个服务做计算。对于通用搜索引擎，<strong>几百万个</strong> 高频查询词就能覆盖每天大部分的搜索请求。</p><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330201732955.png width=55% alt></center><h4 id=分词tokenization class=heading>分词（Tokenization）<a href=#%e5%88%86%e8%af%8dtokenization aria-labelledby=分词tokenization><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>中文搜索引擎必不可少，主要给文本召回使用（文本召回必须要把查询词切成多个较短的 term）</p><p>【例】：冬季卫衣推荐 —> 冬季/卫衣/推荐</p><hr><p><strong>为什么需要做分词？</strong></p><ul><li><p>文本召回根据词（term）在倒排索引中检索文档。</p></li><li><p>倒排索引的 key 大多是“冬季”、“卫衣”、“推荐”这样的常用词，数量不大。</p></li><li><p>假如倒排索引的 key 是“冬季卫衣推荐”这样的词，倒排索引会过于巨大（工程上的困难）。</p></li></ul><h4 id=词权重term-weight class=heading>词权重（Term Weight）<a href=#%e8%af%8d%e6%9d%83%e9%87%8dterm-weight aria-labelledby=词权重term-weight><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>非必要但有用</p><p>【例】：冬季卫衣推荐 —> 冬季/卫衣/推荐</p><p><strong>词权重</strong>：卫衣 > 冬季 > 推荐。</p><ul><li><p>丢弃“卫衣”，搜索“冬季推荐 " （绝对不能丢弃）</p></li><li><p>丢弃“冬季”，搜索“卫衣推荐 " （若丢弃对搜索结果有较大影响）</p></li><li><p>丢弃“推荐”，搜索“冬季卫衣” （若丢弃，查询词语义基本不变，没有影响）</p></li></ul><hr><p><strong>为什么要计算词权重（Term Weight）？</strong></p><ul><li><p>如果查询词太长，没有文档可以同时包含其中所有词，文本召回找不到用户想要的文档，需要丢弃不重要的词（告诉文本召回哪些 term 不重要，可以丢弃）</p></li><li><p>召回结束之后需要用简单的规则或模型计算相关性，对文档做个初步筛选。计算查询词与文档的相关性时，可以用词权重做加权</p></li></ul><h4 id=类目识别 class=heading>类目识别<a href=#%e7%b1%bb%e7%9b%ae%e8%af%86%e5%88%ab aria-labelledby=类目识别><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>每个平台都有各自的 <strong>多级类目体系</strong>(一个平台可能有几十个一级类目，几百个二级类目，甚至会细分出三级类目)。</p><ul><li><p>一级类目：美妆</p></li><li><p>二级类目：彩妆、护肤、美甲、香水、医美</p></li></ul><p>用 <code>NLP</code> 技术识别文档、查询词的类目（<strong>多标签分类问题</strong>），一篇文档/查询词可能同时属于多个类目。</p><ul><li><p><strong>文档类目识别</strong>：在文档发布（或被爬虫获取到）时，<strong>离线</strong> 识别文档类目。</p></li><li><p><strong>查询词类目识别</strong>：在用户做搜索时，<strong>在线</strong> 识别查询词类目。</p></li></ul><p><strong>类目识别的作用</strong>：召回模型、排序模型将文档、查询词类目作为特征。</p><h4 id=查询词意图识别 class=heading>查询词意图识别<a href=#%e6%9f%a5%e8%af%a2%e8%af%8d%e6%84%8f%e5%9b%be%e8%af%86%e5%88%ab aria-labelledby=查询词意图识别><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>一条查询词可以同时带有多种意图。</p><ul><li><p><strong>时效性意图</strong>：查询词对文档“新”的需求，召回和排序均需要 <strong>考虑文档的年龄</strong>。</p><p>【例】：</p><ul><li><p>新款电动车测评：一般时效性意图</p></li><li><p>热点新闻：突发时效性意图</p></li></ul></li><li><p><strong>地域性意图</strong>：召回和排序不止需要文本相关性，还需要结合用户定位地点、查询词提及地点、文档定位地点。</p><p>【例】：附近的美食</p></li><li><p><strong>用户名意图</strong>：用户想要找平台中的某位用户，应当检索用户名库，而非检索文档库。</p></li><li><p><strong>求购意图</strong>：用户可能想要买商品，同时在文档库、商品库中检索。</p></li></ul><h4 id=查询词改写 class=heading>查询词改写<a href=#%e6%9f%a5%e8%af%a2%e8%af%8d%e6%94%b9%e5%86%99 aria-labelledby=查询词改写><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>技术难度最大。</p><p>用户输入查询词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>，算法将其改写成多个查询词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>q</mi><mn>1</mn><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msubsup><mi>q</mi><mi>k</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup></mrow><annotation encoding="application/x-tex"> q_1^{\prime},\cdots,q_k^{\prime}</annotation></semantics></math></span>
</span>。（独立用
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo separator="true">,</mo><msubsup><mi>q</mi><mn>1</mn><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msubsup><mi>q</mi><mi>k</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msubsup></mrow><annotation encoding="application/x-tex">q, q_1^{\prime},\cdots,q_k^{\prime}</annotation></semantics></math></span>
</span>做召回，对召回的文档取并集。）</p><hr><p><strong>查询词改写有什么用？</strong></p><ol><li><p>解决语义匹配、但文本不匹配的问题（文本召回只能做字面上的匹配)。</p><p>【例】：</p><ul><li><p><span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>= “LV包”</p></li><li><p><span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span>
</span>= “推荐几款 LOUIS VUITTON 包包”</p></li><li><p><span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>和
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span>
</span>语义相关，但文本召回无法用
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>检索到
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span></span></p></li></ul></li><li><p>解决召回文档数量过少的问题。</p><ul><li><p><span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>不规范表达，或
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>过长，导致召回结果很少。</p><p>【例】：</p><ul><li><p>老谋子拍的电影 = 张艺谋的电影</p></li><li><p>身高 160 体重 120 年龄 20 女穿搭 = 微胖女大学生穿搭</p></li></ul></li></ul></li></ol><h3 id=召回information-retrieval class=heading>召回（Information Retrieval）<a href=#%e5%8f%ac%e5%9b%9einformation-retrieval aria-labelledby=召回information-retrieval><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><blockquote class=blockquote><p>给定查询词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>，从文档库（数亿篇文档）中快速检索数万篇可能与
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>相关的文档
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>d</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{d\}</annotation></semantics></math></span></span></p><ul><li><p><strong>文本召回</strong>（即文本匹配，最传统的方法）：借助倒排索引，匹配
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>中的词和
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span>
</span>中的词.</p></li><li><p><strong>向量召回（双塔召回）</strong>：用BERT这样的深度学习技术，将
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>和
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span>
</span>分别表征为向量
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">x_q</annotation></semantics></math></span>
</span>和
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>z</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">z_d</annotation></semantics></math></span>
</span>。给定查询词向量
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>q</mi></msub></mrow><annotation encoding="application/x-tex">x_q</annotation></semantics></math></span>
</span>，在向量数据库中做<code>ANN</code>查找，召回相似度高的文档
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>z</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">z_d</annotation></semantics></math></span>
</span>。</p></li><li><p><strong>KV召回（离线构造的KV索引，用于高频查询词的召回）</strong>：对于高频查询
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>，离线建立
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>→</mo><mtext>List</mtext><mo stretchy="false">⟨</mo><mi>d</mi><mo stretchy="false">⟩</mo></mrow><annotation encoding="application/x-tex">q \rightarrow \text{List} \langle d \rangle </annotation></semantics></math></span>
</span>这样的 key-value索引。线上直接读取索引，获取
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>相关的文档。</p></li></ul></blockquote><h4 id=文本召回 class=heading>文本召回<a href=#%e6%96%87%e6%9c%ac%e5%8f%ac%e5%9b%9e aria-labelledby=文本召回><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>借助倒排索引</p><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330202156064.png width=55% alt></center><ul><li><p>离线处理文档，建立倒排索引(key是term， value是文档)。（给定词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span>
</span>(term)，可以快速找到所有包含
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span>
</span>的文档）</p></li><li><p>给定查询词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>，做分词得到多个词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>t</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">t_1, \cdots, t_k</annotation></semantics></math></span>
</span>对。</p></li><li><p>于每个词
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">t_i</annotation></semantics></math></span>
</span>，检索倒排索引，得到文档的集合
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="script">D</mi><mi mathvariant="script">i</mi></msub></mrow><annotation encoding="application/x-tex">\mathcal{D_i}</annotation></semantics></math></span>
</span>, 这些文档全都包含
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">t_i</annotation></semantics></math></span>
</span>。</p></li><li><p>求
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span>
</span>个集合的<strong>交集</strong>
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="script">D</mi><mn mathvariant="script">1</mn></msub><mo>∩</mo><mo>⋯</mo><mo>∩</mo><msub><mi mathvariant="script">D</mi><mi mathvariant="script">k</mi></msub></mrow><annotation encoding="application/x-tex">\mathcal{D_1} \cap \cdots \cap \mathcal{D_k}</annotation></semantics></math></span>
</span>，作为文本召回的结果。</p></li><li><p>交集可能很小甚至为空，因此需要对
<span class=mathjax-inline><span class=katex><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span>
</span>做<strong>丢词、改写。</strong></p></li></ul><h4 id=向量召回 class=heading>向量召回<a href=#%e5%90%91%e9%87%8f%e5%8f%ac%e5%9b%9e aria-labelledby=向量召回><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p><strong>双塔模型</strong></p><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330202505970.png width=55% alt></center><ul><li><p>借助深度学习技术，把查询词和文档表征为向量，计算两个向量的<strong>内积或余弦相似度</strong>。</p></li><li><p>训练模型时，用<strong>预测点击</strong>或者<strong>相关性</strong>作为预测目标。</p></li><li><p><strong>文档</strong>的预测表征：<strong>预先计算好</strong>，存储于向量数据库。</p></li><li><p><strong>查询词</strong>的向量表征：<strong>实时计算</strong>（查询词很短，推理代价不大）。</p></li><li><p>在线上做召回时，给定查询词的向量表征，在向量数据库中做 <code>ANN</code> 查找, 找到相似度最高的一批文档作为召回结果。</p></li></ul><h5 id=kv召回 class=heading>KV召回<a href=#kv%e5%8f%ac%e5%9b%9e aria-labelledby=kv召回><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h5><p><strong>作为补充</strong></p><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330202549650.png width=55% alt></center><ul><li><p><strong>key</strong>：用户真实搜过的查询词，在过去一段时间被搜的次数高于某个阈值。</p></li><li><p><strong>value</strong>：文档列表，每个查询词都对应很多篇文档，由于离线做过筛选，这些文档与查询词都有高相关性。</p></li></ul><h3 id=排序ranking class=heading>排序（Ranking）<a href=#%e6%8e%92%e5%ba%8franking aria-labelledby=排序ranking><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h3><p>搜索排序需要多个模型计算多个分数</p><h4 id=排序的依据 class=heading>排序的依据<a href=#%e6%8e%92%e5%ba%8f%e7%9a%84%e4%be%9d%e6%8d%ae aria-labelledby=排序的依据><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h4><p>影响用户满意度的因素</p><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330202819019.png width=55% alt></center><ul><li><p><strong>相关性（主要决定因素）</strong>：查询词和文档之间的关系，重要性最高，在线上<strong>用BERT模型（4/6/12层都有，取决于算力）实时计算</strong>查询词和文档的相关性。</p></li><li><p><strong>内容质量</strong>：指文档的文本和图片质量、以及作者或者网站的<code>EAT</code>。<strong>算法离线分析文档的内容质量</strong>（在文档发布或被爬虫检索到时，算法就会计算文档的内容质量，得到很多分数），把多个分数写到文档画像中。</p></li><li><p><strong>时效性</strong>：主要指查询词对“新”的需求。<strong>查询词处理分析时效性</strong>，把结果传递给排序服务器，如果查询词有时效性需求，那么文档年龄会成为排序的主要因素之一。</p></li><li><p><strong>个性化</strong>：在不同的搜索引擎中，个性化的重要性各不相同(小红书看重个性化，个性化对百度的重要性片偏低（无登录）)。在线上用<strong>多目标神经网络</strong>预估点击率和交互率。（与推荐系统几乎相同）</p></li></ul><center><img style="border-radius:.3125em;box-shadow:0 .2rem .4rem rgba(34,36,38,.12);margin:1rem" src=pics/image-20250330202923709.png width=55% alt></center><hr><p><strong>【思考题】</strong></p><p>【问题】：搜索引擎的时效性很差，该从哪些方面改进？</p><p>【提示】：查询词处理、召回、排序分别能做什么？</p><h1 id=reference class=heading>Reference<a href=#reference aria-labelledby=reference><svg class="svg-inline--fa fas fa-link anchor" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 640 512"><use href="#fas-link"/></svg></a></h1><p><a href=https://github.com/wangshusen/SearchEngine class=markdown-link>https://github.com/wangshusen/SearchEngine</a></p></div><div class="row row-cols-2 mt-5 mb-3"><div class=col><a class=next href=/blogs/searchengine/rel/><svg class="svg-inline--fa fas fa-arrow-left" fill="currentcolor" aria-hidden="true" role="img" viewBox="0 0 448 512"><use href="#fas-arrow-left"/></svg>&nbsp;SearchEngine-2-相关性</a></div><div class="col text-end"></div></div><a href=# id=back-to-top class=back-to-top><span>▲</span>
</a><a href=# id=scroll-to-bottom class=back-to-top><span>▼</span>
</a><script>document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("back-to-top"),t=document.getElementById("scroll-to-bottom");e.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}),t.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})})})</script></div><div class="col col-md-3 col-lg-2 d-none d-md-block pt-5"><div class="toc toc-sidebar mb-5 my-md-0 mb-lg-5 p-3 text-body-secondary sticky-top"><strong class="d-block h6 my-2 pt-4">On this page:</strong><nav class=toc><a class="toc-item toc-level-1" href=/blogs/searchengine/basics/#搜索引擎的基本概念>搜索引擎的基本概念 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#曝光--点击>曝光 & 点击 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#垂搜--通搜>垂搜 & 通搜 </a><a class="toc-item toc-level-1" href=/blogs/searchengine/basics/#搜索引擎的用户满意度>搜索引擎的用户满意度 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#相关性relevance>相关性（Relevance） </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#内容质量>内容质量 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#时效性>时效性 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#个性化>个性化 </a><a class="toc-item toc-level-1" href=/blogs/searchengine/basics/#搜索引擎的评价指标>搜索引擎的评价指标 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#北极星指标用户规模留存>北极星指标：用户规模&留存 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#中间指标>中间指标 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#人工体验评估>人工体验评估 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#总结>总结 </a><a class="toc-item toc-level-1" href=/blogs/searchengine/basics/#搜索引擎的链路>搜索引擎的链路 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#查询词处理>查询词处理 </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#召回information-retrieval>召回（Information Retrieval） </a><a class="toc-item toc-level-2" href=/blogs/searchengine/basics/#排序ranking>排序（Ranking）</a></nav></div></div></div></div><footer class="container-fluid footer text-center p-3"><div class="container-xxl text-center"><small>Copyright © 2025 EV's Blog All rights reserved.
|
Powered by
<a href=https://gethinode.com class="link-bg-footer markdown-link">Hinode</a>.</small></div></footer></div><div id=toast-container class="toast-container position-fixed bottom-0 end-0 p-3"><div id=toast-copied-code-message class=toast role=alert aria-live=assertive aria-atomic=true><div class=toast-header><strong class=me-auto>EV's Blog</strong>
<button type=button class=btn-close data-bs-dismiss=toast aria-label=Close></button></div><div class=toast-body>Code copied to clipboard</div></div></div><svg xmlns:xlink="http://www.w3.org/1999/xlink" display="none"><symbol id="fas-ellipsis"><path d="M8 256a56 56 0 11112 0A56 56 0 118 256zm160 0a56 56 0 11112 0 56 56 0 11-112 0zm216-56a56 56 0 110 112 56 56 0 110-112z"/></symbol><symbol id="fas-sun"><path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 11192 0 96 96 0 11-192 0zm224 0a128 128 0 10-256 0 128 128 0 10256 0z"/></symbol><symbol id="fas-moon"><path d="M223.5 32C1e2 32 0 132.3.0 256S1e2 480 223.5 480c60.6.0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9.0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"/></symbol><symbol id="fas-angle-left"><path d="M41.4 233.4c-12.5 12.5-12.5 32.8.0 45.3l160 160c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0l-160 160z"/></symbol><symbol id="fas-sort"><path d="M137.4 41.4c12.5-12.5 32.8-12.5 45.3.0l128 128c9.2 9.2 11.9 22.9 6.9 34.9S301 224.1 288 224.1L32 224c-12.9.0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128zm0 429.3-128-128c-9.2-9.2-11.9-22.9-6.9-34.9S19.1 288 32.1 288h256c12.9.0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128c-12.5 12.5-32.8 12.5-45.3.0z"/></symbol><symbol id="fas-arrow-left"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8.0 45.3l160 160c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L109.2 288H416c17.7.0 32-14.3 32-32s-14.3-32-32-32H109.3L214.6 118.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0l-160 160z"/></symbol></svg>
<script src=/js/core.bundle-analytics.en.min.ceb6a67c169a28031391976dac91e1e2f460951862201b6249516a55d0fd6109.js data-category=analytics integrity="sha256-zramfBaaKAMTkZdtrJHh4vRglRhiIBtiSVFqVdD9YQk=" crossorigin=anonymous async></script><script src=/js/core.bundle.en.min.a8f02ab2fb9b94f48026c280f28175bd5b16b02b33e9fe16a81e09b2e6d19431.js integrity="sha256-qPAqsvublPSAJsKA8oF1vVsWsCsz6f4WqB4JsubRlDE=" crossorigin=anonymous async></script></body></html>